/*! h5 - 2015-11-16 19:50:21 */
!function(){function e(e,t){var r=e[0],s=e[1],l=e[2],c=e[3];r=i(r,s,l,c,t[0],7,-680876936),c=i(c,r,s,l,t[1],12,-389564586),l=i(l,c,r,s,t[2],17,606105819),s=i(s,l,c,r,t[3],22,-1044525330),r=i(r,s,l,c,t[4],7,-176418897),c=i(c,r,s,l,t[5],12,1200080426),l=i(l,c,r,s,t[6],17,-1473231341),s=i(s,l,c,r,t[7],22,-45705983),r=i(r,s,l,c,t[8],7,1770035416),c=i(c,r,s,l,t[9],12,-1958414417),l=i(l,c,r,s,t[10],17,-42063),s=i(s,l,c,r,t[11],22,-1990404162),r=i(r,s,l,c,t[12],7,1804603682),c=i(c,r,s,l,t[13],12,-40341101),l=i(l,c,r,s,t[14],17,-1502002290),s=i(s,l,c,r,t[15],22,1236535329),r=n(r,s,l,c,t[1],5,-165796510),c=n(c,r,s,l,t[6],9,-1069501632),l=n(l,c,r,s,t[11],14,643717713),s=n(s,l,c,r,t[0],20,-373897302),r=n(r,s,l,c,t[5],5,-701558691),c=n(c,r,s,l,t[10],9,38016083),l=n(l,c,r,s,t[15],14,-660478335),s=n(s,l,c,r,t[4],20,-405537848),r=n(r,s,l,c,t[9],5,568446438),c=n(c,r,s,l,t[14],9,-1019803690),l=n(l,c,r,s,t[3],14,-187363961),s=n(s,l,c,r,t[8],20,1163531501),r=n(r,s,l,c,t[13],5,-1444681467),c=n(c,r,s,l,t[2],9,-51403784),l=n(l,c,r,s,t[7],14,1735328473),s=n(s,l,c,r,t[12],20,-1926607734),r=o(r,s,l,c,t[5],4,-378558),c=o(c,r,s,l,t[8],11,-2022574463),l=o(l,c,r,s,t[11],16,1839030562),s=o(s,l,c,r,t[14],23,-35309556),r=o(r,s,l,c,t[1],4,-1530992060),c=o(c,r,s,l,t[4],11,1272893353),l=o(l,c,r,s,t[7],16,-155497632),s=o(s,l,c,r,t[10],23,-1094730640),r=o(r,s,l,c,t[13],4,681279174),c=o(c,r,s,l,t[0],11,-358537222),l=o(l,c,r,s,t[3],16,-722521979),s=o(s,l,c,r,t[6],23,76029189),r=o(r,s,l,c,t[9],4,-640364487),c=o(c,r,s,l,t[12],11,-421815835),l=o(l,c,r,s,t[15],16,530742520),s=o(s,l,c,r,t[2],23,-995338651),r=a(r,s,l,c,t[0],6,-198630844),c=a(c,r,s,l,t[7],10,1126891415),l=a(l,c,r,s,t[14],15,-1416354905),s=a(s,l,c,r,t[5],21,-57434055),r=a(r,s,l,c,t[12],6,1700485571),c=a(c,r,s,l,t[3],10,-1894986606),l=a(l,c,r,s,t[10],15,-1051523),s=a(s,l,c,r,t[1],21,-2054922799),r=a(r,s,l,c,t[8],6,1873313359),c=a(c,r,s,l,t[15],10,-30611744),l=a(l,c,r,s,t[6],15,-1560198380),s=a(s,l,c,r,t[13],21,1309151649),r=a(r,s,l,c,t[4],6,-145523070),c=a(c,r,s,l,t[11],10,-1120210379),l=a(l,c,r,s,t[2],15,718787259),s=a(s,l,c,r,t[9],21,-343485551),e[0]=d(r,e[0]),e[1]=d(s,e[1]),e[2]=d(l,e[2]),e[3]=d(c,e[3])}function t(e,t,i,n,o,a){return t=d(d(t,e),d(n,a)),d(t<<o|t>>>32-o,i)}function i(e,i,n,o,a,r,s){return t(i&n|~i&o,e,i,a,r,s)}function n(e,i,n,o,a,r,s){return t(i&o|n&~o,e,i,a,r,s)}function o(e,i,n,o,a,r,s){return t(i^n^o,e,i,a,r,s)}function a(e,i,n,o,a,r,s){return t(n^(i|~o),e,i,a,r,s)}function r(t){/[\x80-\xFF]/.test(t)&&(t=unescape(encodeURI(t))),txt="";var i,n=t.length,o=[1732584193,-271733879,-1732584194,271733878];for(i=64;i<=t.length;i+=64)e(o,s(t.substring(i-64,i)));t=t.substring(i-64);var a=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(i=0;i<t.length;i++)a[i>>2]|=t.charCodeAt(i)<<(i%4<<3);if(a[i>>2]|=128<<(i%4<<3),i>55)for(e(o,a),i=0;16>i;i++)a[i]=0;return a[14]=8*n,e(o,a),o}function s(e){var t,i=[];for(t=0;64>t;t+=4)i[t>>2]=e.charCodeAt(t)+(e.charCodeAt(t+1)<<8)+(e.charCodeAt(t+2)<<16)+(e.charCodeAt(t+3)<<24);return i}function l(e){for(var t="",i=0;4>i;i++)t+=u[e>>8*i+4&15]+u[e>>8*i&15];return t}function c(e){for(var t=0;t<e.length;t++)e[t]=l(e[t]);return e.join("")}function d(e,t){return e+t&4294967295}function d(e,t){var i=(65535&e)+(65535&t),n=(e>>16)+(t>>16)+(i>>16);return n<<16|65535&i}var u="0123456789abcdef".split("");md5=function(e){return c(r(e))},"5d41402abc4b2a76b9719d911017c592"!=md5("hello")}(),function(e,t,i){function n(e,i){this.wrapper="string"==typeof e?t.querySelector(e):e,this.scroller=this.wrapper.children[0],this.scrollerStyle=this.scroller.style,this.options={resizeScrollbars:!0,mouseWheelSpeed:20,snapThreshold:.334,startX:0,startY:0,scrollY:!0,directionLockThreshold:5,momentum:!0,bounce:!0,bounceTime:600,bounceEasing:"",preventDefault:!0,preventDefaultException:{tagName:/^(INPUT|TEXTAREA|BUTTON|SELECT)$/},HWCompositing:!0,useTransition:!0,useTransform:!0};for(var n in i)this.options[n]=i[n];this.translateZ=this.options.HWCompositing&&s.hasPerspective?" translateZ(0)":"",this.options.useTransition=s.hasTransition&&this.options.useTransition,this.options.useTransform=s.hasTransform&&this.options.useTransform,this.options.eventPassthrough=this.options.eventPassthrough===!0?"vertical":this.options.eventPassthrough,this.options.preventDefault=!this.options.eventPassthrough&&this.options.preventDefault,this.options.scrollY="vertical"==this.options.eventPassthrough?!1:this.options.scrollY,this.options.scrollX="horizontal"==this.options.eventPassthrough?!1:this.options.scrollX,this.options.freeScroll=this.options.freeScroll&&!this.options.eventPassthrough,this.options.directionLockThreshold=this.options.eventPassthrough?0:this.options.directionLockThreshold,this.options.bounceEasing="string"==typeof this.options.bounceEasing?s.ease[this.options.bounceEasing]||s.ease.circular:this.options.bounceEasing,this.options.resizePolling=void 0===this.options.resizePolling?60:this.options.resizePolling,this.options.tap===!0&&(this.options.tap="tap"),"scale"==this.options.shrinkScrollbars&&(this.options.useTransition=!1),this.options.invertWheelDirection=this.options.invertWheelDirection?-1:1,3==this.options.probeType&&(this.options.useTransition=!1),this.x=0,this.y=0,this.directionX=0,this.directionY=0,this._events={},this._init(),this.refresh(),this.scrollTo(this.options.startX,this.options.startY),this.enable()}function o(e,i,n){var o=t.createElement("div"),a=t.createElement("div");return n===!0&&(o.style.cssText="position:absolute;z-index:9999",a.style.cssText="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;position:absolute;background:rgba(0,0,0,0.5);border:1px solid rgba(255,255,255,0.9);border-radius:3px"),a.className="iScrollIndicator","h"==e?(n===!0&&(o.style.cssText+=";height:5px;left:2px;right:2px;bottom:0",a.style.height="100%"),o.className="iScrollHorizontalScrollbar"):(n===!0&&(o.style.cssText+=";width:5px;bottom:2px;top:2px;right:1px",a.style.width="100%"),o.className="iScrollVerticalScrollbar"),o.style.cssText+=";overflow:hidden",i||(o.style.pointerEvents="none"),o.appendChild(a),o}function a(i,n){this.wrapper="string"==typeof n.el?t.querySelector(n.el):n.el,this.wrapperStyle=this.wrapper.style,this.indicator=this.wrapper.children[0],this.indicatorStyle=this.indicator.style,this.scroller=i,this.options={listenX:!0,listenY:!0,interactive:!1,resize:!0,defaultScrollbars:!1,shrink:!1,fade:!1,speedRatioX:0,speedRatioY:0};for(var o in n)this.options[o]=n[o];this.sizeRatioX=1,this.sizeRatioY=1,this.maxPosX=0,this.maxPosY=0,this.options.interactive&&(this.options.disableTouch||(s.addEvent(this.indicator,"touchstart",this),s.addEvent(e,"touchend",this)),this.options.disablePointer||(s.addEvent(this.indicator,s.prefixPointerEvent("pointerdown"),this),s.addEvent(e,s.prefixPointerEvent("pointerup"),this)),this.options.disableMouse||(s.addEvent(this.indicator,"mousedown",this),s.addEvent(e,"mouseup",this))),this.options.fade&&(this.wrapperStyle[s.style.transform]=this.scroller.translateZ,this.wrapperStyle[s.style.transitionDuration]=s.isBadAndroid?"0.001s":"0ms",this.wrapperStyle.opacity="0")}var r=e.requestAnimationFrame||e.webkitRequestAnimationFrame||e.mozRequestAnimationFrame||e.oRequestAnimationFrame||e.msRequestAnimationFrame||function(t){e.setTimeout(t,1e3/60)},s=function(){function n(e){return r===!1?!1:""===r?e:r+e.charAt(0).toUpperCase()+e.substr(1)}var o={},a=t.createElement("div").style,r=function(){for(var e,t=["t","webkitT","MozT","msT","OT"],i=0,n=t.length;n>i;i++)if(e=t[i]+"ransform",e in a)return t[i].substr(0,t[i].length-1);return!1}();o.getTime=Date.now||function(){return(new Date).getTime()},o.extend=function(e,t){for(var i in t)e[i]=t[i]},o.addEvent=function(e,t,i,n){e.addEventListener(t,i,!!n)},o.removeEvent=function(e,t,i,n){e.removeEventListener(t,i,!!n)},o.prefixPointerEvent=function(t){return e.MSPointerEvent?"MSPointer"+t.charAt(9).toUpperCase()+t.substr(10):t},o.momentum=function(e,t,n,o,a,r){var s,l,c=e-t,d=i.abs(c)/n;return r=void 0===r?6e-4:r,s=e+d*d/(2*r)*(0>c?-1:1),l=d/r,o>s?(s=a?o-a/2.5*(d/8):o,c=i.abs(s-e),l=c/d):s>0&&(s=a?a/2.5*(d/8):0,c=i.abs(e)+s,l=c/d),{destination:i.round(s),duration:l}};var s=n("transform");o.extend(o,{hasTransform:s!==!1,hasPerspective:n("perspective")in a,hasTouch:"ontouchstart"in e,hasPointer:e.PointerEvent||e.MSPointerEvent,hasTransition:n("transition")in a});var l=e.navigator.appVersion,c=0,d=function(){if(-1!==l.indexOf("Android ")){var e=l.indexOf("Android "),t=l.substring(e+8,l.indexOf(";",e));return t=t.replace(/\./g,""),2===t.length&&(t+="0"),parseInt(t,10)}return 0};try{c=d()}catch(u){c=0}var h=411===c&&l.indexOf("UCBrowser")>-1,p=430===c&&l.indexOf("MQQBrowser")>-1,f=422>=c&&l.indexOf("MQQBrowser")>-1;return o.isBadAndroid=/Android /.test(l)&&!/Chrome\/\d/.test(l)&&440>c&&!h&&!p&&!f,o.extend(o.style={},{transform:s,transitionTimingFunction:n("transitionTimingFunction"),transitionDuration:n("transitionDuration"),transitionDelay:n("transitionDelay"),transformOrigin:n("transformOrigin")}),o.hasClass=function(e,t){var i=new RegExp("(^|\\s)"+t+"(\\s|$)");return i.test(e.className)},o.addClass=function(e,t){if(!o.hasClass(e,t)){var i=e.className.split(" ");i.push(t),e.className=i.join(" ")}},o.removeClass=function(e,t){if(o.hasClass(e,t)){var i=new RegExp("(^|\\s)"+t+"(\\s|$)","g");e.className=e.className.replace(i," ")}},o.offset=function(e){for(var t=-e.offsetLeft,i=-e.offsetTop;e=e.offsetParent;)t-=e.offsetLeft,i-=e.offsetTop;return{left:t,top:i}},o.preventDefaultException=function(e,t){for(var i in t)if(t[i].test(e[i]))return!0;return!1},o.extend(o.eventType={},{touchstart:1,touchmove:1,touchend:1,mousedown:2,mousemove:2,mouseup:2,pointerdown:3,pointermove:3,pointerup:3,MSPointerDown:3,MSPointerMove:3,MSPointerUp:3}),o.extend(o.ease={},{quadratic:{style:"cubic-bezier(0.25, 0.46, 0.45, 0.94)",fn:function(e){return e*(2-e)}},circular:{style:"cubic-bezier(0.1, 0.57, 0.1, 1)",fn:function(e){return i.sqrt(1- --e*e)}},back:{style:"cubic-bezier(0.175, 0.885, 0.32, 1.275)",fn:function(e){var t=4;return(e-=1)*e*((t+1)*e+t)+1}},bounce:{style:"",fn:function(e){return(e/=1)<1/2.75?7.5625*e*e:2/2.75>e?7.5625*(e-=1.5/2.75)*e+.75:2.5/2.75>e?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375}},elastic:{style:"",fn:function(e){var t=.22,n=.4;return 0===e?0:1==e?1:n*i.pow(2,-10*e)*i.sin(2*(e-t/4)*i.PI/t)+1}}}),o.tap=function(e,i){var n=t.createEvent("Event");n.initEvent(i,!0,!0),n.pageX=e.pageX,n.pageY=e.pageY,e.target.dispatchEvent(n)},o.click=function(e){var i,n=e.target;/(SELECT|INPUT|TEXTAREA)/i.test(n.tagName)||(i=t.createEvent("MouseEvents"),i.initMouseEvent("click",!0,!0,e.view,1,n.screenX,n.screenY,n.clientX,n.clientY,e.ctrlKey,e.altKey,e.shiftKey,e.metaKey,0,null),i._constructed=!0,n.dispatchEvent(i))},o}();n.prototype={version:"5.1.2",_init:function(){this._initEvents(),(this.options.scrollbars||this.options.indicators)&&this._initIndicators(),this.options.mouseWheel&&this._initWheel(),this.options.snap&&this._initSnap(),this.options.keyBindings&&this._initKeys()},destroy:function(){this._initEvents(!0),this._execEvent("destroy")},_transitionEnd:function(e){e.target==this.scroller&&this.isInTransition&&(this._transitionTime(),this.resetPosition(this.options.bounceTime)||(this.isInTransition=!1,this._execEvent("scrollEnd")))},_start:function(e){if(!(1!=s.eventType[e.type]&&0!==e.button||!this.enabled||this.initiated&&s.eventType[e.type]!==this.initiated)){!this.options.preventDefault||s.isBadAndroid||s.preventDefaultException(e.target,this.options.preventDefaultException)||e.preventDefault();var t,n=e.touches?e.touches[0]:e;this.initiated=s.eventType[e.type],this.moved=!1,this.distX=0,this.distY=0,this.directionX=0,this.directionY=0,this.directionLocked=0,this._transitionTime(),this.startTime=s.getTime(),this.options.useTransition&&this.isInTransition?(this.isInTransition=!1,t=this.getComputedPosition(),this._translate(i.round(t.x),i.round(t.y)),this._execEvent("scrollEnd")):!this.options.useTransition&&this.isAnimating&&(this.isAnimating=!1,this._execEvent("scrollEnd")),this.startX=this.x,this.startY=this.y,this.absStartX=this.x,this.absStartY=this.y,this.pointX=n.pageX,this.pointY=n.pageY,this._execEvent("beforeScrollStart")}},_move:function(e){if(this.enabled&&s.eventType[e.type]===this.initiated){this.options.preventDefault&&e.preventDefault();var t,n,o,a,r=e.touches?e.touches[0]:e,l=r.pageX-this.pointX,c=r.pageY-this.pointY,d=s.getTime();if(this.pointX=r.pageX,this.pointY=r.pageY,this.distX+=l,this.distY+=c,o=i.abs(this.distX),a=i.abs(this.distY),!(d-this.endTime>300&&10>o&&10>a)){if(this.directionLocked||this.options.freeScroll||(this.directionLocked=o>a+this.options.directionLockThreshold?"h":a>=o+this.options.directionLockThreshold?"v":"n"),"h"==this.directionLocked){if("vertical"==this.options.eventPassthrough)e.preventDefault();else if("horizontal"==this.options.eventPassthrough)return void(this.initiated=!1);c=0}else if("v"==this.directionLocked){if("horizontal"==this.options.eventPassthrough)e.preventDefault();else if("vertical"==this.options.eventPassthrough)return void(this.initiated=!1);l=0}l=this.hasHorizontalScroll?l:0,c=this.hasVerticalScroll?c:0,t=this.x+l,n=this.y+c,(t>0||t<this.maxScrollX)&&(t=this.options.bounce?this.x+l/3:t>0?0:this.maxScrollX),(n>0||n<this.maxScrollY)&&(n=this.options.bounce?this.y+c/3:n>0?0:this.maxScrollY),this.directionX=l>0?-1:0>l?1:0,this.directionY=c>0?-1:0>c?1:0,this.moved||this._execEvent("scrollStart"),this.moved=!0,this._translate(t,n),d-this.startTime>300&&(this.startTime=d,this.startX=this.x,this.startY=this.y,1==this.options.probeType&&this._execEvent("scroll")),this.options.probeType>1&&this._execEvent("scroll")}}},_end:function(e){if(this.enabled&&s.eventType[e.type]===this.initiated){this.options.preventDefault&&!s.preventDefaultException(e.target,this.options.preventDefaultException)&&e.preventDefault();var t,n,o=(e.changedTouches?e.changedTouches[0]:e,s.getTime()-this.startTime),a=i.round(this.x),r=i.round(this.y),l=i.abs(a-this.startX),c=i.abs(r-this.startY),d=0,u="";if(this.isInTransition=0,this.initiated=0,this.endTime=s.getTime(),!this.resetPosition(this.options.bounceTime)){if(this.scrollTo(a,r),!this.moved)return this.options.tap&&s.tap(e,this.options.tap),this.options.click&&!s.isBadAndroid&&s.click(e),void this._execEvent("scrollCancel");if(this._events.flick&&200>o&&100>l&&100>c)return void this._execEvent("flick");if(this.options.momentum&&300>o&&(t=this.hasHorizontalScroll?s.momentum(this.x,this.startX,o,this.maxScrollX,this.options.bounce?this.wrapperWidth:0,this.options.deceleration):{destination:a,duration:0},n=this.hasVerticalScroll?s.momentum(this.y,this.startY,o,this.maxScrollY,this.options.bounce?this.wrapperHeight:0,this.options.deceleration):{destination:r,duration:0},a=t.destination,r=n.destination,d=i.max(t.duration,n.duration),this.isInTransition=1),this.options.snap){var h=this._nearestSnap(a,r);this.currentPage=h,d=this.options.snapSpeed||i.max(i.max(i.min(i.abs(a-h.x),1e3),i.min(i.abs(r-h.y),1e3)),300),a=h.x,r=h.y,this.directionX=0,this.directionY=0,u=this.options.bounceEasing}return a!=this.x||r!=this.y?((a>0||a<this.maxScrollX||r>0||r<this.maxScrollY)&&(u=s.ease.quadratic),void this.scrollTo(a,r,d,u)):void this._execEvent("scrollEnd")}}},_resize:function(){var e=this;clearTimeout(this.resizeTimeout),this.resizeTimeout=setTimeout(function(){e.refresh()},this.options.resizePolling)},resetPosition:function(e){var t=this.x,i=this.y;return e=e||0,!this.hasHorizontalScroll||this.x>0?t=0:this.x<this.maxScrollX&&(t=this.maxScrollX),!this.hasVerticalScroll||this.y>0?i=0:this.y<this.maxScrollY&&(i=this.maxScrollY),t==this.x&&i==this.y?!1:(this.scrollTo(t,i,e,this.options.bounceEasing),!0)},disable:function(){this.enabled=!1},enable:function(){this.enabled=!0},refresh:function(){this.wrapper.offsetHeight;this.wrapperWidth=this.wrapper.clientWidth,this.wrapperHeight=this.wrapper.clientHeight,this.scrollerWidth=this.scroller.offsetWidth,this.scrollerHeight=this.scroller.offsetHeight,this.maxScrollX=this.wrapperWidth-this.scrollerWidth,this.maxScrollY=this.wrapperHeight-this.scrollerHeight,this.hasHorizontalScroll=this.options.scrollX&&this.maxScrollX<0,this.hasVerticalScroll=this.options.scrollY&&this.maxScrollY<0,this.hasHorizontalScroll||(this.maxScrollX=0,this.scrollerWidth=this.wrapperWidth),this.hasVerticalScroll||(this.maxScrollY=0,this.scrollerHeight=this.wrapperHeight),this.endTime=0,this.directionX=0,this.directionY=0,this.wrapperOffset=s.offset(this.wrapper),this._execEvent("refresh"),this.resetPosition()},on:function(e,t){this._events[e]||(this._events[e]=[]),this._events[e].push(t)},off:function(e,t){if(this._events[e]){var i=this._events[e].indexOf(t);i>-1&&this._events[e].splice(i,1)}},_execEvent:function(e){if(this._events[e]){var t=0,i=this._events[e].length;if(i)for(;i>t;t++)this._events[e][t].apply(this,[].slice.call(arguments,1))}},scrollBy:function(e,t,i,n){e=this.x+e,t=this.y+t,i=i||0,this.scrollTo(e,t,i,n)},scrollTo:function(e,t,i,n){n=n||s.ease.circular,this.isInTransition=this.options.useTransition&&i>0,!i||this.options.useTransition&&n.style?(this._transitionTimingFunction(n.style),this._transitionTime(i),this._translate(e,t)):this._animate(e,t,i,n.fn)},scrollToElement:function(e,t,n,o,a){if(e=e.nodeType?e:this.scroller.querySelector(e)){var r=s.offset(e);r.left-=this.wrapperOffset.left,r.top-=this.wrapperOffset.top,n===!0&&(n=i.round(e.offsetWidth/2-this.wrapper.offsetWidth/2)),o===!0&&(o=i.round(e.offsetHeight/2-this.wrapper.offsetHeight/2)),r.left-=n||0,r.top-=o||0,r.left=r.left>0?0:r.left<this.maxScrollX?this.maxScrollX:r.left,r.top=r.top>0?0:r.top<this.maxScrollY?this.maxScrollY:r.top,t=void 0===t||null===t||"auto"===t?i.max(i.abs(this.x-r.left),i.abs(this.y-r.top)):t,this.scrollTo(r.left,r.top,t,a)}},_transitionTime:function(e){if(e=e||0,this.scrollerStyle[s.style.transitionDuration]=e+"ms",!e&&s.isBadAndroid&&(this.scrollerStyle[s.style.transitionDuration]="0.001s"),this.indicators)for(var t=this.indicators.length;t--;)this.indicators[t].transitionTime(e)},_transitionTimingFunction:function(e){if(this.scrollerStyle[s.style.transitionTimingFunction]=e,this.indicators)for(var t=this.indicators.length;t--;)this.indicators[t].transitionTimingFunction(e)},_translate:function(e,t){if(this.options.useTransform?this.scrollerStyle[s.style.transform]="translate("+e+"px,"+t+"px)"+this.translateZ:(e=i.round(e),t=i.round(t),this.scrollerStyle.left=e+"px",this.scrollerStyle.top=t+"px"),this.x=e,this.y=t,this.indicators)for(var n=this.indicators.length;n--;)this.indicators[n].updatePosition()},_initEvents:function(t){var i=t?s.removeEvent:s.addEvent,n=this.options.bindToWrapper?this.wrapper:e;i(e,"orientationchange",this),i(e,"resize",this),this.options.click&&!s.isBadAndroid&&i(this.wrapper,"click",this,!0),this.options.disableMouse||(i(this.wrapper,"mousedown",this),i(n,"mousemove",this),i(n,"mousecancel",this),i(n,"mouseup",this)),s.hasPointer&&!this.options.disablePointer&&(i(this.wrapper,s.prefixPointerEvent("pointerdown"),this),i(n,s.prefixPointerEvent("pointermove"),this),i(n,s.prefixPointerEvent("pointercancel"),this),i(n,s.prefixPointerEvent("pointerup"),this)),s.hasTouch&&!this.options.disableTouch&&(i(this.wrapper,"touchstart",this),i(n,"touchmove",this),i(n,"touchcancel",this),i(n,"touchend",this)),i(this.scroller,"transitionend",this),i(this.scroller,"webkitTransitionEnd",this),i(this.scroller,"oTransitionEnd",this),i(this.scroller,"MSTransitionEnd",this)},getComputedPosition:function(){var t,i,n=e.getComputedStyle(this.scroller,null);return this.options.useTransform?(n=n[s.style.transform].split(")")[0].split(", "),t=+(n[12]||n[4]),i=+(n[13]||n[5])):(t=+n.left.replace(/[^-\d.]/g,""),i=+n.top.replace(/[^-\d.]/g,"")),{x:t,y:i}},_initIndicators:function(){function e(e){for(var t=s.indicators.length;t--;)e.call(s.indicators[t])}var t,i=this.options.interactiveScrollbars,n="string"!=typeof this.options.scrollbars,r=[],s=this;this.indicators=[],this.options.scrollbars&&(this.options.scrollY&&(t={el:o("v",i,this.options.scrollbars),interactive:i,defaultScrollbars:!0,customStyle:n,resize:this.options.resizeScrollbars,shrink:this.options.shrinkScrollbars,fade:this.options.fadeScrollbars,listenX:!1},this.wrapper.appendChild(t.el),r.push(t)),this.options.scrollX&&(t={el:o("h",i,this.options.scrollbars),interactive:i,defaultScrollbars:!0,customStyle:n,resize:this.options.resizeScrollbars,shrink:this.options.shrinkScrollbars,fade:this.options.fadeScrollbars,listenY:!1},this.wrapper.appendChild(t.el),r.push(t))),this.options.indicators&&(r=r.concat(this.options.indicators));for(var l=r.length;l--;)this.indicators.push(new a(this,r[l]));this.options.fadeScrollbars&&(this.on("scrollEnd",function(){e(function(){this.fade()})}),this.on("scrollCancel",function(){e(function(){this.fade()})}),this.on("scrollStart",function(){e(function(){this.fade(1)})}),this.on("beforeScrollStart",function(){e(function(){this.fade(1,!0)})})),this.on("refresh",function(){e(function(){this.refresh()})}),this.on("destroy",function(){e(function(){this.destroy()}),delete this.indicators})},_initWheel:function(){s.addEvent(this.wrapper,"wheel",this),s.addEvent(this.wrapper,"mousewheel",this),s.addEvent(this.wrapper,"DOMMouseScroll",this),this.on("destroy",function(){s.removeEvent(this.wrapper,"wheel",this),s.removeEvent(this.wrapper,"mousewheel",this),s.removeEvent(this.wrapper,"DOMMouseScroll",this)})},_wheel:function(e){if(this.enabled){e.preventDefault(),e.stopPropagation();var t,n,o,a,r=this;if(void 0===this.wheelTimeout&&r._execEvent("scrollStart"),clearTimeout(this.wheelTimeout),this.wheelTimeout=setTimeout(function(){r._execEvent("scrollEnd"),r.wheelTimeout=void 0},400),"deltaX"in e)t=-e.deltaX,n=-e.deltaY;else if("wheelDeltaX"in e)t=e.wheelDeltaX/120*this.options.mouseWheelSpeed,n=e.wheelDeltaY/120*this.options.mouseWheelSpeed;else if("wheelDelta"in e)t=n=e.wheelDelta/120*this.options.mouseWheelSpeed;else{if(!("detail"in e))return;t=n=-e.detail/3*this.options.mouseWheelSpeed}if(t*=this.options.invertWheelDirection,n*=this.options.invertWheelDirection,this.hasVerticalScroll||(t=n,n=0),this.options.snap)return o=this.currentPage.pageX,a=this.currentPage.pageY,t>0?o--:0>t&&o++,n>0?a--:0>n&&a++,void this.goToPage(o,a);o=this.x+i.round(this.hasHorizontalScroll?t:0),a=this.y+i.round(this.hasVerticalScroll?n:0),o>0?o=0:o<this.maxScrollX&&(o=this.maxScrollX),a>0?a=0:a<this.maxScrollY&&(a=this.maxScrollY),this.scrollTo(o,a,0),this.options.probeType>1&&this._execEvent("scroll")}},_initSnap:function(){this.currentPage={},"string"==typeof this.options.snap&&(this.options.snap=this.scroller.querySelectorAll(this.options.snap)),this.on("refresh",function(){var e,t,n,o,a,r,s=0,l=0,c=0,d=this.options.snapStepX||this.wrapperWidth,u=this.options.snapStepY||this.wrapperHeight;if(this.pages=[],this.wrapperWidth&&this.wrapperHeight&&this.scrollerWidth&&this.scrollerHeight){if(this.options.snap===!0)for(n=i.round(d/2),o=i.round(u/2);c>-this.scrollerWidth;){for(this.pages[s]=[],e=0,a=0;a>-this.scrollerHeight;)this.pages[s][e]={x:i.max(c,this.maxScrollX),y:i.max(a,this.maxScrollY),width:d,height:u,cx:c-n,cy:a-o},a-=u,e++;c-=d,s++}else for(r=this.options.snap,e=r.length,t=-1;e>s;s++)(0===s||r[s].offsetLeft<=r[s-1].offsetLeft)&&(l=0,t++),this.pages[l]||(this.pages[l]=[]),c=i.max(-r[s].offsetLeft,this.maxScrollX),a=i.max(-r[s].offsetTop,this.maxScrollY),n=c-i.round(r[s].offsetWidth/2),o=a-i.round(r[s].offsetHeight/2),this.pages[l][t]={x:c,y:a,width:r[s].offsetWidth,height:r[s].offsetHeight,cx:n,cy:o},c>this.maxScrollX&&l++;this.goToPage(this.currentPage.pageX||0,this.currentPage.pageY||0,0),this.options.snapThreshold%1===0?(this.snapThresholdX=this.options.snapThreshold,this.snapThresholdY=this.options.snapThreshold):(this.snapThresholdX=i.round(this.pages[this.currentPage.pageX][this.currentPage.pageY].width*this.options.snapThreshold),this.snapThresholdY=i.round(this.pages[this.currentPage.pageX][this.currentPage.pageY].height*this.options.snapThreshold))}}),this.on("flick",function(){var e=this.options.snapSpeed||i.max(i.max(i.min(i.abs(this.x-this.startX),1e3),i.min(i.abs(this.y-this.startY),1e3)),300);this.goToPage(this.currentPage.pageX+this.directionX,this.currentPage.pageY+this.directionY,e)})},_nearestSnap:function(e,t){if(!this.pages.length)return{x:0,y:0,pageX:0,pageY:0};var n=0,o=this.pages.length,a=0;if(i.abs(e-this.absStartX)<this.snapThresholdX&&i.abs(t-this.absStartY)<this.snapThresholdY)return this.currentPage;for(e>0?e=0:e<this.maxScrollX&&(e=this.maxScrollX),t>0?t=0:t<this.maxScrollY&&(t=this.maxScrollY);o>n;n++)if(e>=this.pages[n][0].cx){e=this.pages[n][0].x;break}for(o=this.pages[n].length;o>a;a++)if(t>=this.pages[0][a].cy){t=this.pages[0][a].y;break}return n==this.currentPage.pageX&&(n+=this.directionX,0>n?n=0:n>=this.pages.length&&(n=this.pages.length-1),e=this.pages[n][0].x),a==this.currentPage.pageY&&(a+=this.directionY,0>a?a=0:a>=this.pages[0].length&&(a=this.pages[0].length-1),t=this.pages[0][a].y),{x:e,y:t,pageX:n,pageY:a}},goToPage:function(e,t,n,o){o=o||this.options.bounceEasing,e>=this.pages.length?e=this.pages.length-1:0>e&&(e=0),t>=this.pages[e].length?t=this.pages[e].length-1:0>t&&(t=0);var a=this.pages[e][t].x,r=this.pages[e][t].y;n=void 0===n?this.options.snapSpeed||i.max(i.max(i.min(i.abs(a-this.x),1e3),i.min(i.abs(r-this.y),1e3)),300):n,this.currentPage={x:a,y:r,pageX:e,pageY:t},this.scrollTo(a,r,n,o)},next:function(e,t){var i=this.currentPage.pageX,n=this.currentPage.pageY;i++,i>=this.pages.length&&this.hasVerticalScroll&&(i=0,n++),this.goToPage(i,n,e,t)},prev:function(e,t){var i=this.currentPage.pageX,n=this.currentPage.pageY;i--,0>i&&this.hasVerticalScroll&&(i=0,n--),this.goToPage(i,n,e,t)},_initKeys:function(){var t,i={pageUp:33,pageDown:34,end:35,home:36,left:37,up:38,right:39,down:40};if("object"==typeof this.options.keyBindings)for(t in this.options.keyBindings)"string"==typeof this.options.keyBindings[t]&&(this.options.keyBindings[t]=this.options.keyBindings[t].toUpperCase().charCodeAt(0));else this.options.keyBindings={};for(t in i)this.options.keyBindings[t]=this.options.keyBindings[t]||i[t];s.addEvent(e,"keydown",this),this.on("destroy",function(){s.removeEvent(e,"keydown",this)})},_key:function(e){if(this.enabled){var t,n=this.options.snap,o=n?this.currentPage.pageX:this.x,a=n?this.currentPage.pageY:this.y,r=s.getTime(),l=this.keyTime||0,c=.25;switch(this.options.useTransition&&this.isInTransition&&(t=this.getComputedPosition(),this._translate(i.round(t.x),i.round(t.y)),this.isInTransition=!1),this.keyAcceleration=200>r-l?i.min(this.keyAcceleration+c,50):0,e.keyCode){case this.options.keyBindings.pageUp:this.hasHorizontalScroll&&!this.hasVerticalScroll?o+=n?1:this.wrapperWidth:a+=n?1:this.wrapperHeight;break;case this.options.keyBindings.pageDown:this.hasHorizontalScroll&&!this.hasVerticalScroll?o-=n?1:this.wrapperWidth:a-=n?1:this.wrapperHeight;break;case this.options.keyBindings.end:o=n?this.pages.length-1:this.maxScrollX,a=n?this.pages[0].length-1:this.maxScrollY;break;case this.options.keyBindings.home:o=0,a=0;break;case this.options.keyBindings.left:o+=n?-1:5+this.keyAcceleration>>0;break;case this.options.keyBindings.up:a+=n?1:5+this.keyAcceleration>>0;break;case this.options.keyBindings.right:o-=n?-1:5+this.keyAcceleration>>0;break;case this.options.keyBindings.down:a-=n?1:5+this.keyAcceleration>>0;break;default:return}if(n)return void this.goToPage(o,a);o>0?(o=0,this.keyAcceleration=0):o<this.maxScrollX&&(o=this.maxScrollX,this.keyAcceleration=0),a>0?(a=0,this.keyAcceleration=0):a<this.maxScrollY&&(a=this.maxScrollY,this.keyAcceleration=0),this.scrollTo(o,a,0),this.keyTime=r}},_animate:function(e,t,i,n){function o(){var h,p,f,m=s.getTime();return m>=u?(a.isAnimating=!1,a._translate(e,t),void(a.resetPosition(a.options.bounceTime)||a._execEvent("scrollEnd"))):(m=(m-d)/i,f=n(m),h=(e-l)*f+l,p=(t-c)*f+c,a._translate(h,p),a.isAnimating&&r(o),void(3==a.options.probeType&&a._execEvent("scroll")))}var a=this,l=this.x,c=this.y,d=s.getTime(),u=d+i;this.isAnimating=!0,o()},handleEvent:function(e){switch(e.type){case"touchstart":case"pointerdown":case"MSPointerDown":case"mousedown":this._start(e);break;case"touchmove":case"pointermove":case"MSPointerMove":case"mousemove":this._move(e);break;case"touchend":case"pointerup":case"MSPointerUp":case"mouseup":case"touchcancel":case"pointercancel":case"MSPointerCancel":case"mousecancel":this._end(e);break;case"orientationchange":case"resize":this._resize();break;case"transitionend":case"webkitTransitionEnd":case"oTransitionEnd":case"MSTransitionEnd":this._transitionEnd(e);break;case"wheel":case"DOMMouseScroll":case"mousewheel":this._wheel(e);break;case"keydown":this._key(e);break;case"click":e._constructed||(e.preventDefault(),e.stopPropagation())}}},a.prototype={handleEvent:function(e){switch(e.type){case"touchstart":case"pointerdown":case"MSPointerDown":case"mousedown":this._start(e);break;case"touchmove":case"pointermove":case"MSPointerMove":case"mousemove":this._move(e);break;case"touchend":case"pointerup":case"MSPointerUp":case"mouseup":case"touchcancel":case"pointercancel":case"MSPointerCancel":case"mousecancel":this._end(e)}},destroy:function(){this.options.interactive&&(s.removeEvent(this.indicator,"touchstart",this),s.removeEvent(this.indicator,s.prefixPointerEvent("pointerdown"),this),s.removeEvent(this.indicator,"mousedown",this),s.removeEvent(e,"touchmove",this),s.removeEvent(e,s.prefixPointerEvent("pointermove"),this),s.removeEvent(e,"mousemove",this),s.removeEvent(e,"touchend",this),s.removeEvent(e,s.prefixPointerEvent("pointerup"),this),s.removeEvent(e,"mouseup",this)),this.options.defaultScrollbars&&this.wrapper.parentNode.removeChild(this.wrapper)},_start:function(t){var i=t.touches?t.touches[0]:t;t.preventDefault(),t.stopPropagation(),this.transitionTime(),this.initiated=!0,this.moved=!1,this.lastPointX=i.pageX,this.lastPointY=i.pageY,this.startTime=s.getTime(),this.options.disableTouch||s.addEvent(e,"touchmove",this),this.options.disablePointer||s.addEvent(e,s.prefixPointerEvent("pointermove"),this),this.options.disableMouse||s.addEvent(e,"mousemove",this),this.scroller._execEvent("beforeScrollStart")},_move:function(e){var t,i,n,o,a=e.touches?e.touches[0]:e,r=s.getTime();this.moved||this.scroller._execEvent("scrollStart"),this.moved=!0,t=a.pageX-this.lastPointX,this.lastPointX=a.pageX,i=a.pageY-this.lastPointY,this.lastPointY=a.pageY,n=this.x+t,o=this.y+i,this._pos(n,o),1==this.scroller.options.probeType&&r-this.startTime>300?(this.startTime=r,this.scroller._execEvent("scroll")):this.scroller.options.probeType>1&&this.scroller._execEvent("scroll"),e.preventDefault(),e.stopPropagation()},_end:function(t){if(this.initiated){if(this.initiated=!1,t.preventDefault(),t.stopPropagation(),s.removeEvent(e,"touchmove",this),s.removeEvent(e,s.prefixPointerEvent("pointermove"),this),s.removeEvent(e,"mousemove",this),this.scroller.options.snap){var n=this.scroller._nearestSnap(this.scroller.x,this.scroller.y),o=this.options.snapSpeed||i.max(i.max(i.min(i.abs(this.scroller.x-n.x),1e3),i.min(i.abs(this.scroller.y-n.y),1e3)),300);(this.scroller.x!=n.x||this.scroller.y!=n.y)&&(this.scroller.directionX=0,this.scroller.directionY=0,this.scroller.currentPage=n,this.scroller.scrollTo(n.x,n.y,o,this.scroller.options.bounceEasing))}this.moved&&this.scroller._execEvent("scrollEnd")}},transitionTime:function(e){e=e||0,this.indicatorStyle[s.style.transitionDuration]=e+"ms",!e&&s.isBadAndroid&&(this.indicatorStyle[s.style.transitionDuration]="0.001s")},transitionTimingFunction:function(e){this.indicatorStyle[s.style.transitionTimingFunction]=e},refresh:function(){this.transitionTime(),this.indicatorStyle.display=this.options.listenX&&!this.options.listenY?this.scroller.hasHorizontalScroll?"block":"none":this.options.listenY&&!this.options.listenX?this.scroller.hasVerticalScroll?"block":"none":this.scroller.hasHorizontalScroll||this.scroller.hasVerticalScroll?"block":"none",this.scroller.hasHorizontalScroll&&this.scroller.hasVerticalScroll?(s.addClass(this.wrapper,"iScrollBothScrollbars"),s.removeClass(this.wrapper,"iScrollLoneScrollbar"),this.options.defaultScrollbars&&this.options.customStyle&&(this.options.listenX?this.wrapper.style.right="8px":this.wrapper.style.bottom="8px")):(s.removeClass(this.wrapper,"iScrollBothScrollbars"),s.addClass(this.wrapper,"iScrollLoneScrollbar"),this.options.defaultScrollbars&&this.options.customStyle&&(this.options.listenX?this.wrapper.style.right="2px":this.wrapper.style.bottom="2px"));
this.wrapper.offsetHeight;this.options.listenX&&(this.wrapperWidth=this.wrapper.clientWidth,this.options.resize?(this.indicatorWidth=i.max(i.round(this.wrapperWidth*this.wrapperWidth/(this.scroller.scrollerWidth||this.wrapperWidth||1)),8),this.indicatorStyle.width=this.indicatorWidth+"px"):this.indicatorWidth=this.indicator.clientWidth,this.maxPosX=this.wrapperWidth-this.indicatorWidth,"clip"==this.options.shrink?(this.minBoundaryX=-this.indicatorWidth+8,this.maxBoundaryX=this.wrapperWidth-8):(this.minBoundaryX=0,this.maxBoundaryX=this.maxPosX),this.sizeRatioX=this.options.speedRatioX||this.scroller.maxScrollX&&this.maxPosX/this.scroller.maxScrollX),this.options.listenY&&(this.wrapperHeight=this.wrapper.clientHeight,this.options.resize?(this.indicatorHeight=i.max(i.round(this.wrapperHeight*this.wrapperHeight/(this.scroller.scrollerHeight||this.wrapperHeight||1)),8),this.indicatorStyle.height=this.indicatorHeight+"px"):this.indicatorHeight=this.indicator.clientHeight,this.maxPosY=this.wrapperHeight-this.indicatorHeight,"clip"==this.options.shrink?(this.minBoundaryY=-this.indicatorHeight+8,this.maxBoundaryY=this.wrapperHeight-8):(this.minBoundaryY=0,this.maxBoundaryY=this.maxPosY),this.maxPosY=this.wrapperHeight-this.indicatorHeight,this.sizeRatioY=this.options.speedRatioY||this.scroller.maxScrollY&&this.maxPosY/this.scroller.maxScrollY),this.updatePosition()},updatePosition:function(){var e=this.options.listenX&&i.round(this.sizeRatioX*this.scroller.x)||0,t=this.options.listenY&&i.round(this.sizeRatioY*this.scroller.y)||0;this.options.ignoreBoundaries||(e<this.minBoundaryX?("scale"==this.options.shrink&&(this.width=i.max(this.indicatorWidth+e,8),this.indicatorStyle.width=this.width+"px"),e=this.minBoundaryX):e>this.maxBoundaryX?"scale"==this.options.shrink?(this.width=i.max(this.indicatorWidth-(e-this.maxPosX),8),this.indicatorStyle.width=this.width+"px",e=this.maxPosX+this.indicatorWidth-this.width):e=this.maxBoundaryX:"scale"==this.options.shrink&&this.width!=this.indicatorWidth&&(this.width=this.indicatorWidth,this.indicatorStyle.width=this.width+"px"),t<this.minBoundaryY?("scale"==this.options.shrink&&(this.height=i.max(this.indicatorHeight+3*t,8),this.indicatorStyle.height=this.height+"px"),t=this.minBoundaryY):t>this.maxBoundaryY?"scale"==this.options.shrink?(this.height=i.max(this.indicatorHeight-3*(t-this.maxPosY),8),this.indicatorStyle.height=this.height+"px",t=this.maxPosY+this.indicatorHeight-this.height):t=this.maxBoundaryY:"scale"==this.options.shrink&&this.height!=this.indicatorHeight&&(this.height=this.indicatorHeight,this.indicatorStyle.height=this.height+"px")),this.x=e,this.y=t,this.scroller.options.useTransform?this.indicatorStyle[s.style.transform]="translate("+e+"px,"+t+"px)"+this.scroller.translateZ:(this.indicatorStyle.left=e+"px",this.indicatorStyle.top=t+"px")},_pos:function(e,t){0>e?e=0:e>this.maxPosX&&(e=this.maxPosX),0>t?t=0:t>this.maxPosY&&(t=this.maxPosY),e=this.options.listenX?i.round(e/this.sizeRatioX):this.scroller.x,t=this.options.listenY?i.round(t/this.sizeRatioY):this.scroller.y,this.scroller.scrollTo(e,t)},fade:function(e,t){if(!t||this.visible){clearTimeout(this.fadeTimeout),this.fadeTimeout=null;var i=e?250:500,n=e?0:300;e=e?"1":"0",this.wrapperStyle[s.style.transitionDuration]=i+"ms",this.fadeTimeout=setTimeout(function(e){this.wrapperStyle.opacity=e,this.visible=+e}.bind(this,e),n)}}},n.utils=s,"undefined"!=typeof module&&module.exports?module.exports=n:e.IScroll=n}(window,document,Math),function(e){var t,i=function(){function t(t,i){var n={duration:300,active:"active",transition:"transition"};this.options=e.extend({},n,i),this.timer={show:-1,hide:-1},this.elem=t}return t.prototype={show:function(){clearTimeout(this.timer.show),clearTimeout(this.timer.hide),this.elem.addClass(this.options.active),this.timer.show=setTimeout(function(){this.elem.addClass(this.options.transition)}.bind(this),20)},hide:function(){clearTimeout(this.timer.show),clearTimeout(this.timer.hide),this.elem.removeClass(this.options.transition),this.timer.hide=setTimeout(function(){this.elem.removeClass(this.options.active)}.bind(this),this.options.duration)}},t}();e.pgwModal=function(n){var o={},a={close:!0,maxWidth:500,popup:!1,duration:0,confirm:!1,confirmButtons:[{name:"确定",style:"btn",fn:function(){}},{name:"取消",style:"btn",fn:function(e){e()}}],afterClose:function(){},afterRender:function(){},xClass:"pgwmodal",loading:"Loading in progress...",error:"An error has occured. Please try again in a few moments."};if("undefined"!=typeof window.pgwModalObject&&(o=window.pgwModalObject),"object"==typeof n&&!n.pushContent){if(!n.url&&!n.target&&!n.content)throw new Error('PgwModal - There is no content to display, please provide a config parameter : "url", "target" or "content"');o.config={},o.config=e.extend({},a,n),window.pgwModalObject=o}var r=function(){var t=o.config.xClass;if(o.config.popup&&(t="popup"),o.config.confirm&&(t="confirm"),o.config.customClass)var i=o.config.customClass;var n='<div id="pgwModalWrapper" class="'+t+" "+i+'"></div><div id="pgwModal" class="'+t+" "+i+'"><div class="pm-container"><div class="pm-body"><a href="javascript:void(0)" class="pm-close" onclick="$.pgwModal(\'close\')"></a><div class="pm-title"></div><div class="pm-content cntr"></div></div></div></div>';return e("body").append(n),e(document).trigger("PgwModal::Create"),!0},s=function(){e("#pgwModal .pm-title, #pgwModal .pm-content").html("");var t=o.config.xClass;return o.config.popup&&(t="popup"),o.config.confirm&&(t="confirm"),e("#pgwModalWrapper, #pgwModal").attr("class",t),!0},l=function(){return angular.element("body").injector().invoke(function(t){var i=angular.element(e("#pgwModal .pm-content")).scope();t(e("#pgwModal .pm-content"))(i),i.$digest()}),!0},c=function(t){if(e("#pgwModal .pm-content").html(t),o.config.angular&&l(),o.config.confirm){var i=e("<p>");i.addClass("btns"),e.each(o.config.confirmButtons,function(t,n){var o=e("<a>");o.attr({href:n.link?n.link:"javascript:;","class":n.style||"btn"}),o.text(n.name),o.on("click",function(){n.fn.call(this,f)}),i.append(o)}),e("#pgwModal .pm-content").append(i)}return e(document).trigger("PgwModal::PushContent"),o.config.afterRender(),!0},d=function(){var t=e(window).height(),i=e("#pgwModal .pm-body")[0].offsetHeight,n=Math.round((t-i)/3);return 0>=n&&(n=10),e("#pgwModal .pm-body").css("margin-top",n),!0},u=function(){return o.config.modalData},h=function(){return e("body").hasClass("pgwModal")},p=function(){e("#pgwModal, #pgwModalWrapper").hide(),e("body").removeClass("pgwModal"),s();try{delete window.pgwModalObject}catch(t){window.pgwModalObject=void 0}return e(document).trigger("PgwModal::Close"),!0},f=function(){e("#pgwModal, #pgwModalWrapper").remove(),e("body").removeClass("pgwModal")},m=function(){if(0==e("#pgwModal").length?(r(),t=new i(e("#pgwModal .pm-body"))):(s(),t||(t=new i(e("#pgwModal .pm-body")))),t.show(),o.config.close?e("#pgwModal .pm-close").show():e("#pgwModal .pm-close").hide(),o.config.title&&e("#pgwModal .pm-title").text(o.config.title),o.config.maxWidth&&(o.config.popup&&(o.config.maxWidth="70%"),o.config.confirm&&(o.config.maxWidth="85%"),e("#pgwModal .pm-body").css("max-width",o.config.maxWidth)),o.config.url){o.config.loading&&e("#pgwModal .pm-content").html(o.config.loading);var a={url:n.url,success:function(e){c(e)},error:function(){e("#pgwModal .pm-content").html(o.config.error)}};o.config.ajaxOptions&&(a=e.extend({},a,o.config.ajaxOptions)),e.ajax(a)}else o.config.target?c(e(o.config.target).html()):o.config.content&&c(o.config.content);return e("#pgwModal, #pgwModalWrapper").show(),e("body").addClass("pgwModal"),e(document).trigger("PgwModal::Open"),d(),clearTimeout(o.timer),clearTimeout(o.timer+1),o.config.duration>0&&(o.timer=setTimeout(function(){t.hide()},o.config.duration),setTimeout(function(){f(),"function"==typeof o.config.afterClose&&o.config.afterClose()},o.config.duration+300)),!0};return"string"==typeof n&&"close"==n?p():"string"==typeof n&&"reposition"==n?d():"string"==typeof n&&"getData"==n?u():"string"==typeof n&&"isOpen"==n?h():"object"==typeof n&&n.pushContent?c(n.pushContent):"object"==typeof n?m():void 0}}(window.Zepto||window.jQuery);var Swiper=function(e,t){"use strict";function i(e,t){return document.querySelectorAll?(t||document).querySelectorAll(e):jQuery(e,t)}function n(e){return"[object Array]"===Object.prototype.toString.apply(e)?!0:!1}function o(){var e=I-E;return t.freeMode&&(e=I-E),t.slidesPerView>k.slides.length&&!t.centeredSlides&&(e=0),0>e&&(e=0),e}function a(){function e(e){var i=new Image;i.onload=function(){"undefined"!=typeof k&&null!==k&&(void 0!==k.imagesLoaded&&k.imagesLoaded++,k.imagesLoaded===k.imagesToLoad.length&&(k.reInit(),t.onImagesReady&&k.fireCallback(t.onImagesReady,k)))},i.src=e}var n=k.h.addEventListener,o="wrapper"===t.eventTarget?k.wrapper:k.container;if(k.browser.ie10||k.browser.ie11?(n(o,k.touchEvents.touchStart,m),n(document,k.touchEvents.touchMove,g),n(document,k.touchEvents.touchEnd,v)):(k.support.touch&&(n(o,"touchstart",m),n(o,"touchmove",g),n(o,"touchend",v)),t.simulateTouch&&(n(o,"mousedown",m),n(document,"mousemove",g),n(document,"mouseup",v))),t.autoResize&&n(window,"resize",k.resizeFix),r(),k._wheelEvent=!1,t.mousewheelControl){if(void 0!==document.onmousewheel&&(k._wheelEvent="mousewheel"),!k._wheelEvent)try{new WheelEvent("wheel"),k._wheelEvent="wheel"}catch(a){}k._wheelEvent||(k._wheelEvent="DOMMouseScroll"),k._wheelEvent&&n(k.container,k._wheelEvent,c)}if(t.keyboardControl&&n(document,"keydown",l),t.updateOnImagesReady){k.imagesToLoad=i("img",k.container);for(var s=0;s<k.imagesToLoad.length;s++)e(k.imagesToLoad[s].getAttribute("src"))}}function r(){var e,n=k.h.addEventListener;if(t.preventLinks){var o=i("a",k.container);for(e=0;e<o.length;e++)n(o[e],"click",p)}if(t.releaseFormElements){var a=i("input, textarea, select",k.container);for(e=0;e<a.length;e++)n(a[e],k.touchEvents.touchStart,f,!0)}if(t.onSlideClick)for(e=0;e<k.slides.length;e++)n(k.slides[e],"click",d);if(t.onSlideTouch)for(e=0;e<k.slides.length;e++)n(k.slides[e],k.touchEvents.touchStart,u)}function s(){var e,n=k.h.removeEventListener;if(t.onSlideClick)for(e=0;e<k.slides.length;e++)n(k.slides[e],"click",d);if(t.onSlideTouch)for(e=0;e<k.slides.length;e++)n(k.slides[e],k.touchEvents.touchStart,u);if(t.releaseFormElements){var o=i("input, textarea, select",k.container);for(e=0;e<o.length;e++)n(o[e],k.touchEvents.touchStart,f,!0)}if(t.preventLinks){var a=i("a",k.container);for(e=0;e<a.length;e++)n(a[e],"click",p)}}function l(e){var t=e.keyCode||e.charCode;if(!(e.shiftKey||e.altKey||e.ctrlKey||e.metaKey)){if(37===t||39===t||38===t||40===t){for(var i=!1,n=k.h.getOffset(k.container),o=k.h.windowScroll().left,a=k.h.windowScroll().top,r=k.h.windowWidth(),s=k.h.windowHeight(),l=[[n.left,n.top],[n.left+k.width,n.top],[n.left,n.top+k.height],[n.left+k.width,n.top+k.height]],c=0;c<l.length;c++){var d=l[c];d[0]>=o&&d[0]<=o+r&&d[1]>=a&&d[1]<=a+s&&(i=!0)}if(!i)return}A?((37===t||39===t)&&(e.preventDefault?e.preventDefault():e.returnValue=!1),39===t&&k.swipeNext(),37===t&&k.swipePrev()):((38===t||40===t)&&(e.preventDefault?e.preventDefault():e.returnValue=!1),40===t&&k.swipeNext(),38===t&&k.swipePrev())}}function c(e){var i=k._wheelEvent,n=0;if(e.detail)n=-e.detail;else if("mousewheel"===i)if(t.mousewheelControlForceToAxis)if(A){if(!(Math.abs(e.wheelDeltaX)>Math.abs(e.wheelDeltaY)))return;n=e.wheelDeltaX}else{if(!(Math.abs(e.wheelDeltaY)>Math.abs(e.wheelDeltaX)))return;n=e.wheelDeltaY}else n=e.wheelDelta;else if("DOMMouseScroll"===i)n=-e.detail;else if("wheel"===i)if(t.mousewheelControlForceToAxis)if(A){if(!(Math.abs(e.deltaX)>Math.abs(e.deltaY)))return;n=-e.deltaX}else{if(!(Math.abs(e.deltaY)>Math.abs(e.deltaX)))return;n=-e.deltaY}else n=Math.abs(e.deltaX)>Math.abs(e.deltaY)?-e.deltaX:-e.deltaY;if(t.freeMode){var a=k.getWrapperTranslate()+n;if(a>0&&(a=0),a<-o()&&(a=-o()),k.setWrapperTransition(0),k.setWrapperTranslate(a),k.updateActiveSlide(a),0===a||a===-o())return}else(new Date).getTime()-q>60&&(0>n?k.swipeNext():k.swipePrev()),q=(new Date).getTime();return t.autoplay&&k.stopAutoplay(!0),e.preventDefault?e.preventDefault():e.returnValue=!1,!1}function d(e){k.allowSlideClick&&(h(e),k.fireCallback(t.onSlideClick,k,e))}function u(e){h(e),k.fireCallback(t.onSlideTouch,k,e)}function h(e){if(e.currentTarget)k.clickedSlide=e.currentTarget;else{var i=e.srcElement;do{if(i.className.indexOf(t.slideClass)>-1)break;i=i.parentNode}while(i);k.clickedSlide=i}k.clickedSlideIndex=k.slides.indexOf(k.clickedSlide),k.clickedSlideLoopIndex=k.clickedSlideIndex-(k.loopedSlides||0)}function p(e){return k.allowLinks?void 0:(e.preventDefault?e.preventDefault():e.returnValue=!1,t.preventLinksPropagation&&"stopPropagation"in e&&e.stopPropagation(),!1)}function f(e){return e.stopPropagation?e.stopPropagation():e.returnValue=!1,!1}function m(e){if(t.preventLinks&&(k.allowLinks=!0),k.isTouched||t.onlyExternal)return!1;var i=e.target||e.srcElement;document.activeElement&&document.activeElement!==i&&document.activeElement.blur();var n="input select textarea".split(" ");if(t.noSwiping&&i&&$(i))return!1;if(Q=!1,k.isTouched=!0,K="touchstart"===e.type,!K&&"which"in e&&3===e.which)return!1;if(!K||1===e.targetTouches.length){k.callPlugins("onTouchStartBegin"),!K&&!k.isAndroid&&n.indexOf(i.tagName.toLowerCase())<0&&(e.preventDefault?e.preventDefault():e.returnValue=!1);var o=K?e.targetTouches[0].pageX:e.pageX||e.clientX,a=K?e.targetTouches[0].pageY:e.pageY||e.clientY;k.touches.startX=k.touches.currentX=o,k.touches.startY=k.touches.currentY=a,k.touches.start=k.touches.current=A?o:a,k.setWrapperTransition(0),k.positions.start=k.positions.current=k.getWrapperTranslate(),k.setWrapperTranslate(k.positions.start),k.times.start=(new Date).getTime(),L=void 0,t.moveStartThreshold>0&&(z=!1),t.onTouchStart&&k.fireCallback(t.onTouchStart,k,e),k.callPlugins("onTouchStartEnd")}}function g(e){if(k.isTouched&&!t.onlyExternal&&(!K||"mousemove"!==e.type)){var i=K?e.targetTouches[0].pageX:e.pageX||e.clientX,n=K?e.targetTouches[0].pageY:e.pageY||e.clientY;if("undefined"==typeof L&&A&&(L=!!(L||Math.abs(n-k.touches.startY)>Math.abs(i-k.touches.startX))),"undefined"!=typeof L||A||(L=!!(L||Math.abs(n-k.touches.startY)<Math.abs(i-k.touches.startX))),L)return void(k.isTouched=!1);if(A){if(!t.swipeToNext&&i<k.touches.startX||!t.swipeToPrev&&i>k.touches.startX)return}else if(!t.swipeToNext&&n<k.touches.startY||!t.swipeToPrev&&n>k.touches.startY)return;if(e.assignedToSwiper)return void(k.isTouched=!1);if(e.assignedToSwiper=!0,t.preventLinks&&(k.allowLinks=!1),t.onSlideClick&&(k.allowSlideClick=!1),t.autoplay&&k.stopAutoplay(!0),!K||1===e.touches.length){if(k.isMoved||(k.callPlugins("onTouchMoveStart"),t.loop&&(k.fixLoop(),k.positions.start=k.getWrapperTranslate()),t.onTouchMoveStart&&k.fireCallback(t.onTouchMoveStart,k)),k.isMoved=!0,e.preventDefault?e.preventDefault():e.returnValue=!1,k.touches.current=A?i:n,k.positions.current=(k.touches.current-k.touches.start)*t.touchRatio+k.positions.start,k.positions.current>0&&t.onResistanceBefore&&k.fireCallback(t.onResistanceBefore,k,k.positions.current),k.positions.current<-o()&&t.onResistanceAfter&&k.fireCallback(t.onResistanceAfter,k,Math.abs(k.positions.current+o())),t.resistance&&"100%"!==t.resistance){var a;if(k.positions.current>0&&(a=1-k.positions.current/E/2,k.positions.current=.5>a?E/2:k.positions.current*a),k.positions.current<-o()){var r=(k.touches.current-k.touches.start)*t.touchRatio+(o()+k.positions.start);a=(E+r)/E;var s=k.positions.current-r*(1-a)/2,l=-o()-E/2;k.positions.current=l>s||0>=a?l:s}}if(t.resistance&&"100%"===t.resistance&&(k.positions.current>0&&(!t.freeMode||t.freeModeFluid)&&(k.positions.current=0),k.positions.current<-o()&&(!t.freeMode||t.freeModeFluid)&&(k.positions.current=-o())),!t.followFinger)return;if(t.moveStartThreshold)if(Math.abs(k.touches.current-k.touches.start)>t.moveStartThreshold||z){if(!z)return z=!0,void(k.touches.start=k.touches.current);k.setWrapperTranslate(k.positions.current)}else k.positions.current=k.positions.start;else k.setWrapperTranslate(k.positions.current);return(t.freeMode||t.watchActiveIndex)&&k.updateActiveSlide(k.positions.current),t.grabCursor&&(k.container.style.cursor="move",k.container.style.cursor="grabbing",k.container.style.cursor="-moz-grabbin",k.container.style.cursor="-webkit-grabbing"),V||(V=k.touches.current),X||(X=(new Date).getTime()),k.velocity=(k.touches.current-V)/((new Date).getTime()-X)/2,Math.abs(k.touches.current-V)<2&&(k.velocity=0),V=k.touches.current,X=(new Date).getTime(),k.callPlugins("onTouchMoveEnd"),t.onTouchMove&&k.fireCallback(t.onTouchMove,k,e),!1}}}function v(e){if(L&&k.swipeReset(),!t.onlyExternal&&k.isTouched){k.isTouched=!1,t.grabCursor&&(k.container.style.cursor="move",k.container.style.cursor="grab",k.container.style.cursor="-moz-grab",k.container.style.cursor="-webkit-grab"),k.positions.current||0===k.positions.current||(k.positions.current=k.positions.start),t.followFinger&&k.setWrapperTranslate(k.positions.current),k.times.end=(new Date).getTime(),k.touches.diff=k.touches.current-k.touches.start,k.touches.abs=Math.abs(k.touches.diff),k.positions.diff=k.positions.current-k.positions.start,k.positions.abs=Math.abs(k.positions.diff);var i=k.positions.diff,n=k.positions.abs,a=k.times.end-k.times.start;5>n&&300>a&&k.allowLinks===!1&&(t.freeMode||0===n||k.swipeReset(),t.preventLinks&&(k.allowLinks=!0),t.onSlideClick&&(k.allowSlideClick=!0)),setTimeout(function(){"undefined"!=typeof k&&null!==k&&(t.preventLinks&&(k.allowLinks=!0),t.onSlideClick&&(k.allowSlideClick=!0))},100);var r=o();if(!k.isMoved&&t.freeMode)return k.isMoved=!1,t.onTouchEnd&&k.fireCallback(t.onTouchEnd,k,e),void k.callPlugins("onTouchEnd");if(!k.isMoved||k.positions.current>0||k.positions.current<-r)return k.swipeReset(),t.onTouchEnd&&k.fireCallback(t.onTouchEnd,k,e),void k.callPlugins("onTouchEnd");if(k.isMoved=!1,t.freeMode){if(t.freeModeFluid){var s,l=1e3*t.momentumRatio,c=k.velocity*l,d=k.positions.current+c,u=!1,h=20*Math.abs(k.velocity)*t.momentumBounceRatio;-r>d&&(t.momentumBounce&&k.support.transitions?(-h>d+r&&(d=-r-h),s=-r,u=!0,Q=!0):d=-r),d>0&&(t.momentumBounce&&k.support.transitions?(d>h&&(d=h),s=0,u=!0,Q=!0):d=0),0!==k.velocity&&(l=Math.abs((d-k.positions.current)/k.velocity)),k.setWrapperTranslate(d),k.setWrapperTransition(l),t.momentumBounce&&u&&k.wrapperTransitionEnd(function(){Q&&(t.onMomentumBounce&&k.fireCallback(t.onMomentumBounce,k),k.callPlugins("onMomentumBounce"),k.setWrapperTranslate(s),k.setWrapperTransition(300))}),k.updateActiveSlide(d)}return(!t.freeModeFluid||a>=300)&&k.updateActiveSlide(k.positions.current),t.onTouchEnd&&k.fireCallback(t.onTouchEnd,k,e),void k.callPlugins("onTouchEnd")}D=0>i?"toNext":"toPrev","toNext"===D&&300>=a&&(30>n||!t.shortSwipes?k.swipeReset():k.swipeNext(!0)),"toPrev"===D&&300>=a&&(30>n||!t.shortSwipes?k.swipeReset():k.swipePrev(!0));var p=0;if("auto"===t.slidesPerView){for(var f,m=Math.abs(k.getWrapperTranslate()),g=0,v=0;v<k.slides.length;v++)if(f=A?k.slides[v].getWidth(!0,t.roundLengths):k.slides[v].getHeight(!0,t.roundLengths),g+=f,g>m){p=f;break}p>E&&(p=E)}else p=G*t.slidesPerView;"toNext"===D&&a>300&&(n>=p*t.longSwipesRatio?k.swipeNext(!0):k.swipeReset()),"toPrev"===D&&a>300&&(n>=p*t.longSwipesRatio?k.swipePrev(!0):k.swipeReset()),t.onTouchEnd&&k.fireCallback(t.onTouchEnd,k,e),k.callPlugins("onTouchEnd")}}function $(e){var i=!1;do e.className.indexOf(t.noSwipingClass)>-1&&(i=!0),e=e.parentElement;while(!i&&e.parentElement&&-1===e.className.indexOf(t.wrapperClass));return!i&&e.className.indexOf(t.wrapperClass)>-1&&e.className.indexOf(t.noSwipingClass)>-1&&(i=!0),i}function w(e,t){var i,n=document.createElement("div");return n.innerHTML=t,i=n.firstChild,i.className+=" "+e,i.outerHTML}function y(e,i,n){function o(){var a=+new Date,u=a-r;s+=l*u/(1e3/60),d="toNext"===c?s>e:e>s,d?(k.setWrapperTranslate(Math.ceil(s)),k._DOMAnimating=!0,window.setTimeout(function(){o()},1e3/60)):(t.onSlideChangeEnd&&("to"===i?n.runCallbacks===!0&&k.fireCallback(t.onSlideChangeEnd,k,c):k.fireCallback(t.onSlideChangeEnd,k,c)),k.setWrapperTranslate(e),k._DOMAnimating=!1)}var a="to"===i&&n.speed>=0?n.speed:t.speed,r=+new Date;if(k.support.transitions||!t.DOMAnimation)k.setWrapperTranslate(e),k.setWrapperTransition(a);else{var s=k.getWrapperTranslate(),l=Math.ceil((e-s)/a*(1e3/60)),c=s>e?"toNext":"toPrev",d="toNext"===c?s>e:e>s;if(k._DOMAnimating)return;o()}k.updateActiveSlide(e),t.onSlideNext&&"next"===i&&k.fireCallback(t.onSlideNext,k,e),t.onSlidePrev&&"prev"===i&&k.fireCallback(t.onSlidePrev,k,e),t.onSlideReset&&"reset"===i&&k.fireCallback(t.onSlideReset,k,e),("next"===i||"prev"===i||"to"===i&&n.runCallbacks===!0)&&S(i)}function S(e){if(k.callPlugins("onSlideChangeStart"),t.onSlideChangeStart)if(t.queueStartCallbacks&&k.support.transitions){if(k._queueStartCallbacks)return;k._queueStartCallbacks=!0,k.fireCallback(t.onSlideChangeStart,k,e),k.wrapperTransitionEnd(function(){k._queueStartCallbacks=!1})}else k.fireCallback(t.onSlideChangeStart,k,e);if(t.onSlideChangeEnd)if(k.support.transitions)if(t.queueEndCallbacks){if(k._queueEndCallbacks)return;k._queueEndCallbacks=!0,k.wrapperTransitionEnd(function(i){k.fireCallback(t.onSlideChangeEnd,i,e)})}else k.wrapperTransitionEnd(function(i){k.fireCallback(t.onSlideChangeEnd,i,e)});else t.DOMAnimation||setTimeout(function(){k.fireCallback(t.onSlideChangeEnd,k,e)},10)}function _(){var e=k.paginationButtons;if(e)for(var t=0;t<e.length;t++)k.h.removeEventListener(e[t],"click",C)}function b(){var e=k.paginationButtons;if(e)for(var t=0;t<e.length;t++)k.h.addEventListener(e[t],"click",C)}function C(e){for(var i,n=e.target||e.srcElement,o=k.paginationButtons,a=0;a<o.length;a++)n===o[a]&&(i=a);t.autoplay&&k.stopAutoplay(!0),k.swipeTo(i)}function x(){Z=setTimeout(function(){t.loop?(k.fixLoop(),k.swipeNext(!0)):k.swipeNext(!0)||(t.autoplayStopOnLast?(clearTimeout(Z),Z=void 0):k.swipeTo(0)),k.wrapperTransitionEnd(function(){"undefined"!=typeof Z&&x()})},t.autoplay)}function J(){k.calcSlides(),t.loader.slides.length>0&&0===k.slides.length&&k.loadSlides(),t.loop&&k.createLoop(),k.init(),a(),t.pagination&&k.createPagination(!0),t.loop||t.initialSlide>0?k.swipeTo(t.initialSlide,0,!1):k.updateActiveSlide(0),t.autoplay&&k.startAutoplay(),k.centerIndex=k.activeIndex,t.onSwiperCreated&&k.fireCallback(t.onSwiperCreated,k),k.callPlugins("onSwiperCreated")}if(!document.body.outerHTML&&document.body.__defineGetter__&&HTMLElement){var H=HTMLElement.prototype;H.__defineGetter__&&H.__defineGetter__("outerHTML",function(){return(new XMLSerializer).serializeToString(this)})}if(window.getComputedStyle||(window.getComputedStyle=function(e){return this.el=e,this.getPropertyValue=function(t){var i=/(\-([a-z]){1})/g;return"float"===t&&(t="styleFloat"),i.test(t)&&(t=t.replace(i,function(){return arguments[2].toUpperCase()})),e.currentStyle[t]?e.currentStyle[t]:null},this}),Array.prototype.indexOf||(Array.prototype.indexOf=function(e,t){for(var i=t||0,n=this.length;n>i;i++)if(this[i]===e)return i;return-1}),(document.querySelectorAll||window.jQuery)&&"undefined"!=typeof e&&(e.nodeType||0!==i(e).length)){var k=this;k.touches={start:0,startX:0,startY:0,current:0,currentX:0,currentY:0,diff:0,abs:0},k.positions={start:0,abs:0,diff:0,current:0},k.times={start:0,end:0},k.id=(new Date).getTime(),k.container=e.nodeType?e:i(e)[0],k.isTouched=!1,k.isMoved=!1,k.activeIndex=0,k.centerIndex=0,k.activeLoaderIndex=0,k.activeLoopIndex=0,k.previousIndex=null,k.velocity=0,k.snapGrid=[],k.slidesGrid=[],k.imagesToLoad=[],k.imagesLoaded=0,k.wrapperLeft=0,k.wrapperRight=0,k.wrapperTop=0,k.wrapperBottom=0,k.isAndroid=navigator.userAgent.toLowerCase().indexOf("android")>=0;var T,G,I,D,L,E,P={eventTarget:"wrapper",mode:"horizontal",touchRatio:1,speed:300,freeMode:!1,freeModeFluid:!1,momentumRatio:1,momentumBounce:!0,momentumBounceRatio:1,slidesPerView:1,slidesPerGroup:1,slidesPerViewFit:!0,simulateTouch:!0,followFinger:!0,shortSwipes:!0,longSwipesRatio:.5,moveStartThreshold:!1,onlyExternal:!1,createPagination:!0,pagination:!1,paginationElement:"span",paginationClickable:!1,paginationAsRange:!0,resistance:!0,scrollContainer:!1,preventLinks:!0,preventLinksPropagation:!1,noSwiping:!1,noSwipingClass:"swiper-no-swiping",initialSlide:0,keyboardControl:!1,mousewheelControl:!1,mousewheelControlForceToAxis:!1,useCSS3Transforms:!0,autoplay:!1,autoplayDisableOnInteraction:!0,autoplayStopOnLast:!1,loop:!1,loopAdditionalSlides:0,roundLengths:!1,calculateHeight:!1,cssWidthAndHeight:!1,updateOnImagesReady:!0,releaseFormElements:!0,watchActiveIndex:!1,visibilityFullFit:!1,offsetPxBefore:0,offsetPxAfter:0,offsetSlidesBefore:0,offsetSlidesAfter:0,centeredSlides:!1,queueStartCallbacks:!1,queueEndCallbacks:!1,autoResize:!0,resizeReInit:!1,DOMAnimation:!0,loader:{slides:[],slidesHTMLType:"inner",surroundGroups:1,logic:"reload",loadAllSlides:!1},swipeToPrev:!0,swipeToNext:!0,slideElement:"div",slideClass:"swiper-slide",slideActiveClass:"swiper-slide-active",slideVisibleClass:"swiper-slide-visible",slideDuplicateClass:"swiper-slide-duplicate",wrapperClass:"swiper-wrapper",paginationElementClass:"swiper-pagination-switch",paginationActiveClass:"swiper-active-switch",paginationVisibleClass:"swiper-visible-switch"};t=t||{};for(var M in P)if(M in t&&"object"==typeof t[M])for(var j in P[M])j in t[M]||(t[M][j]=P[M][j]);else M in t||(t[M]=P[M]);k.params=t,t.scrollContainer&&(t.freeMode=!0,t.freeModeFluid=!0),t.loop&&(t.resistance="100%");var A="horizontal"===t.mode,F=["mousedown","mousemove","mouseup"];k.browser.ie10&&(F=["MSPointerDown","MSPointerMove","MSPointerUp"]),k.browser.ie11&&(F=["pointerdown","pointermove","pointerup"]),k.touchEvents={touchStart:k.support.touch||!t.simulateTouch?"touchstart":F[0],touchMove:k.support.touch||!t.simulateTouch?"touchmove":F[1],touchEnd:k.support.touch||!t.simulateTouch?"touchend":F[2]};for(var B=k.container.childNodes.length-1;B>=0;B--)if(k.container.childNodes[B].className)for(var N=k.container.childNodes[B].className.split(/\s+/),W=0;W<N.length;W++)N[W]===t.wrapperClass&&(T=k.container.childNodes[B]);k.wrapper=T,k._extendSwiperSlide=function(e){return e.append=function(){return t.loop?e.insertAfter(k.slides.length-k.loopedSlides):(k.wrapper.appendChild(e),k.reInit()),e},e.prepend=function(){return t.loop?(k.wrapper.insertBefore(e,k.slides[k.loopedSlides]),k.removeLoopedSlides(),k.calcSlides(),k.createLoop()):k.wrapper.insertBefore(e,k.wrapper.firstChild),k.reInit(),e},e.insertAfter=function(i){if("undefined"==typeof i)return!1;var n;return t.loop?(n=k.slides[i+1+k.loopedSlides],n?k.wrapper.insertBefore(e,n):k.wrapper.appendChild(e),k.removeLoopedSlides(),k.calcSlides(),k.createLoop()):(n=k.slides[i+1],k.wrapper.insertBefore(e,n)),k.reInit(),e},e.clone=function(){return k._extendSwiperSlide(e.cloneNode(!0))},e.remove=function(){k.wrapper.removeChild(e),k.reInit()},e.html=function(t){return"undefined"==typeof t?e.innerHTML:(e.innerHTML=t,e)},e.index=function(){for(var t,i=k.slides.length-1;i>=0;i--)e===k.slides[i]&&(t=i);return t},e.isActive=function(){return e.index()===k.activeIndex?!0:!1},e.swiperSlideDataStorage||(e.swiperSlideDataStorage={}),e.getData=function(t){return e.swiperSlideDataStorage[t]},e.setData=function(t,i){return e.swiperSlideDataStorage[t]=i,e},e.data=function(t,i){return"undefined"==typeof i?e.getAttribute("data-"+t):(e.setAttribute("data-"+t,i),e)},e.getWidth=function(t,i){return k.h.getWidth(e,t,i)},e.getHeight=function(t,i){return k.h.getHeight(e,t,i)},e.getOffset=function(){return k.h.getOffset(e)},e},k.calcSlides=function(e){var i=k.slides?k.slides.length:!1;k.slides=[],k.displaySlides=[];for(var n=0;n<k.wrapper.childNodes.length;n++)if(k.wrapper.childNodes[n].className)for(var o=k.wrapper.childNodes[n].className,a=o.split(/\s+/),l=0;l<a.length;l++)a[l]===t.slideClass&&k.slides.push(k.wrapper.childNodes[n]);for(n=k.slides.length-1;n>=0;n--)k._extendSwiperSlide(k.slides[n]);i!==!1&&(i!==k.slides.length||e)&&(s(),r(),k.updateActiveSlide(),k.params.pagination&&k.createPagination(),k.callPlugins("numberOfSlidesChanged"))},k.createSlide=function(e,i,n){i=i||k.params.slideClass,n=n||t.slideElement;var o=document.createElement(n);return o.innerHTML=e||"",o.className=i,k._extendSwiperSlide(o)},k.appendSlide=function(e,t,i){return e?e.nodeType?k._extendSwiperSlide(e).append():k.createSlide(e,t,i).append():void 0},k.prependSlide=function(e,t,i){return e?e.nodeType?k._extendSwiperSlide(e).prepend():k.createSlide(e,t,i).prepend():void 0},k.insertSlideAfter=function(e,t,i,n){return"undefined"==typeof e?!1:t.nodeType?k._extendSwiperSlide(t).insertAfter(e):k.createSlide(t,i,n).insertAfter(e)},k.removeSlide=function(e){if(k.slides[e]){if(t.loop){if(!k.slides[e+k.loopedSlides])return!1;k.slides[e+k.loopedSlides].remove(),k.removeLoopedSlides(),k.calcSlides(),k.createLoop()}else k.slides[e].remove();return!0}return!1},k.removeLastSlide=function(){return k.slides.length>0?(t.loop?(k.slides[k.slides.length-1-k.loopedSlides].remove(),k.removeLoopedSlides(),k.calcSlides(),k.createLoop()):k.slides[k.slides.length-1].remove(),!0):!1},k.removeAllSlides=function(){for(var e=k.slides.length-1;e>=0;e--)k.slides[e].remove()},k.getSlide=function(e){return k.slides[e]},k.getLastSlide=function(){return k.slides[k.slides.length-1]},k.getFirstSlide=function(){return k.slides[0]},k.activeSlide=function(){return k.slides[k.activeIndex]},k.fireCallback=function(){var e=arguments[0];if("[object Array]"===Object.prototype.toString.call(e))for(var i=0;i<e.length;i++)"function"==typeof e[i]&&e[i](arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]);else"[object String]"===Object.prototype.toString.call(e)?t["on"+e]&&k.fireCallback(t["on"+e],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]):e(arguments[1],arguments[2],arguments[3],arguments[4],arguments[5])},k.addCallback=function(e,t){var i,o=this;return o.params["on"+e]?n(this.params["on"+e])?this.params["on"+e].push(t):"function"==typeof this.params["on"+e]?(i=this.params["on"+e],this.params["on"+e]=[],this.params["on"+e].push(i),this.params["on"+e].push(t)):void 0:(this.params["on"+e]=[],this.params["on"+e].push(t))},k.removeCallbacks=function(e){k.params["on"+e]&&(k.params["on"+e]=null)};var O=[];for(var U in k.plugins)if(t[U]){var R=k.plugins[U](k,t[U]);R&&O.push(R)}k.callPlugins=function(e,t){t||(t={});for(var i=0;i<O.length;i++)e in O[i]&&O[i][e](t)},!k.browser.ie10&&!k.browser.ie11||t.onlyExternal||k.wrapper.classList.add("swiper-wp8-"+(A?"horizontal":"vertical")),t.freeMode&&(k.container.className+=" swiper-free-mode"),k.initialized=!1,k.init=function(e,i){var n=k.h.getWidth(k.container,!1,t.roundLengths),o=k.h.getHeight(k.container,!1,t.roundLengths);if(n!==k.width||o!==k.height||e){k.width=n,k.height=o;var a,r,s,l,c,d,u;E=A?n:o;var h=k.wrapper;if(e&&k.calcSlides(i),"auto"===t.slidesPerView){var p=0,f=0;t.slidesOffset>0&&(h.style.paddingLeft="",h.style.paddingRight="",h.style.paddingTop="",h.style.paddingBottom=""),h.style.width="",h.style.height="",t.offsetPxBefore>0&&(A?k.wrapperLeft=t.offsetPxBefore:k.wrapperTop=t.offsetPxBefore),t.offsetPxAfter>0&&(A?k.wrapperRight=t.offsetPxAfter:k.wrapperBottom=t.offsetPxAfter),t.centeredSlides&&(A?(k.wrapperLeft=(E-this.slides[0].getWidth(!0,t.roundLengths))/2,k.wrapperRight=(E-k.slides[k.slides.length-1].getWidth(!0,t.roundLengths))/2):(k.wrapperTop=(E-k.slides[0].getHeight(!0,t.roundLengths))/2,k.wrapperBottom=(E-k.slides[k.slides.length-1].getHeight(!0,t.roundLengths))/2)),A?(k.wrapperLeft>=0&&(h.style.paddingLeft=k.wrapperLeft+"px"),k.wrapperRight>=0&&(h.style.paddingRight=k.wrapperRight+"px")):(k.wrapperTop>=0&&(h.style.paddingTop=k.wrapperTop+"px"),k.wrapperBottom>=0&&(h.style.paddingBottom=k.wrapperBottom+"px")),d=0;var m=0;for(k.snapGrid=[],k.slidesGrid=[],s=0,u=0;u<k.slides.length;u++){a=k.slides[u].getWidth(!0,t.roundLengths),r=k.slides[u].getHeight(!0,t.roundLengths),t.calculateHeight&&(s=Math.max(s,r));var g=A?a:r;if(t.centeredSlides){var v=u===k.slides.length-1?0:k.slides[u+1].getWidth(!0,t.roundLengths),$=u===k.slides.length-1?0:k.slides[u+1].getHeight(!0,t.roundLengths),w=A?v:$;
if(g>E){if(t.slidesPerViewFit)k.snapGrid.push(d+k.wrapperLeft),k.snapGrid.push(d+g-E+k.wrapperLeft);else for(var y=0;y<=Math.floor(g/(E+k.wrapperLeft));y++)k.snapGrid.push(0===y?d+k.wrapperLeft:d+k.wrapperLeft+E*y);k.slidesGrid.push(d+k.wrapperLeft)}else k.snapGrid.push(m),k.slidesGrid.push(m);m+=g/2+w/2}else{if(g>E)if(t.slidesPerViewFit)k.snapGrid.push(d),k.snapGrid.push(d+g-E);else if(0!==E)for(var S=0;S<=Math.floor(g/E);S++)k.snapGrid.push(d+E*S);else k.snapGrid.push(d);else k.snapGrid.push(d);k.slidesGrid.push(d)}d+=g,p+=a,f+=r}t.calculateHeight&&(k.height=s),A?(I=p+k.wrapperRight+k.wrapperLeft,h.style.width=p+"px",h.style.height=k.height+"px"):(I=f+k.wrapperTop+k.wrapperBottom,h.style.width=k.width+"px",h.style.height=f+"px")}else if(t.scrollContainer)h.style.width="",h.style.height="",l=k.slides[0].getWidth(!0,t.roundLengths),c=k.slides[0].getHeight(!0,t.roundLengths),I=A?l:c,h.style.width=l+"px",h.style.height=c+"px",G=A?l:c;else{if(t.calculateHeight){for(s=0,c=0,A||(k.container.style.height=""),h.style.height="",u=0;u<k.slides.length;u++)k.slides[u].style.height="",s=Math.max(k.slides[u].getHeight(!0),s),A||(c+=k.slides[u].getHeight(!0));r=s,k.height=r,A?c=r:(E=r,k.container.style.height=E+"px")}else r=A?k.height:k.height/t.slidesPerView,t.roundLengths&&(r=Math.ceil(r)),c=A?k.height:k.slides.length*r;for(a=A?k.width/t.slidesPerView:k.width,t.roundLengths&&(a=Math.ceil(a)),l=A?k.slides.length*a:k.width,G=A?a:r,t.offsetSlidesBefore>0&&(A?k.wrapperLeft=G*t.offsetSlidesBefore:k.wrapperTop=G*t.offsetSlidesBefore),t.offsetSlidesAfter>0&&(A?k.wrapperRight=G*t.offsetSlidesAfter:k.wrapperBottom=G*t.offsetSlidesAfter),t.offsetPxBefore>0&&(A?k.wrapperLeft=t.offsetPxBefore:k.wrapperTop=t.offsetPxBefore),t.offsetPxAfter>0&&(A?k.wrapperRight=t.offsetPxAfter:k.wrapperBottom=t.offsetPxAfter),t.centeredSlides&&(A?(k.wrapperLeft=(E-G)/2,k.wrapperRight=(E-G)/2):(k.wrapperTop=(E-G)/2,k.wrapperBottom=(E-G)/2)),A?(k.wrapperLeft>0&&(h.style.paddingLeft=k.wrapperLeft+"px"),k.wrapperRight>0&&(h.style.paddingRight=k.wrapperRight+"px")):(k.wrapperTop>0&&(h.style.paddingTop=k.wrapperTop+"px"),k.wrapperBottom>0&&(h.style.paddingBottom=k.wrapperBottom+"px")),I=A?l+k.wrapperRight+k.wrapperLeft:c+k.wrapperTop+k.wrapperBottom,parseFloat(l)>0&&(!t.cssWidthAndHeight||"height"===t.cssWidthAndHeight)&&(h.style.width=l+"px"),parseFloat(c)>0&&(!t.cssWidthAndHeight||"width"===t.cssWidthAndHeight)&&(h.style.height=c+"px"),d=0,k.snapGrid=[],k.slidesGrid=[],u=0;u<k.slides.length;u++)k.snapGrid.push(d),k.slidesGrid.push(d),d+=G,parseFloat(a)>0&&(!t.cssWidthAndHeight||"height"===t.cssWidthAndHeight)&&(k.slides[u].style.width=a+"px"),parseFloat(r)>0&&(!t.cssWidthAndHeight||"width"===t.cssWidthAndHeight)&&(k.slides[u].style.height=r+"px")}k.initialized?(k.callPlugins("onInit"),t.onInit&&k.fireCallback(t.onInit,k)):(k.callPlugins("onFirstInit"),t.onFirstInit&&k.fireCallback(t.onFirstInit,k)),k.initialized=!0}},k.reInit=function(e){k.init(!0,e)},k.resizeFix=function(e){k.callPlugins("beforeResizeFix"),k.init(t.resizeReInit||e),t.freeMode?k.getWrapperTranslate()<-o()&&(k.setWrapperTransition(0),k.setWrapperTranslate(-o())):(k.swipeTo(t.loop?k.activeLoopIndex:k.activeIndex,0,!1),t.autoplay&&(k.support.transitions&&"undefined"!=typeof Z?"undefined"!=typeof Z&&(clearTimeout(Z),Z=void 0,k.startAutoplay()):"undefined"!=typeof et&&(clearInterval(et),et=void 0,k.startAutoplay()))),k.callPlugins("afterResizeFix")},k.destroy=function(){var e=k.h.removeEventListener,i="wrapper"===t.eventTarget?k.wrapper:k.container;k.browser.ie10||k.browser.ie11?(e(i,k.touchEvents.touchStart,m),e(document,k.touchEvents.touchMove,g),e(document,k.touchEvents.touchEnd,v)):(k.support.touch&&(e(i,"touchstart",m),e(i,"touchmove",g),e(i,"touchend",v)),t.simulateTouch&&(e(i,"mousedown",m),e(document,"mousemove",g),e(document,"mouseup",v))),t.autoResize&&e(window,"resize",k.resizeFix),s(),t.paginationClickable&&_(),t.mousewheelControl&&k._wheelEvent&&e(k.container,k._wheelEvent,c),t.keyboardControl&&e(document,"keydown",l),t.autoplay&&k.stopAutoplay(),k.callPlugins("onDestroy"),k=null},k.disableKeyboardControl=function(){t.keyboardControl=!1,k.h.removeEventListener(document,"keydown",l)},k.enableKeyboardControl=function(){t.keyboardControl=!0,k.h.addEventListener(document,"keydown",l)};var q=(new Date).getTime();if(k.disableMousewheelControl=function(){return k._wheelEvent?(t.mousewheelControl=!1,k.h.removeEventListener(k.container,k._wheelEvent,c),!0):!1},k.enableMousewheelControl=function(){return k._wheelEvent?(t.mousewheelControl=!0,k.h.addEventListener(k.container,k._wheelEvent,c),!0):!1},t.grabCursor){var Y=k.container.style;Y.cursor="move",Y.cursor="grab",Y.cursor="-moz-grab",Y.cursor="-webkit-grab"}k.allowSlideClick=!0,k.allowLinks=!0;var z,V,X,K=!1,Q=!0;k.swipeNext=function(e){!e&&t.loop&&k.fixLoop(),!e&&t.autoplay&&k.stopAutoplay(!0),k.callPlugins("onSwipeNext");var i=k.getWrapperTranslate(),n=i;if("auto"===t.slidesPerView){for(var a=0;a<k.snapGrid.length;a++)if(-i>=k.snapGrid[a]&&-i<k.snapGrid[a+1]){n=-k.snapGrid[a+1];break}}else{var r=G*t.slidesPerGroup;n=-(Math.floor(Math.abs(i)/Math.floor(r))*r+r)}return n<-o()&&(n=-o()),n===i?!1:(y(n,"next"),!0)},k.swipePrev=function(e){!e&&t.loop&&k.fixLoop(),!e&&t.autoplay&&k.stopAutoplay(!0),k.callPlugins("onSwipePrev");var i,n=Math.ceil(k.getWrapperTranslate());if("auto"===t.slidesPerView){i=0;for(var o=1;o<k.snapGrid.length;o++){if(-n===k.snapGrid[o]){i=-k.snapGrid[o-1];break}if(-n>k.snapGrid[o]&&-n<k.snapGrid[o+1]){i=-k.snapGrid[o];break}}}else{var a=G*t.slidesPerGroup;i=-(Math.ceil(-n/a)-1)*a}return i>0&&(i=0),i===n?!1:(y(i,"prev"),!0)},k.swipeReset=function(){k.callPlugins("onSwipeReset");{var e,i=k.getWrapperTranslate(),n=G*t.slidesPerGroup;-o()}if("auto"===t.slidesPerView){e=0;for(var a=0;a<k.snapGrid.length;a++){if(-i===k.snapGrid[a])return;if(-i>=k.snapGrid[a]&&-i<k.snapGrid[a+1]){e=k.positions.diff>0?-k.snapGrid[a+1]:-k.snapGrid[a];break}}-i>=k.snapGrid[k.snapGrid.length-1]&&(e=-k.snapGrid[k.snapGrid.length-1]),i<=-o()&&(e=-o())}else e=0>i?Math.round(i/n)*n:0,i<=-o()&&(e=-o());return t.scrollContainer&&(e=0>i?i:0),e<-o()&&(e=-o()),t.scrollContainer&&E>G&&(e=0),e===i?!1:(y(e,"reset"),!0)},k.swipeTo=function(e,i,n){e=parseInt(e,10),k.callPlugins("onSwipeTo",{index:e,speed:i}),t.loop&&(e+=k.loopedSlides);var a=k.getWrapperTranslate();if(!(e>k.slides.length-1||0>e)){var r;return r="auto"===t.slidesPerView?-k.slidesGrid[e]:-e*G,r<-o()&&(r=-o()),r===a?!1:(n=n===!1?!1:!0,y(r,"to",{index:e,speed:i,runCallbacks:n}),!0)}},k._queueStartCallbacks=!1,k._queueEndCallbacks=!1,k.updateActiveSlide=function(e){if(k.initialized&&0!==k.slides.length){k.previousIndex=k.activeIndex,"undefined"==typeof e&&(e=k.getWrapperTranslate()),e>0&&(e=0);var i;if("auto"===t.slidesPerView){if(k.activeIndex=k.slidesGrid.indexOf(-e),k.activeIndex<0){for(i=0;i<k.slidesGrid.length-1&&!(-e>k.slidesGrid[i]&&-e<k.slidesGrid[i+1]);i++);var n=Math.abs(k.slidesGrid[i]+e),o=Math.abs(k.slidesGrid[i+1]+e);k.activeIndex=o>=n?i:i+1}}else k.activeIndex=Math[t.visibilityFullFit?"ceil":"round"](-e/G);if(k.activeIndex===k.slides.length&&(k.activeIndex=k.slides.length-1),k.activeIndex<0&&(k.activeIndex=0),k.slides[k.activeIndex]){if(k.calcVisibleSlides(e),k.support.classList){var a;for(i=0;i<k.slides.length;i++)a=k.slides[i],a.classList.remove(t.slideActiveClass),k.visibleSlides.indexOf(a)>=0?a.classList.add(t.slideVisibleClass):a.classList.remove(t.slideVisibleClass);k.slides[k.activeIndex].classList.add(t.slideActiveClass)}else{var r=new RegExp("\\s*"+t.slideActiveClass),s=new RegExp("\\s*"+t.slideVisibleClass);for(i=0;i<k.slides.length;i++)k.slides[i].className=k.slides[i].className.replace(r,"").replace(s,""),k.visibleSlides.indexOf(k.slides[i])>=0&&(k.slides[i].className+=" "+t.slideVisibleClass);k.slides[k.activeIndex].className+=" "+t.slideActiveClass}if(t.loop){var l=k.loopedSlides;k.activeLoopIndex=k.activeIndex-l,k.activeLoopIndex>=k.slides.length-2*l&&(k.activeLoopIndex=k.slides.length-2*l-k.activeLoopIndex),k.activeLoopIndex<0&&(k.activeLoopIndex=k.slides.length-2*l+k.activeLoopIndex),k.activeLoopIndex<0&&(k.activeLoopIndex=0)}else k.activeLoopIndex=k.activeIndex;t.pagination&&k.updatePagination(e)}}},k.createPagination=function(e){if(t.paginationClickable&&k.paginationButtons&&_(),k.paginationContainer=t.pagination.nodeType?t.pagination:i(t.pagination)[0],t.createPagination){var n="",o=k.slides.length,a=o;t.loop&&(a-=2*k.loopedSlides);for(var r=0;a>r;r++)n+="<"+t.paginationElement+' class="'+t.paginationElementClass+'"></'+t.paginationElement+">";k.paginationContainer.innerHTML=n}k.paginationButtons=i("."+t.paginationElementClass,k.paginationContainer),e||k.updatePagination(),k.callPlugins("onCreatePagination"),t.paginationClickable&&b()},k.updatePagination=function(e){if(t.pagination&&!(k.slides.length<1)){var n=i("."+t.paginationActiveClass,k.paginationContainer);if(n){var o=k.paginationButtons;if(0!==o.length){for(var a=0;a<o.length;a++)o[a].className=t.paginationElementClass;var r=t.loop?k.loopedSlides:0;if(t.paginationAsRange){k.visibleSlides||k.calcVisibleSlides(e);var s,l=[];for(s=0;s<k.visibleSlides.length;s++){var c=k.slides.indexOf(k.visibleSlides[s])-r;t.loop&&0>c&&(c=k.slides.length-2*k.loopedSlides+c),t.loop&&c>=k.slides.length-2*k.loopedSlides&&(c=k.slides.length-2*k.loopedSlides-c,c=Math.abs(c)),l.push(c)}for(s=0;s<l.length;s++)o[l[s]]&&(o[l[s]].className+=" "+t.paginationVisibleClass);t.loop?void 0!==o[k.activeLoopIndex]&&(o[k.activeLoopIndex].className+=" "+t.paginationActiveClass):o[k.activeIndex].className+=" "+t.paginationActiveClass}else t.loop?o[k.activeLoopIndex]&&(o[k.activeLoopIndex].className+=" "+t.paginationActiveClass+" "+t.paginationVisibleClass):o[k.activeIndex].className+=" "+t.paginationActiveClass+" "+t.paginationVisibleClass}}}},k.calcVisibleSlides=function(e){var i=[],n=0,o=0,a=0;A&&k.wrapperLeft>0&&(e+=k.wrapperLeft),!A&&k.wrapperTop>0&&(e+=k.wrapperTop);for(var r=0;r<k.slides.length;r++){n+=o,o="auto"===t.slidesPerView?A?k.h.getWidth(k.slides[r],!0,t.roundLengths):k.h.getHeight(k.slides[r],!0,t.roundLengths):G,a=n+o;var s=!1;t.visibilityFullFit?(n>=-e&&-e+E>=a&&(s=!0),-e>=n&&a>=-e+E&&(s=!0)):(a>-e&&-e+E>=a&&(s=!0),n>=-e&&-e+E>n&&(s=!0),-e>n&&a>-e+E&&(s=!0)),s&&i.push(k.slides[r])}0===i.length&&(i=[k.slides[k.activeIndex]]),k.visibleSlides=i};var Z,et;k.startAutoplay=function(){if(k.support.transitions){if("undefined"!=typeof Z)return!1;if(!t.autoplay)return;k.callPlugins("onAutoplayStart"),t.onAutoplayStart&&k.fireCallback(t.onAutoplayStart,k),x()}else{if("undefined"!=typeof et)return!1;if(!t.autoplay)return;k.callPlugins("onAutoplayStart"),t.onAutoplayStart&&k.fireCallback(t.onAutoplayStart,k),et=setInterval(function(){t.loop?(k.fixLoop(),k.swipeNext(!0)):k.swipeNext(!0)||(t.autoplayStopOnLast?(clearInterval(et),et=void 0):k.swipeTo(0))},t.autoplay)}},k.stopAutoplay=function(e){if(k.support.transitions){if(!Z)return;Z&&clearTimeout(Z),Z=void 0,e&&!t.autoplayDisableOnInteraction&&k.wrapperTransitionEnd(function(){x()}),k.callPlugins("onAutoplayStop"),t.onAutoplayStop&&k.fireCallback(t.onAutoplayStop,k)}else et&&clearInterval(et),et=void 0,k.callPlugins("onAutoplayStop"),t.onAutoplayStop&&k.fireCallback(t.onAutoplayStop,k)},k.loopCreated=!1,k.removeLoopedSlides=function(){if(k.loopCreated)for(var e=0;e<k.slides.length;e++)k.slides[e].getData("looped")===!0&&k.wrapper.removeChild(k.slides[e])},k.createLoop=function(){if(0!==k.slides.length){k.loopedSlides="auto"===t.slidesPerView?t.loopedSlides||1:t.slidesPerView+t.loopAdditionalSlides,k.loopedSlides>k.slides.length&&(k.loopedSlides=k.slides.length);var e,i="",n="",o="",a=k.slides.length,r=Math.floor(k.loopedSlides/a),s=k.loopedSlides%a;for(e=0;r*a>e;e++){var l=e;if(e>=a){var c=Math.floor(e/a);l=e-a*c}o+=k.slides[l].outerHTML}for(e=0;s>e;e++)n+=w(t.slideDuplicateClass,k.slides[e].outerHTML);for(e=a-s;a>e;e++)i+=w(t.slideDuplicateClass,k.slides[e].outerHTML);var d=i+o+T.innerHTML+o+n;for(T.innerHTML=d,k.loopCreated=!0,k.calcSlides(),e=0;e<k.slides.length;e++)(e<k.loopedSlides||e>=k.slides.length-k.loopedSlides)&&k.slides[e].setData("looped",!0);k.callPlugins("onCreateLoop")}},k.fixLoop=function(){var e;k.activeIndex<k.loopedSlides?(e=k.slides.length-3*k.loopedSlides+k.activeIndex,k.swipeTo(e,0,!1)):("auto"===t.slidesPerView&&k.activeIndex>=2*k.loopedSlides||k.activeIndex>k.slides.length-2*t.slidesPerView)&&(e=-k.slides.length+k.activeIndex+k.loopedSlides,k.swipeTo(e,0,!1))},k.loadSlides=function(){var e="";k.activeLoaderIndex=0;for(var i=t.loader.slides,n=t.loader.loadAllSlides?i.length:t.slidesPerView*(1+t.loader.surroundGroups),o=0;n>o;o++)e+="outer"===t.loader.slidesHTMLType?i[o]:"<"+t.slideElement+' class="'+t.slideClass+'" data-swiperindex="'+o+'">'+i[o]+"</"+t.slideElement+">";k.wrapper.innerHTML=e,k.calcSlides(!0),t.loader.loadAllSlides||k.wrapperTransitionEnd(k.reloadSlides,!0)},k.reloadSlides=function(){var e=t.loader.slides,i=parseInt(k.activeSlide().data("swiperindex"),10);if(!(0>i||i>e.length-1)){k.activeLoaderIndex=i;var n=Math.max(0,i-t.slidesPerView*t.loader.surroundGroups),o=Math.min(i+t.slidesPerView*(1+t.loader.surroundGroups)-1,e.length-1);if(i>0){var a=-G*(i-n);k.setWrapperTranslate(a),k.setWrapperTransition(0)}var r;if("reload"===t.loader.logic){k.wrapper.innerHTML="";var s="";for(r=n;o>=r;r++)s+="outer"===t.loader.slidesHTMLType?e[r]:"<"+t.slideElement+' class="'+t.slideClass+'" data-swiperindex="'+r+'">'+e[r]+"</"+t.slideElement+">";k.wrapper.innerHTML=s}else{var l=1e3,c=0;for(r=0;r<k.slides.length;r++){var d=k.slides[r].data("swiperindex");n>d||d>o?k.wrapper.removeChild(k.slides[r]):(l=Math.min(d,l),c=Math.max(d,c))}for(r=n;o>=r;r++){var u;l>r&&(u=document.createElement(t.slideElement),u.className=t.slideClass,u.setAttribute("data-swiperindex",r),u.innerHTML=e[r],k.wrapper.insertBefore(u,k.wrapper.firstChild)),r>c&&(u=document.createElement(t.slideElement),u.className=t.slideClass,u.setAttribute("data-swiperindex",r),u.innerHTML=e[r],k.wrapper.appendChild(u))}}k.reInit(!0)}},J()}};Swiper.prototype={plugins:{},wrapperTransitionEnd:function(e,t){"use strict";function i(s){if(s.target===a&&(e(o),o.params.queueEndCallbacks&&(o._queueEndCallbacks=!1),!t))for(n=0;n<r.length;n++)o.h.removeEventListener(a,r[n],i)}var n,o=this,a=o.wrapper,r=["webkitTransitionEnd","transitionend","oTransitionEnd","MSTransitionEnd","msTransitionEnd"];if(e)for(n=0;n<r.length;n++)o.h.addEventListener(a,r[n],i)},getWrapperTranslate:function(e){"use strict";var t,i,n,o,a=this.wrapper;return"undefined"==typeof e&&(e="horizontal"===this.params.mode?"x":"y"),this.support.transforms&&this.params.useCSS3Transforms?(n=window.getComputedStyle(a,null),window.WebKitCSSMatrix?o=new WebKitCSSMatrix("none"===n.webkitTransform?"":n.webkitTransform):(o=n.MozTransform||n.OTransform||n.MsTransform||n.msTransform||n.transform||n.getPropertyValue("transform").replace("translate(","matrix(1, 0, 0, 1,"),t=o.toString().split(",")),"x"===e&&(i=window.WebKitCSSMatrix?o.m41:parseFloat(16===t.length?t[12]:t[4])),"y"===e&&(i=window.WebKitCSSMatrix?o.m42:parseFloat(16===t.length?t[13]:t[5]))):("x"===e&&(i=parseFloat(a.style.left,10)||0),"y"===e&&(i=parseFloat(a.style.top,10)||0)),i||0},setWrapperTranslate:function(e,t,i){"use strict";var n,o=this.wrapper.style,a={x:0,y:0,z:0};3===arguments.length?(a.x=e,a.y=t,a.z=i):("undefined"==typeof t&&(t="horizontal"===this.params.mode?"x":"y"),a[t]=e),this.support.transforms&&this.params.useCSS3Transforms?(n=this.support.transforms3d?"translate3d("+a.x+"px, "+a.y+"px, "+a.z+"px)":"translate("+a.x+"px, "+a.y+"px)",o.webkitTransform=o.MsTransform=o.msTransform=o.MozTransform=o.OTransform=o.transform=n):(o.left=a.x+"px",o.top=a.y+"px"),this.callPlugins("onSetWrapperTransform",a),this.params.onSetWrapperTransform&&this.fireCallback(this.params.onSetWrapperTransform,this,a)},setWrapperTransition:function(e){"use strict";var t=this.wrapper.style;t.webkitTransitionDuration=t.MsTransitionDuration=t.msTransitionDuration=t.MozTransitionDuration=t.OTransitionDuration=t.transitionDuration=e/1e3+"s",this.callPlugins("onSetWrapperTransition",{duration:e}),this.params.onSetWrapperTransition&&this.fireCallback(this.params.onSetWrapperTransition,this,e)},h:{getWidth:function(e,t,i){"use strict";var n=window.getComputedStyle(e,null).getPropertyValue("width"),o=parseFloat(n);return(isNaN(o)||n.indexOf("%")>0||0>o)&&(o=e.offsetWidth-parseFloat(window.getComputedStyle(e,null).getPropertyValue("padding-left"))-parseFloat(window.getComputedStyle(e,null).getPropertyValue("padding-right"))),t&&(o+=parseFloat(window.getComputedStyle(e,null).getPropertyValue("padding-left"))+parseFloat(window.getComputedStyle(e,null).getPropertyValue("padding-right"))),i?Math.ceil(o):o},getHeight:function(e,t,i){"use strict";if(t)return e.offsetHeight;var n=window.getComputedStyle(e,null).getPropertyValue("height"),o=parseFloat(n);return(isNaN(o)||n.indexOf("%")>0||0>o)&&(o=e.offsetHeight-parseFloat(window.getComputedStyle(e,null).getPropertyValue("padding-top"))-parseFloat(window.getComputedStyle(e,null).getPropertyValue("padding-bottom"))),t&&(o+=parseFloat(window.getComputedStyle(e,null).getPropertyValue("padding-top"))+parseFloat(window.getComputedStyle(e,null).getPropertyValue("padding-bottom"))),i?Math.ceil(o):o},getOffset:function(e){"use strict";var t=e.getBoundingClientRect(),i=document.body,n=e.clientTop||i.clientTop||0,o=e.clientLeft||i.clientLeft||0,a=window.pageYOffset||e.scrollTop,r=window.pageXOffset||e.scrollLeft;return document.documentElement&&!window.pageYOffset&&(a=document.documentElement.scrollTop,r=document.documentElement.scrollLeft),{top:t.top+a-n,left:t.left+r-o}},windowWidth:function(){"use strict";return window.innerWidth?window.innerWidth:document.documentElement&&document.documentElement.clientWidth?document.documentElement.clientWidth:void 0},windowHeight:function(){"use strict";return window.innerHeight?window.innerHeight:document.documentElement&&document.documentElement.clientHeight?document.documentElement.clientHeight:void 0},windowScroll:function(){"use strict";return"undefined"!=typeof pageYOffset?{left:window.pageXOffset,top:window.pageYOffset}:document.documentElement?{left:document.documentElement.scrollLeft,top:document.documentElement.scrollTop}:void 0},addEventListener:function(e,t,i,n){"use strict";"undefined"==typeof n&&(n=!1),e.addEventListener?e.addEventListener(t,i,n):e.attachEvent&&e.attachEvent("on"+t,i)},removeEventListener:function(e,t,i,n){"use strict";"undefined"==typeof n&&(n=!1),e.removeEventListener?e.removeEventListener(t,i,n):e.detachEvent&&e.detachEvent("on"+t,i)}},setTransform:function(e,t){"use strict";var i=e.style;i.webkitTransform=i.MsTransform=i.msTransform=i.MozTransform=i.OTransform=i.transform=t},setTranslate:function(e,t){"use strict";var i=e.style,n={x:t.x||0,y:t.y||0,z:t.z||0},o=this.support.transforms3d?"translate3d("+n.x+"px,"+n.y+"px,"+n.z+"px)":"translate("+n.x+"px,"+n.y+"px)";i.webkitTransform=i.MsTransform=i.msTransform=i.MozTransform=i.OTransform=i.transform=o,this.support.transforms||(i.left=n.x+"px",i.top=n.y+"px")},setTransition:function(e,t){"use strict";var i=e.style;i.webkitTransitionDuration=i.MsTransitionDuration=i.msTransitionDuration=i.MozTransitionDuration=i.OTransitionDuration=i.transitionDuration=t+"ms"},support:{touch:window.Modernizr&&Modernizr.touch===!0||function(){"use strict";return!!("ontouchstart"in window||window.DocumentTouch&&document instanceof DocumentTouch)}(),transforms3d:window.Modernizr&&Modernizr.csstransforms3d===!0||function(){"use strict";var e=document.createElement("div").style;return"webkitPerspective"in e||"MozPerspective"in e||"OPerspective"in e||"MsPerspective"in e||"perspective"in e}(),transforms:window.Modernizr&&Modernizr.csstransforms===!0||function(){"use strict";var e=document.createElement("div").style;return"transform"in e||"WebkitTransform"in e||"MozTransform"in e||"msTransform"in e||"MsTransform"in e||"OTransform"in e}(),transitions:window.Modernizr&&Modernizr.csstransitions===!0||function(){"use strict";var e=document.createElement("div").style;return"transition"in e||"WebkitTransition"in e||"MozTransition"in e||"msTransition"in e||"MsTransition"in e||"OTransition"in e}(),classList:function(){"use strict";var e=document.createElement("div");return"classList"in e}()},browser:{ie8:function(){"use strict";var e=-1;if("Microsoft Internet Explorer"===navigator.appName){var t=navigator.userAgent,i=new RegExp(/MSIE ([0-9]{1,}[\.0-9]{0,})/);null!==i.exec(t)&&(e=parseFloat(RegExp.$1))}return-1!==e&&9>e}(),ie10:window.navigator.msPointerEnabled,ie11:window.navigator.pointerEnabled}},(window.jQuery||window.Zepto)&&!function(e){"use strict";e.fn.swiper=function(t){var i;return this.each(function(n){var o=e(this);if(!o.data("swiper")){var a=new Swiper(o[0],t);n||(i=a),o.data("swiper",a)}}),i}}(window.jQuery||window.Zepto),"undefined"!=typeof module&&(module.exports=Swiper),"function"==typeof define&&define.amd&&define([],function(){"use strict";return Swiper}),Swiper.prototype.plugins.progress=function(e){function t(){for(var t=0;t<e.slides.length;t++){var i=e.slides[t];i.progressSlideSize=o?e.h.getWidth(i):e.h.getHeight(i),i.progressSlideOffset="offsetLeft"in i?o?i.offsetLeft:i.offsetTop:o?i.getOffset().left-e.h.getOffset(e.container).left:i.getOffset().top-e.h.getOffset(e.container).top}n=o?e.h.getWidth(e.wrapper)+e.wrapperLeft+e.wrapperRight-e.width:e.h.getHeight(e.wrapper)+e.wrapperTop+e.wrapperBottom-e.height}function i(t){t=t||{x:0,y:0,z:0};var i;i=e.params.centeredSlides===!0?o?-t.x+e.width/2:-t.y+e.height/2:o?-t.x:-t.y;for(var a=0;a<e.slides.length;a++){var r=e.slides[a],s=e.params.centeredSlides===!0?r.progressSlideSize/2:0,l=(i-r.progressSlideOffset-s)/r.progressSlideSize;r.progress=l}e.progress=o?-t.x/n:-t.y/n,e.params.onProgressChange&&e.fireCallback(e.params.onProgressChange,e)}var n,o="horizontal"===e.params.mode,a={onFirstInit:function(){t(),i({x:e.getWrapperTranslate("x"),y:e.getWrapperTranslate("y")})},onInit:function(){t()},onSetWrapperTransform:function(e){i(e)}};return a},function(){var e=function(){var t=[].slice.call(arguments);return t.push(e.options),t[0].match(/^\s*#([\w:\-\.]+)\s*$/gim)&&t[0].replace(/^\s*#([\w:\-\.]+)\s*$/gim,function(e,i){var n=document,o=n&&n.getElementById(i);t[0]=o?o.value||o.innerHTML:e}),"undefined"!=typeof document&&document.body&&e.compile.call(e,document.body.innerHTML),1==arguments.length?e.compile.apply(e,t):arguments.length>=2?e.to_html.apply(e,t):void 0},t={escapehash:{"<":"&lt;",">":"&gt;","&":"&amp;",'"':"&quot;","'":"&#x27;","/":"&#x2f;"},escapereplace:function(e){return t.escapehash[e]},escaping:function(e){return"string"!=typeof e?e:e.replace(/[&<>"]/gim,this.escapereplace)},detection:function(e){return"undefined"==typeof e?"":e}},i=function(e){if("undefined"!=typeof console){if(console.warn)return void console.warn(e);if(console.log)return void console.log(e)}throw e},n=function(e,t){if(e=e!==Object(e)?{}:e,e.__proto__)return e.__proto__=t,e;var i=function(){},n=Object.create?Object.create(t):new(i.prototype=t,i);for(var o in e)e.hasOwnProperty(o)&&(n[o]=e[o]);return n},o=function(e){var t,i,n,o=/^function\s*[^\(]*\(\s*([^\)]*)\)/m,a=/,/,r=/^\s*(_?)(\S+?)\1\s*$/,s=/^function[^{]+{([\s\S]*)}/m,l=/((\/\/.*$)|(\/\*[\s\S]*?\*\/))/gm,c=[];"function"==typeof e?e.length&&(t=e.toString()):"string"==typeof e&&(t=e),t=t.replace(l,""),t=t.trim(),n=t.match(o),i=t.match(s)[1].trim();for(var d=0;d<n[1].split(a).length;d++){var u=n[1].split(a)[d];u.replace(r,function(e,t,i){c.push(i)})}return[c,i]};e.__cache={},e.version="0.6.8-stable",e.settings={},e.tags={operationOpen:"{@",operationClose:"}",interpolateOpen:"\\${",interpolateClose:"}",noneencodeOpen:"\\$\\${",noneencodeClose:"}",commentOpen:"\\{#",commentClose:"\\}"},e.options={cache:!0,strip:!0,errorhandling:!0,detection:!0,_method:n({__escapehtml:t,__throw:i,__juicer:e},{})},e.tagInit=function(){var t=e.tags.operationOpen+"each\\s*([^}]*?)\\s*as\\s*(\\w*?)\\s*(,\\s*\\w*?)?"+e.tags.operationClose,i=e.tags.operationOpen+"\\/each"+e.tags.operationClose,n=e.tags.operationOpen+"if\\s*([^}]*?)"+e.tags.operationClose,o=e.tags.operationOpen+"\\/if"+e.tags.operationClose,a=e.tags.operationOpen+"else"+e.tags.operationClose,r=e.tags.operationOpen+"else if\\s*([^}]*?)"+e.tags.operationClose,s=e.tags.interpolateOpen+"([\\s\\S]+?)"+e.tags.interpolateClose,l=e.tags.noneencodeOpen+"([\\s\\S]+?)"+e.tags.noneencodeClose,c=e.tags.commentOpen+"[^}]*?"+e.tags.commentClose,d=e.tags.operationOpen+"each\\s*(\\w*?)\\s*in\\s*range\\(([^}]+?)\\s*,\\s*([^}]+?)\\)"+e.tags.operationClose,u=e.tags.operationOpen+"include\\s*([^}]*?)\\s*,\\s*([^}]*?)"+e.tags.operationClose,h=e.tags.operationOpen+"helper\\s*([^}]*?)\\s*"+e.tags.operationClose,p="([\\s\\S]*?)",f=e.tags.operationOpen+"\\/helper"+e.tags.operationClose;e.settings.forstart=new RegExp(t,"igm"),e.settings.forend=new RegExp(i,"igm"),e.settings.ifstart=new RegExp(n,"igm"),e.settings.ifend=new RegExp(o,"igm"),e.settings.elsestart=new RegExp(a,"igm"),e.settings.elseifstart=new RegExp(r,"igm"),e.settings.interpolate=new RegExp(s,"igm"),e.settings.noneencode=new RegExp(l,"igm"),e.settings.inlinecomment=new RegExp(c,"igm"),e.settings.rangestart=new RegExp(d,"igm"),e.settings.include=new RegExp(u,"igm"),e.settings.helperRegister=new RegExp(h+p+f,"igm")},e.tagInit(),e.set=function(e,t){var i=this,n=function(e){return e.replace(/[\$\(\)\[\]\+\^\{\}\?\*\|\.]/gim,function(e){return"\\"+e})},o=function(e,t){var o=e.match(/^tag::(.*)$/i);return o?(i.tags[o[1]]=n(t),void i.tagInit()):void(i.options[e]=t)};if(2===arguments.length)return void o(e,t);if(e===Object(e))for(var a in e)e.hasOwnProperty(a)&&o(a,e[a])},e.register=function(e,t){var i=this.options._method;return i.hasOwnProperty(e)?!1:i[e]=t},e.unregister=function(e){var t=this.options._method;return t.hasOwnProperty(e)?delete t[e]:void 0},e.template=function(t){var i=this;this.options=t,this.__interpolate=function(e,t,i){var n,o=e.split("|"),a=o[0]||"";return o.length>1&&(e=o.shift(),n=o.shift().split(","),a="_method."+n.shift()+".call({}, "+[e].concat(n)+")"),"<%= "+(t?"_method.__escapehtml.escaping":"")+"("+(i&&i.detection===!1?"":"_method.__escapehtml.detection")+"("+a+")) %>"},this.__removeShell=function(t,n){var a=0;return t=t.replace(e.settings.helperRegister,function(t,i,n){var a=o(n),r=a[0],s=a[1],l=new Function(r.join(","),s);return e.register(i,l),t}).replace(e.settings.forstart,function(e,t,i,n){var i=i||"value",n=n&&n.substr(1),o="i"+a++;return"<% ~function() {for(var "+o+" in "+t+") {if("+t+".hasOwnProperty("+o+")) {var "+i+"="+t+"["+o+"];"+(n?"var "+n+"="+o+";":"")+" %>"}).replace(e.settings.forend,"<% }}}(); %>").replace(e.settings.ifstart,function(e,t){return"<% if("+t+") { %>"}).replace(e.settings.ifend,"<% } %>").replace(e.settings.elsestart,function(){return"<% } else { %>"}).replace(e.settings.elseifstart,function(e,t){return"<% } else if("+t+") { %>"}).replace(e.settings.noneencode,function(e,t){return i.__interpolate(t,!1,n)}).replace(e.settings.interpolate,function(e,t){return i.__interpolate(t,!0,n)}).replace(e.settings.inlinecomment,"").replace(e.settings.rangestart,function(e,t,i,n){var o="j"+a++;return"<% ~function() {for(var "+o+"="+i+";"+o+"<"+n+";"+o+"++) {{var "+t+"="+o+"; %>"}).replace(e.settings.include,function(e,t,i){return t.match(/^file\:\/\//gim)?e:"<%= _method.__juicer("+t+", "+i+"); %>"}),n&&n.errorhandling===!1||(t="<% try { %>"+t,t+='<% } catch(e) {_method.__throw("Juicer Render Exception: "+e.message);} %>'),t},this.__toNative=function(e,t){return this.__convert(e,!t||t.strip)},this.__lexicalAnalyze=function(t){var i=[],n=[],o="",a=["if","each","_","_method","console","break","case","catch","continue","debugger","default","delete","do","finally","for","function","in","instanceof","new","return","switch","this","throw","try","typeof","var","void","while","with","null","typeof","class","enum","export","extends","import","super","implements","interface","let","package","private","protected","public","static","yield","const","arguments","true","false","undefined","NaN"],r=function(e,t){if(Array.prototype.indexOf&&e.indexOf===Array.prototype.indexOf)return e.indexOf(t);for(var i=0;i<e.length;i++)if(e[i]===t)return i;return-1},s=function(t,o){if(o=o.match(/\w+/gim)[0],-1===r(i,o)&&-1===r(a,o)&&-1===r(n,o)){if("undefined"!=typeof window&&"function"==typeof window[o]&&window[o].toString().match(/^\s*?function \w+\(\) \{\s*?\[native code\]\s*?\}\s*?$/i))return t;if("undefined"!=typeof global&&"function"==typeof global[o]&&global[o].toString().match(/^\s*?function \w+\(\) \{\s*?\[native code\]\s*?\}\s*?$/i))return t;if("function"==typeof e.options._method[o]||e.options._method.hasOwnProperty(o))return n.push(o),t;i.push(o)}return t};t.replace(e.settings.forstart,s).replace(e.settings.interpolate,s).replace(e.settings.ifstart,s).replace(e.settings.elseifstart,s).replace(e.settings.include,s).replace(/[\+\-\*\/%!\?\|\^&~<>=,\(\)\[\]]\s*([A-Za-z_]+)/gim,s);for(var l=0;l<i.length;l++)o+="var "+i[l]+"=_."+i[l]+";";for(var l=0;l<n.length;l++)o+="var "+n[l]+"=_method."+n[l]+";";return"<% "+o+" %>"},this.__convert=function(e,t){var i=[].join("");return i+="'use strict';",i+="var _=_||{};",i+="var _out='';_out+='",i+=t!==!1?e.replace(/\\/g,"\\\\").replace(/[\r\t\n]/g," ").replace(/'(?=[^%]*%>)/g,"	").split("'").join("\\'").split("	").join("'").replace(/<%=(.+?)%>/g,"';_out+=$1;_out+='").split("<%").join("';").split("%>").join("_out+='")+"';return _out;":e.replace(/\\/g,"\\\\").replace(/[\r]/g,"\\r").replace(/[\t]/g,"\\t").replace(/[\n]/g,"\\n").replace(/'(?=[^%]*%>)/g,"	").split("'").join("\\'").split("	").join("'").replace(/<%=(.+?)%>/g,"';_out+=$1;_out+='").split("<%").join("';").split("%>").join("_out+='")+"';return _out.replace(/[\\r\\n]\\s+[\\r\\n]/g, '\\r\\n');"},this.parse=function(e,t){var o=this;return t&&t.loose===!1||(e=this.__lexicalAnalyze(e)+e),e=this.__removeShell(e,t),e=this.__toNative(e,t),this._render=new Function("_, _method",e),this.render=function(e,t){return t&&t===i.options._method||(t=n(t,i.options._method)),o._render.call(this,e,t)},this}},e.compile=function(e,t){t&&t===this.options||(t=n(t,this.options));try{var o=this.__cache[e]?this.__cache[e]:new this.template(this.options).parse(e,t);return t&&t.cache===!1||(this.__cache[e]=o),o}catch(a){return i("Juicer Compile Exception: "+a.message),{render:function(){}}}},e.to_html=function(e,t,i){return i&&i===this.options||(i=n(i,this.options)),this.compile(e,i).render(t,i._method)},"undefined"!=typeof module&&module.exports?module.exports=e:this.juicer=e}();var SpinningWheel={cellHeight:44,friction:.003,slotData:[],handleEvent:function(e){if("touchstart"==e.type)this.lockScreen(e),"sw-cancel"==e.currentTarget.id||"sw-done"==e.currentTarget.id?this.tapDown(e):"sw-frame"==e.currentTarget.id&&this.scrollStart(e);else if("touchmove"==e.type)this.lockScreen(e),"sw-cancel"==e.currentTarget.id||"sw-done"==e.currentTarget.id?this.tapUp(e):"sw-frame"==e.currentTarget.id&&this.scrollMove(e);else if("touchend"==e.type){if("sw-cancel"==e.currentTarget.id||"sw-done"==e.currentTarget.id)this.tapUp(e);else if("sw-frame"==e.currentTarget.id){this.scrollEnd(e);var t=this;setTimeout(function(){t.scrollEndAction.apply(t,[t.activeSlot])},100)}}else"webkitTransitionEnd"==e.type?"sw-wrapper"==e.target.id?this.destroy():this.backWithinBoundaries(e):"orientationchange"==e.type?this.onOrientationChange(e):"scroll"==e.type&&this.onScroll(e)},onOrientationChange:function(){window.scrollTo(0,0),this.swWrapper.style.top=window.innerHeight+window.pageYOffset+"px",this.calculateSlotsWidth()},onScroll:function(){this.swWrapper.style.top=window.innerHeight+window.pageYOffset+"px"},lockScreen:function(e){e.preventDefault(),e.stopPropagation()},reset:function(){this.slotEl=[],this.activeSlot=null,this.swWrapper=void 0,this.swSlotWrapper=void 0,this.swSlots=void 0,this.swFrame=void 0},calculateSlotsWidth:function(){for(var e=this.swSlots.getElementsByTagName("div"),t=0;t<e.length;t+=1)this.slotEl[t].slotWidth=e[t].offsetWidth},create:function(){var e,t,i,n,o;
for(this.reset(),o=document.createElement("div"),o.id="sw-wrapper",o.style.top=window.innerHeight+window.pageYOffset+"px",o.style.webkitTransitionProperty="-webkit-transform",o.innerHTML='<div id="sw-header"><div id="sw-cancel">取消</div><div id="sw-done">确定</div></div><div id="sw-slots-wrapper"><div id="sw-slots"></div></div><div id="sw-frame"></div>',document.body.appendChild(o),this.swWrapper=o,this.swSlotWrapper=document.getElementById("sw-slots-wrapper"),this.swSlots=document.getElementById("sw-slots"),this.swFrame=document.getElementById("sw-frame"),t=0;t<this.slotData.length;t+=1){n=document.createElement("ul"),i="";for(e in this.slotData[t].values){var a=this.slotData[t].values[e];i+='<li id="'+t+"_"+a+'LI">'+a+"</li>"}n.innerHTML=i,o=document.createElement("div"),o.className=this.slotData[t].style,o.appendChild(n),this.swSlots.appendChild(o),n.slotPosition=t,n.slotYPosition=0,n.slotWidth=0,n.slotMaxScroll=this.swSlotWrapper.clientHeight-n.clientHeight-86,n.style.webkitTransitionTimingFunction="cubic-bezier(0, 0, 0.2, 1)",this.slotEl.push(n),this.slotData[t].defaultValue&&this.scrollToValue(t,this.slotData[t].defaultValue)}this.calculateSlotsWidth(),document.addEventListener("touchstart",this,!1),document.addEventListener("touchmove",this,!1),window.addEventListener("orientationchange",this,!0),window.addEventListener("scroll",this,!0),document.getElementById("sw-cancel").addEventListener("touchstart",this,!1),document.getElementById("sw-done").addEventListener("touchstart",this,!1),this.swFrame.addEventListener("touchstart",this,!1)},open:function(){this.create(),this.swWrapper.style.webkitTransitionTimingFunction="ease-out",this.swWrapper.style.webkitTransitionDuration="350ms",this.swWrapper.style.webkitTransform="translate3d(0, -260px, 0)"},destroy:function(){this.swWrapper.removeEventListener("webkitTransitionEnd",this,!1),this.swFrame.removeEventListener("touchstart",this,!1),document.getElementById("sw-cancel").removeEventListener("touchstart",this,!1),document.getElementById("sw-done").removeEventListener("touchstart",this,!1),document.removeEventListener("touchstart",this,!1),document.removeEventListener("touchmove",this,!1),window.removeEventListener("orientationchange",this,!0),window.removeEventListener("scroll",this,!0),this.slotData=[],this.cancelAction=function(){return!1},this.cancelDone=function(){return!0},this.scrollEndAction=function(){return!1},this.reset(),document.body.removeChild(document.getElementById("sw-wrapper"))},close:function(){if("undefined"==typeof this.swWrapper)return!1;try{ScrollWheel.instanceOpen=!1}catch(e){}this.swWrapper.style.webkitTransitionTimingFunction="ease-in",this.swWrapper.style.webkitTransitionDuration="400ms",this.swWrapper.style.webkitTransform="translate3d(0, 0, 0)",this.swWrapper.addEventListener("webkitTransitionEnd",this,!1)},addSlot:function(e,t,i){t||(t=""),t=t.split(" ");for(var n=0;n<t.length;n+=1)t[n]="sw-"+t[n];t=t.join(" ");var o={values:e,style:t,defaultValue:i};this.slotData.push(o)},getSelectedValues:function(){for(var e,t,i,n,o=[],a=[],i=0;i<this.slotEl.length;i++){this.slotEl[i].removeEventListener("webkitTransitionEnd",this,!1),this.slotEl[i].style.webkitTransitionDuration="0",this.slotEl[i].slotYPosition>0?this.setPosition(i,0):this.slotEl[i].slotYPosition<this.slotEl[i].slotMaxScroll&&this.setPosition(i,this.slotEl[i].slotMaxScroll),e=-Math.round(this.slotEl[i].slotYPosition/this.cellHeight),t=0;for(n in this.slotData[i].values){if(t==e){o.push(n),a.push(this.slotData[i].values[n]);break}t+=1}}return{keys:o,values:a}},getSlotValue:function(e){if(0>e||e>=this.slotEl.length)return{keys:null,values:null};var t,i=[],n=[];return t=-Math.round(this.slotEl[e].slotYPosition/this.cellHeight),t+=1,i.push(t),n.push(this.slotData[e].values[t]),{keys:i,values:n}},hideSlotValuesAfter:function(e,t,i){if("undefined"==typeof i||null==i)return console.log("did you forget to pass the length of this slot to hideSlotValuesAfter?"),!1;t++;for(var n=null;i>=t;)n=document.getElementById(e+"_"+t+"LI"),n&&this.slotEl[e].removeChild(n),t+=1;this.slotEl[e].slotMaxScroll=this.swSlotWrapper.clientHeight-this.slotEl[e].clientHeight-86,n=null},showSlotValuesAfter:function(e,t,i){if("undefined"==typeof i||null==i)return console.log("did you forget to pass the length of this slot to showSlotValuesAfter?"),!1;for(t++;i>=t;){var n=document.getElementById(e+"_"+t+"LI");if("undefined"==typeof n||null==n){var o=document.createElement("LI");o.id=e+"_"+t+"LI",o.textContent=t,this.slotEl[e].appendChild(o),o=null}t+=1}this.slotEl[e].slotMaxScroll=this.swSlotWrapper.clientHeight-this.slotEl[e].clientHeight-86,thisSlot=null},setPosition:function(e,t){this.slotEl[e].slotYPosition=t,this.slotEl[e].style.webkitTransform="translate3d(0, "+t+"px, 0)"},scrollStart:function(e){for(var t=e.targetTouches[0].clientX-this.swSlots.offsetLeft,i=0,n=0;n<this.slotEl.length;n+=1)if(i+=this.slotEl[n].slotWidth,i>t){this.activeSlot=n;break}if(this.slotData[this.activeSlot].style.match("readonly"))return this.swFrame.removeEventListener("touchmove",this,!1),this.swFrame.removeEventListener("touchend",this,!1),!1;this.slotEl[this.activeSlot].removeEventListener("webkitTransitionEnd",this,!1),this.slotEl[this.activeSlot].style.webkitTransitionDuration="0";var o=window.getComputedStyle(this.slotEl[this.activeSlot]).webkitTransform;return o=new WebKitCSSMatrix(o).m42,o!=this.slotEl[this.activeSlot].slotYPosition&&this.setPosition(this.activeSlot,o),this.startY=e.targetTouches[0].clientY,this.scrollStartY=this.slotEl[this.activeSlot].slotYPosition,this.scrollStartTime=e.timeStamp,this.swFrame.addEventListener("touchmove",this,!1),this.swFrame.addEventListener("touchend",this,!1),!0},scrollMove:function(e){var t=e.targetTouches[0].clientY-this.startY;(this.slotEl[this.activeSlot].slotYPosition>0||this.slotEl[this.activeSlot].slotYPosition<this.slotEl[this.activeSlot].slotMaxScroll)&&(t/=2),this.setPosition(this.activeSlot,this.slotEl[this.activeSlot].slotYPosition+t),this.startY=e.targetTouches[0].clientY,e.timeStamp-this.scrollStartTime>80&&(this.scrollStartY=this.slotEl[this.activeSlot].slotYPosition,this.scrollStartTime=e.timeStamp)},scrollEnd:function(e){if(this.swFrame.removeEventListener("touchmove",this,!1),this.swFrame.removeEventListener("touchend",this,!1),this.slotEl[this.activeSlot].slotYPosition>0||this.slotEl[this.activeSlot].slotYPosition<this.slotEl[this.activeSlot].slotMaxScroll)return this.scrollTo(this.activeSlot,this.slotEl[this.activeSlot].slotYPosition>0?0:this.slotEl[this.activeSlot].slotMaxScroll),!1;var t=this.slotEl[this.activeSlot].slotYPosition-this.scrollStartY;if(t<this.cellHeight/1.5&&t>-this.cellHeight/1.5)return this.slotEl[this.activeSlot].slotYPosition%this.cellHeight&&this.scrollTo(this.activeSlot,Math.round(this.slotEl[this.activeSlot].slotYPosition/this.cellHeight)*this.cellHeight,"100ms"),!1;var i=e.timeStamp-this.scrollStartTime,n=2*t/i/this.friction,o=this.friction/2*n*n;0>n&&(n=-n,o=-o);var a=this.slotEl[this.activeSlot].slotYPosition+o;return a>0?(a/=2,n/=3,a>this.swSlotWrapper.clientHeight/4&&(a=this.swSlotWrapper.clientHeight/4)):a<this.slotEl[this.activeSlot].slotMaxScroll?(a=(a-this.slotEl[this.activeSlot].slotMaxScroll)/2+this.slotEl[this.activeSlot].slotMaxScroll,n/=3,a<this.slotEl[this.activeSlot].slotMaxScroll-this.swSlotWrapper.clientHeight/4&&(a=this.slotEl[this.activeSlot].slotMaxScroll-this.swSlotWrapper.clientHeight/4)):a=Math.round(a/this.cellHeight)*this.cellHeight,this.scrollTo(this.activeSlot,Math.round(a),Math.round(n)+"ms"),!0},scrollTo:function(e,t,i){this.slotEl[e].style.webkitTransitionDuration=i?i:"100ms",this.setPosition(e,t?t:0),(this.slotEl[e].slotYPosition>0||this.slotEl[e].slotYPosition<this.slotEl[e].slotMaxScroll)&&this.slotEl[e].addEventListener("webkitTransitionEnd",this,!1)},scrollToValue:function(e,t){var i,n,o;this.slotEl[e].removeEventListener("webkitTransitionEnd",this,!1),this.slotEl[e].style.webkitTransitionDuration="0",n=0;for(o in this.slotData[e].values){if(o==t){i=n*this.cellHeight,this.setPosition(e,i);break}n-=1}},backWithinBoundaries:function(e){return e.target.removeEventListener("webkitTransitionEnd",this,!1),this.scrollTo(e.target.slotPosition,e.target.slotYPosition>0?0:e.target.slotMaxScroll,"150ms"),!1},tapDown:function(e){e.currentTarget.addEventListener("touchmove",this,!1),e.currentTarget.addEventListener("touchend",this,!1),e.currentTarget.className="sw-pressed"},tapCancel:function(e){e.currentTarget.removeEventListener("touchmove",this,!1),e.currentTarget.removeEventListener("touchend",this,!1),e.currentTarget.className=""},tapUp:function(e){this.tapCancel(e),"sw-cancel"==e.currentTarget.id?this.cancelAction():this.doneAction(),this.close()},setCancelAction:function(e){this.cancelAction=e},setDoneAction:function(e){this.doneAction=e},setSlotScrollEndAction:function(e){this.scrollEndAction=e},cancelAction:function(){return!1},cancelDone:function(){return!0},scrollEndAction:function(){return!1}},ScrollWheel=function(e){this.closeCallback=e.closeCallback,"date"===e.type.toLowerCase()?this.showDatePicker(e):"time"===e.type.toLowerCase()?this.showTimePicker(e):"custom"===e.type.toLowerCase()&&this.showCustomPicker(e);var t=this;SpinningWheel.setDoneAction(function(){t.done.apply(t)}),SpinningWheel.setCancelAction(function(){ScrollWheel.instanceOpen=!1,SpinningWheel.close()})};ScrollWheel.instanceOpen=!1,ScrollWheel.prototype.showTimePicker=function(e){if(ScrollWheel.instanceOpen)return!1;ScrollWheel.instanceOpen=!0;var t={},i={},n={0:"AM",1:"PM"},o=1;for(o=1;13>o;o++)t[o]=10>o?"0"+o:o;for(o=0;60>o;o++)i[o]=10>o?"0"+o:o;var a=new Date,r=a.getHours(),s=a.getMinutes(),l=12>r?0:1;if(r>12&&(r-=12),a=null,""!=e.value){var c=e.value.split(":");r=c[0],0==r.indexOf("0")&&(r=r.charAt(1)),s=c[1].split(" ")[0],0==s.indexOf("0")&&(s=s.charAt(1)),l="AM"===c[1].split(" ")[1].toUpperCase()?0:1,c=null}SpinningWheel.addSlot(t,"shrink",r),SpinningWheel.addSlot(i,"shrink",s),SpinningWheel.addSlot(n,"shrink",l),SpinningWheel.open(),t=null,i=null,seconds=null},ScrollWheel.prototype.showCustomPicker=function(e){if(ScrollWheel.instanceOpen)return!1;ScrollWheel.instanceOpen=!0;for(var t="",i=0;i<e.slotData.length;i++)e.defaultValue.length>i&&(t=e.defaultValue[i]),SpinningWheel.addSlot(e.slotData[i],"shrink",t);SpinningWheel.open()},ScrollWheel.prototype.showDatePicker=function(e){if(ScrollWheel.instanceOpen)return!1;ScrollWheel.instanceOpen=!0;var t=1990,i=1,n=1,o=0,a=0;if("function"==typeof e.defaultValue){var r=e.defaultValue();if(r){var s=r.split("-");t=parseInt(s[0],10),i=parseInt(s[1],10),n=parseInt(s[2],10)}}if(e.minValue){var l=e.minValue.split("-");o=parseInt(l[0],10)}if(e.maxValue){var c=e.maxValue.split("-");a=parseInt(c[0],10)}for(var d=new Date,u={},h={},p={},f=o||d.getFullYear()-100,m=a||d.getFullYear()+1,g=f;m>=g;g+=1)h[g]=g;for(var v=1;12>=v;v+=1)p[v]=v;var $=(new Date).getMonth()+1,w=31;if(4==$||6==$||9==$||11==$)w=30;else if(2==$){w=28;var y=(new Date).getFullYear();(y%4==0&&y%100!=0||y%400==0)&&(w=29)}for(var S=1;w>=S;S+=1)u[S]=S;SpinningWheel.addSlot(h,"center",t),SpinningWheel.addSlot(p,"center",i),e.noDays||(SpinningWheel.addSlot(u,"center",n),SpinningWheel.setSlotScrollEndAction(this.updateDates)),SpinningWheel.open(),d=null,u=null,p=null,h=null},ScrollWheel.prototype.done=function(){ScrollWheel.instanceOpen=!1;var e=SpinningWheel.getSelectedValues();this.closeCallback(e.values),e=null},ScrollWheel.prototype.updateDates=function(e){var t=null,i=null,n=null;if(0===e){if(t=SpinningWheel.getSlotValue(0),t&&t.keys&&t.values){n=SpinningWheel.getSlotValue(2);var o=SpinningWheel.getSlotValue(1);if(!o||!o.keys)return;2===o.keys[0]&&(t.keys[0]%4===0?(SpinningWheel.showSlotValuesAfter(2,28,29),parseInt(n.keys[0],10)>29&&SpinningWheel.scrollToValue(2,29),SpinningWheel.hideSlotValuesAfter(2,29,31)):(parseInt(n.keys[0],10)>28&&SpinningWheel.scrollToValue(2,28),SpinningWheel.hideSlotValuesAfter(2,28,31)))}}else 1===e&&(t=SpinningWheel.getSlotValue(1),t&&t.keys&&t.values&&(i=t.keys,n=SpinningWheel.getSlotValue(2),2===i[0]?(t=SpinningWheel.getSlotValue(0),t.keys[0]%4===0?(parseInt(n.keys[0],10)>29&&SpinningWheel.scrollToValue(2,29),SpinningWheel.hideSlotValuesAfter(2,29,31)):(parseInt(n.keys[0],10)>28&&SpinningWheel.scrollToValue(2,28),SpinningWheel.hideSlotValuesAfter(2,28,31))):1===i[0]||3===i[0]||5===i[0]||7===i[0]||8===i[0]||10===i[0]||12===i[0]?SpinningWheel.showSlotValuesAfter(2,28,31):(4===i[0]||6===i[0]||9===i[0]||11===i[0])&&(SpinningWheel.showSlotValuesAfter(2,28,30),parseInt(n.keys[0],10)>30&&SpinningWheel.scrollToValue(2,30),SpinningWheel.hideSlotValuesAfter(2,30,31)),n=null),t=null)};var $GH=function(e){window.NoFind=function(e){var t=event.srcElement;t.src=e,t.onerror=null},window.historyState=function(){var e={};if(history.state instanceof Object)for(var t in history.state)e[t]={value:history.state[t],writable:!0,configurable:!0,enumerable:!0};e.length={get:function(){return Object.keys(i).length},set:function(){return this.length}};var i=Object.create({getItem:function(e){return history.state instanceof Object||history.replaceState({},null),this[e]},setItem:function(e,t){history.state instanceof Object||history.replaceState({},null),this[e]=t,history.replaceState(this,null)},removeItem:function(e){history.state instanceof Object||history.replaceState({},null),delete this[e],history.replaceState(this,null)},clear:function(){for(var e in this)this.hasOwnProperty(e)&&delete this[e];history.replaceState({},null)}},e);return i}();return e.extend(e,{getUrlParams:function(e){var t={},i=location.href,n=i.indexOf("?");if(-1!==n){var o=i.substring(i.indexOf("?")+1);o=o.split("&");for(var a=0;a<o.length;a++){var r=o[a];r=r.split("="),t[r[0]]=decodeURIComponent(r[1])}return e?t[e]:t}}}),e.extend(e.fn,{countdown:function(t,i,n){n=n||"";var o=e(this[0]).html(n.replace(/time/g,i)),a=setInterval(function(){--i?o.html(n.replace(/time/g,i)):(clearInterval(a),t.call(o))},1e3)},serializeToObj:function(){var t={},i=this.serializeArray();return e.each(i,function(){t[this.name]?(t[this.name].push||(t[this.name]=[t[this.name]]),t[this.name].push(this.value||"")):t[this.name]=this.value||""}),t},dropdownSheet:function(t,i){return e(this).each(function(){var n=e(this),o=n.find("select"),a=n.find("input"),r=[],s=function(e){return e.hasClass("unselect")?($GH.alert("本院不支持护照！"),this.close(),!1):(o.val(e.attr("data-value")).trigger("change"),"function"==typeof i&&i(o),void this.close())};a.val(e.trim(o.find("option:selected").text())),o.on("change",function(){return a.val(e.trim(o.find("option:selected").text())),!1}),o.find("option").each(function(){var t=e(this);t.text()&&r.push({name:e.trim(t.text()),value:t.val(),styleClass:t.attr("class")?t.attr("class")+" option":"option",fn:s})}),o.find("option").length>4?n.off("click").on("click",function(e){return $GH.hideKeyboard(),e.preventDefault(),e.stopImmediatePropagation(),$GH.MultiOptions.init(o.attr("data-title"),r,t).open(),!1}):(t&&(t.styleClass||(t.styleClass="gbn gbt-pri"),r.push(t)),r.push({name:"取消",styleClass:"cancel",fn:function(){this.close()}}),n.off("click").on("click",function(e){return $GH.hideKeyboard(),e.stopPropagation(),new $GH.ActionSheet(o.attr("data-title"),r).open(),!1}))})},timepicker:function(t){if(this.length){var i=e.extend({},{defaultValue:function(){var e=new Date,t=e.getFullYear()+"-"+(e.getMonth()+1)+"-"+e.getDate();return t},minValue:"",maxValue:"",onSelect:function(){return!0}},t),n=null,o=function(e){i.onSelect(e),n=null};e(this).on("click",function(){return n=new ScrollWheel({minValue:i.minValue,maxValue:i.maxValue,defaultValue:i.defaultValue,closeCallback:o,noDays:i.noDays,type:"date"}),!1})}}}),{hideKeyboard:function(){document.activeElement.blur(),e("input，textarea").blur()},getQuery:function(e){return(e||document.location.search).replace(/(^\?)/,"").split("&").map(function(e){return e=e.split("="),this[e[0]]=e[1],this}.bind({}))[0]},genDate:function(e){return(e.getMonth()+1<10?"0"+(e.getMonth()+1):e.getMonth()+1)+"-"+(e.getDate()<10?"0"+e.getDate():e.getDate())+" "+(e.getHours()<10?"0"+e.getHours():e.getHours())+":"+(e.getMinutes()<10?"0"+e.getMinutes():e.getMinutes())+":"+(e.getSeconds()<10?"0"+e.getSeconds():e.getSeconds())},getTime:function(e,t){var i="number"==typeof t||t instanceof Date?new Date(t):new Date,n={y:i.getFullYear(),m:i.getMonth()+1,d:i.getDate(),h:i.getHours(),i:i.getMinutes(),s:i.getSeconds()};for(var o in n)n[o.toUpperCase()]=(n[o]<10?"0":"")+n[o];if(n.w=i.getDay(),n.W="日一二三四五六".substr(n.w,1),n.timestamp=i.getTime(),n.date=i,"string"==typeof e){for(var o in n)e=e.replace(new RegExp("("+o+")","g"),function(e,t){return n[t]});return e}return n},compileTmpl:function(e,t){var i=/<%=this\.([^%>]+)%>/g;return e.replace(i,function(){return t&&t[arguments[1]]||""})},monitor:{link:function(e,t){return(new Image).src=$GLog.url+"lt=1&from="+encodeURIComponent(location.href)+"&to="+encodeURIComponent(e)+"&mod="+t+"&info="+$GLog.loginId+"~|~"+$GLog.perSessiionId+"~|~"+$GLog.shortSessionId+"&_="+(new Date).getTime(),!0},action:function(e){return(new Image).src=$GLog.url+"lt=2&page="+encodeURIComponent(location.href)+"&action="+e+"&info="+$GLog.loginId+"~|~"+$GLog.perSessiionId+"~|~"+$GLog.shortSessionId+"&_="+(new Date).getTime(),!0},info:function(e,t){return(new Image).src=$GLog.url+"lt=3&page="+encodeURIComponent(location.href)+"&code="+t+"&msg="+encodeURIComponent(e)+"&info="+$GLog.loginId+"~|~"+$GLog.perSessiionId+"~|~"+$GLog.shortSessionId+"&_="+(new Date).getTime(),!0},trackSource:function(){var t=e.getUrlParams("trackSource")||e.getUrlParams("_f");t&&$GH.cookie.set("_track_source",t,1)}},logs:function(t,i,n,o){var a=$GLog.url,r=new Image,s=document.referrer;""!=$GLog.referurl&&(s=$GLog.referurl);try{a+="referurl="+encodeURIComponent(s),a+="&userAgent="+encodeURIComponent($GLog.userAgent),a+="&hostname="+encodeURIComponent($GC.guahaoServer),a+="&loginId="+encodeURIComponent($GLog.loginId),a+="&per_sessionid="+encodeURIComponent($GLog.perSessiionId),a+="&short_sessionId="+encodeURIComponent($GLog.shortSessionId),"0"==t?(a+="&protocol="+encodeURIComponent(window.location.protocol),a+="&method="+encodeURIComponent($GLog.requestMethod),null!=e("#succode").val()&&(o=e("#succode").val(),a+="&succode="+o,1==o&&"order"==e("#pageId").val()&&(a+="&hid="+e("#hid").val(),a+="&did="+e("#did").val(),a+="&eid="+e("#eid").val(),a+="&orderId="+e("#orderId").val()))):"1"==t?(a+="&protocol=ajax&url="+encodeURIComponent(i),a+="&method="+encodeURIComponent(n),a+="&succode="+o):"2"==t&&(a+="&protocol="+encodeURIComponent("popup")+"&clickId="+encodeURIComponent(i)),r.src=a+"&sign="+(new Date).getTime()}catch(l){r.src=a+"&sign="+(new Date).getTime()+"&e="+l.message}},locate:function(t){function i(i,n){if(o)return!1;o=!0;var a=$GC.serviceServer+"/location/get",r={provinceId:"all",cityId:"all",province:"全国",city:"不限"};i&&n&&(a+="?latitude="+i+"&longitude="+n),e.ajax({type:"get",dataType:"json",cache:!1,url:a,success:function(e){e.success&&e.data&&(r=e.data)},complete:function(){$GH.loading.hide(),$GH.cookie.set("_locs",r.provinceId+"_"+r.cityId+"||"+encodeURIComponent(r.province)+"_"+encodeURIComponent(r.city),i&&n?7:1),t.call(null,r)}})}var n=$GH.cookie.get("_locs"),o=!1;if($GH.loading.show(),n){var n=n.split("||"),a=n[0].split("_"),r=n[1].split("_");$GH.loading.hide(),t.call(null,{provinceId:a[0],cityId:a[1],province:decodeURIComponent(r[0]),city:decodeURIComponent(r[1])})}else{if($GH.env.isDHB()){var s=nativeEntry.init();s.geolocation.geo(function(e){i(e.latitude,e.longitude)})}else $GH.env.isWeixin()?wx.ready(function(){wx.getLocation({success:function(e){i(e.latitude,e.longitude)},fail:function(){i()}})}):navigator&&navigator.geolocation&&navigator.geolocation.getCurrentPosition?navigator.geolocation.getCurrentPosition(function(e){i(e.coords.latitude,e.coords.longitude)},function(){i()},{enableHighAccuracy:!0,timeout:5e3,maximumAge:0}):i();setTimeout(function(){o||i()},6e3)}},alTmpl:function(e,t){var i=document.createElement("div"),n=alight.Scope();return i.innerHTML=e,n.data=t,alight.applyBindings(n,i),i.innerHTML},smartStr:function(e,t){return e.length>t?e.substr(0,t)+"...":e},maskStr:function(e,t,i){return i||(i=e.length),e.substring(0,t-1)+e.substring(t-1,i).replace(/./g,"*")+e.substring(i)},cookie:{set:function(e,t,i,n){var o=new Date;o.setTime(o.getTime()+24*i*60*60*1e3);var a="expires="+o.toGMTString();n="path="+(n||"/"),document.cookie=e+"="+t+"; "+a+";"+n},get:function(e){if(document.cookie.length>0){var t=document.cookie.indexOf(e+"=");if(-1!==t){t=t+e.length+1;var i=document.cookie.indexOf(";",t);return-1===i&&(i=document.cookie.length),document.cookie.substring(t,i)}}return""}},touchSlider:function(t,i){function n(e){$=!0;var t=Math.abs(u)/y,i=t>a.slidePercent?"0px":y*e+"px",n=w?{top:i}:{left:i},o=-y*e+"px",r=w?{top:o}:{left:o};s.eq(h+e).animate(n,250,function(){t>a.slidePercent?(s.eq(h).css(r).css("opacity",""),s.eq(h+e).css({transition:"","z-index":600}),h+=e,a.onMoveEnd(h)):s.eq(h).css("opacity",""),$=!1})}function o(e,t){s.eq(h).css("opacity",1-Math.abs(u)/y),s.eq(e).css(w?"top":"left",t+"px").css({"z-index":1e3})}e(document).on("touchmove",function(e){e.preventDefault()});var a=e.extend({},{direction:"h",slidePercent:.3,itemSelector:"div",onMoveEnd:function(){},index:0},i||{}),r=e(t),s=r.find(a.itemSelector),l=r.css("position"),c=r.height(),d=r.width(),u=0,h=a.index,p=0,f=!1,m=!1,g=!1,v=!1,$=!1,w="v"===a.direction,y=w?c:d;return"absolute"===l||"fixed"===l||r.css({position:"relative"}),s.each(function(e){s.eq(e).css({position:"absolute",top:w?c+"px":0,left:a.index>e?-(w?0:d)+"px":w?0:d+"px","z-index":"600"})}),s.eq(a.index).css(w?"top":"left",0),r.on("touchstart",function(e){var t=e.touches[0];p=w?t.clientY:t.clientX,u=0,f=!1,m=!1,g=!1,v=!1}).on("touchmove",function(e){var t=e.touches[0],i=w?t.clientY:t.clientX,n=i-p,a=0,r=0;u+=n,0>n&&!$&&(v=h!==s.length-1||f?!1:!0,f?(r=-y+u,a=0===h?h:h-1,o(a,r)):h===s.length-1||g||(r=y+u,a=h+1,o(a,r),m=!0)),n>0&&!$&&(g=0!==h||m?!1:!0,m?(r=y+u,a=h===s.length-1?h:h+1,o(a,r)):0===h||v||(r=-y+u,a=h-1,f=!0,o(a,r))),p=i}).on("touchend",function(){m&&n(1),f&&n(-1)}),this},iScroll:function(t,i,n){if(0==e("#gh").length&&e(t).parent().length>0){var o=e(t).parent();if("J_MultiOptions_Div"==o.attr("id")){var a=o.find("h3").text();null!=a&&""!=a&&(i.top=o.find("h3").height())}}i.top=(i.top||0)+e("#gh").height(),i.bottom=(i.bottom||0)+e("#gf").height();var r=e.extend({},{position:"absolute",left:0,top:0,bottom:0,zIndex:1,width:"100%",overflow:"hidden",display:"block"},i||{});return n=e.extend({},{scrollbars:!0,fadeScrollbars:!0,shrinkScrollbars:"scale",mouseWheel:!0,click:!0,tap:"iscrollTap"},n),e(t).css(r),window.IScroll?new window.IScroll(t,n):void 0},module:function(t,i){var n=e(t);if(n.length>0){var o=alight.Scope();i.call(this,n,o),alight.applyBindings(o,n[0])}},Wrapper:function(t){var i=document.body.scrollHeight>window.screen.availHeight?document.body.scrollHeight+"px":window.screen.availHeight+"px";this.config=e.extend({},{zIndex:100,opacity:.5,width:"100%",height:i,top:0,background:"#000"},t||{}),this.$wrapper=e("#J_wrapper").length>0?e("#J_wrapper"):function(){return e("body").append(e('<div id="J_wrapper"></div>')),e("#J_wrapper")}(),e.extend($GH.Wrapper.prototype,{show:function(t){var i=this;return e("body").css("overflow","hidden"),e(document).on("ontouchstart",function(e){e.preventDefault()}).on("touchmove",function(e){e.preventDefault()}),i.$wrapper.css({position:"absolute",opacity:0,background:i.config.background,zIndex:i.config.zIndex,top:i.config.top,width:i.config.width,height:i.config.height}).animate({opacity:i.config.opacity},100,function(){e.isFunction(t)&&t.call(i)}),i.$wrapper},close:function(){this.$wrapper.remove(),e(document).off("ontouchstart").off("touchmove"),e("body").css("overflow","auto")}})},MultiOptions:{init:function(t,i,n){var o=this;return o.title=t,o.buttons=i,o.actionBtn=n,o.$wrapper=new $GH.Wrapper,o.$wrapper.$wrapper.on("click",function(){o.close()}),o.$container=o.$container?o.$container:function(){return e('<div id="J_MultiOptions_Div" class="g-multi-opts"><h3></h3><div id="J_MultiOptions_Scroller"><div class="options J_Options"></div></div></div>').appendTo(e("body"))}(),o},_createButtons:function(){var t=this;if(!e.isArray(t.buttons)||0===t.buttons.length)throw"plz set buttonArray";t.title&&""!==t.title?t.$container.find("h3").text(t.title).show():t.$container.find("h3").hide(),t.$container.find(".action-btn").remove(),t.actionBtn&&e('<a href="javascript:;" class="action-btn '+(t.actionBtn.styleClass?t.actionBtn.styleClass:"gbn gbt-pri")+'" data-value="'+(t.actionBtn.value?t.actionBtn.value:"")+'">'+t.actionBtn.name+"</a>").appendTo(t.$container).on("click",function(){t.actionBtn.fn.call(t,e(this))});var i=t.$container.find(".J_Options").empty();e.each(t.buttons,function(n,o){var a=o.value?o.value:"";e('<a href="javascript:;" class="'+o.styleClass+'" data-value="'+a+'">'+o.name+"</a>").appendTo(i).on("iscrollTap",function(){o.fn.call(t,e(this))})}),t.$container.css({left:"100%"}).animate({left:"25%",width:"75%",boxShadow:"-1px 1px 5px #999"},200,function(){t.subScroll?(t.subScroll.refresh(),t.subScroll.scrollTo(0,0,200)):t.subScroll=$GH.iScroll("#J_MultiOptions_Scroller",{bottom:t.actionBtn?t.$container.find(".action-btn").height()+20:0,zIndex:999})})},open:function(){var e=this;e.$wrapper.show(function(){e._createButtons()})},close:function(){var e=this;e.$container.animate({left:"100%"},200,function(){e.$wrapper.close()})}},ActionSheet:function(t,i){var n=this;n.title=t,n.buttons=i,n.$wrapper=new $GH.Wrapper,n.$wrapper.$wrapper.on("click",function(){n.close()}),this.$ul=e("#J_ActionSheet_ul").length>0?e("#J_ActionSheet_ul"):function(){return n.$wrapper.$wrapper.before(e('<ul id="J_ActionSheet_ul" class="g-actionsheet"></ul>')),e("#J_ActionSheet_ul")}(),e.extend($GH.ActionSheet.prototype,{_createButtons:function(){var t=this;if(!e.isArray(t.buttons)||0===t.buttons.length)throw"plz set buttonArray";t.$ul.css({position:"fixed",zIndex:9999,visibility:"hidden",bottom:0}),t.title&&""!==t.title&&t.$ul.append('<li class="title">'+t.title+"</li>"),e.each(t.buttons,function(i,n){t.$ul.append('<li><a href="javascript:;" class="J_ASBtn_'+i+" "+(n.styleClass?n.styleClass:"")+'" data-value="'+(n.value?n.value:"")+'">'+n.name+"</a></li>"),e(".J_ASBtn_"+i).on("click",function(){n.fn.call(t,e(this))})}),t.$ul.css({bottom:-t.$ul.height()}).animate({bottom:0,visibility:"visible"},100)},open:function(){var e=this;e.$wrapper.show(function(){e._createButtons()})},close:function(){var e=this;e.$wrapper.close(),e.$ul.remove()}})},botFilter:function(t,i,n){function o(){var e=t.find(".J_Menu").index(a.menu);r.show(),t.find(".J_Menu_Link").removeClass("on"),t.find(".J_Menu").removeClass("on").removeClass("open"),t.find(".J_Menu:eq("+e+")").addClass("on").addClass("open"),t.find(".J_Nav").hide(),t.find(".J_Nav:eq("+e+")").show(),n&&n.call(null,e)}if(t.length){var a=this,r=e(".g-mask").length?e(".g-mask"):e('<div class="g-mask"></div>').appendTo("body").hide();t.find(".J_Nav").css("max-height",e(window).height()-50+"px");var s=a.close=function(){r.hide(),t.find(".J_Nav").hide(),t.find(".J_Menu").removeClass("open")};r.on("click",function(){return s(),!1}),t.on("click",".J_Menu",function(){return a.menu=e(this),a.menu.hasClass("open")?s():o(),!1}),i.call(null,a)}},ImageUploader:function(t,i){var n=function(t,i){var n=this;if(n.config=e.extend({},{inputName:"img",onlySlider:!1,uploadBtn:".J_UploadBtn",fileInput:".J_FileInput",prevClass:"preview",uploaderUrl:"/mockup/image-uploader.json",deleteUrl:"/mockup/image-del.json",afterUpload:!1,limitSize:5,limitNum:9,beforeComplete:function(){},afterComplete:function(){},afterDelete:function(){}},i),n.file=null,n.$controller=t,n.$uploadBtn=t.find(n.config.uploadBtn),n.$fileInput=t.find(n.config.fileInput),n.$uploadBtn.css({overflow:"hidden"}),n.$uploadBtn.on("click",function(){n.$fileInput.focus()}),n.$uploadBtn.siblings("."+n.config.prevClass).on("click",function(){n.sliderShow(parseInt(e(this).data("index"),10))}),n.config.onlySlider){var o=n.$controller.find("."+n.config.prevClass);e.each(o,function(e,t){t===n.config.onlySlider&&n.sliderShow(e)})}return n.config.onlySlider?void 0:n.selected()};return e.extend(n.prototype,{selected:function(){function t(t){var n=e("<img>"),o=(new Date).getTime();return t.length/1024/1400>=i.config.limitSize?($GH.alert("上传文件太大"),void i.$fileInput.val("")):(i.$uploadBtn.hasClass("small")&&n.addClass("small"),i.$uploadBtn.addClass("loading"),i.config.beforeComplete.call(i),e.ajax({type:"post",url:i.config.uploaderUrl,data:{photo:t},dataType:"json",cache:!1,success:function(t){var a=i.config.inputName+"_"+o;if(t.hasError)return void $GH.alert(t.message);if(e.isFunction(i.config.afterUpload))return i.config.afterUpload.call(i,t);var r=t.map.medicalRecordImgPath||t.map.imageServerPath+"/"+t.map.path;n[0].src=r,i.$uploadBtn.before(n.addClass(i.config.prevClass).addClass(a)),i.$uploadBtn.before('<input type="hidden" name="'+i.config.inputName+'" class="'+a+'" value="'+t.map.sourcePath+'" data-imageNameNotSuf="'+t.map.imageNameNotSuf+'">'),n.on("click",function(){e.each(i.$uploadBtn.siblings("."+i.config.prevClass),function(e,t){t.src===r&&i.sliderShow(e)})})},complete:function(){i.$uploadBtn.removeClass("loading"),i.config.afterComplete.call(i)}}),void i.$fileInput.val(""))}var i=this;return $BG.adaptNative({method:"chooseImage",successCallback:function(e){i.$uploadBtn.on("click",function(){return e.callNative("chooseImage",{maxWidth:960,maxHeight:960,maxSize:2048},function(e){e&&e.image&&t(e.image)}),!1})},failCallback:function(){i.$fileInput.on("change",function(e){var n=i.file=e.target.files[0];if(i.$uploadBtn.siblings("."+i.config.prevClass).length>=i.config.limitNum)return $GH.alert("最多可上传: "+i.config.limitNum+"张"),void i.$fileInput.val("");if(i.file)if($GH.env.isIos())canvasResize(n,{width:640,crop:!1,callback:function(e){t(e)}});else{var o=new FileReader;o.onloadend=function(e){t(e.target.result)},o.readAsDataURL(i.file)}})}}),i},sliderRest:function(t,i){var n=this;n.$slider=e("#J_ImageSlider").length>0?e("#J_ImageSlider"):function(){return e("body").append(e('<div id="J_ImageSlider"></div>')),e("#J_ImageSlider")}(),n.$slider.html(""),e.each(n.$controller.find("img."+n.config.prevClass),function(i,o){var a,r=e("<canvas/>"),s=o.classList[o.classList.length-1],l=e('<div class="'+s+' g-img-loading"/>'),c=new Image;a=r[0].getContext("2d"),c.onload=function(){var e=c.width,t=c.height,i=window.screen.availWidth;e>i?(r[0].width=i,r[0].height=t*(i/e)):(r[0].width=e,r[0].height=t),a.drawImage(c,0,0,r[0].width,r[0].height)},e(c).one("load",function(){l.removeClass("g-img-loading")}).attr("src",-1!==o.src.indexOf("small")?o.src.replace("small","large"):o.src),l.css({paddingTop:"5%",height:"90%"}),l.append(r),l.append('<p>                <a href="javascript:;" class="J_Image_Del" data-cname="'+s+'">删除</a>                <a href="javascript:;" class="J_Slider_Close" data-cname="'+s+'">关闭</a>              </p>'),l.find("p").css({position:"absolute",bottom:0,width:"100%"}).find("a").css({color:"#ccc",display:"inline-block",width:"35%",boxShadow:"0 0 5px #000",border:"1px solid #444",padding:"5px 0",background:"#000"}),l.css({width:"100%",textAlign:"center"}),n.$slider.append(l),t.$wrapper.one("click",function(){n.$wrapper.close(),n.$slider.remove()})}),n.config.onlySlider&&e(".J_Image_Del").hide(),$GH.touchSlider("#"+n.$slider[0].id,{direction:"h",itemSelector:"div",slidePercent:.2,index:i})},sliderShow:function(t){var i=this;return i.$wrapper=new $GH.Wrapper({zIndex:200,overflow:"hidden",opacity:.8}),0===i.$controller.find("."+i.config.prevClass).length?void i.$wrapper.close():(i.$slider=e("#J_ImageSlider").length>0?e("#J_ImageSlider"):function(){return e("body").append(e('<div id="J_ImageSlider"></div>')),e("#J_ImageSlider")}(),void i.$wrapper.show(function(){var n=this;i.$slider.css({position:"absolute",top:document.body.scrollTop>0?document.body.scrollTop:0,left:0,width:"100%",height:"90%",overflow:"hidden",display:"block"}),i.sliderRest(n,t),e(".J_Image_Del").on("click",function(){{var t=e(this).data("cname");
e(this)}e.isFunction(i.config.onDelete)&&i.config.onDelete.call(i,t),e("."+t).find("canvas").animate({scale:"0.1, 0.1"},200,function(){e("."+t).remove(),i.$slider.remove(),i.$wrapper.close()}),i.config.afterDelete.call(i)}),e(".J_Slider_Close").on("click",function(){i.$slider.remove(),i.$wrapper.close()}),e("#J_ImageSlider").on("click",function(){return e(this).hasClass("J_Image_Del")||e(this).hasClass("J_Slider_Close")?!1:(i.$slider.remove(),void i.$wrapper.close())})}))}}),new n(t,i)},selectCity:{container:null,selectCallBack:null,init:function(e){var t=this;return t.selectCallBack=e,this.container?void this.show():void this.loadPage(function(e){t.initList(e)})},show:function(){this.container.show().animate({top:0},200)},close:function(){var t=this;this.container.animate({top:e(window).height()},100,function(){t.container.hide()})},loadPage:function(t){$GH.loading.show(),e.ajax({type:"get",dataType:"html",cache:!1,url:"/common/selectcity",success:function(e){t(e)},error:function(){$GH.alert("操作失败，请稍后再试！")}})},initList:function(t){var i=this;e("body").append(t),this.container=e(".J_CommonSelectCity"),this.container.find(".GJ_Back").on("click",function(){i.close()}),this.container.css({top:e(window).height(),width:e(window).width()}),this.show();var n={init:function(){$Common.mulLevelSelect.init({defaultSubItem:"hot",loadSubData:function(t){var n=e(".J_SubScroller"),o=e(this).data("id");return"hot"===o?void t(window.$hotCity):"all"===o?($GH.loading.hide(),void i.afterSelect({provinceId:"all",provinceStr:"全国",cityId:"all",cityStr:"全国"})):void e.ajax({type:"get",dataType:"json",cache:!1,url:n.data("action"),data:{areaId:o},success:function(e){e&&e.data&&(e.data.splice(0,0,{id:"all",name:"不限"}),t(e.data))},error:function(e,t){return"abort"===t?void $GH.alert("请求过于频繁，请求已中止"):void $GH.alert("操作失败，请稍后再试！")}})},buildHtml:function(e){return e.isHot?'<li data-province="'+e.provinceId+'" data-city="'+e.cityId+'">'+e.name+"</li>":'<li data-id="'+e.id+'">'+e.name+"</li>"},onSubSelect:function(){var t=e(".J_MainScroller li.current").data("id"),n=e(".J_MainScroller li.current").text(),o=e(this).data("id"),a=e(this).text();"hot"===t&&(t=e(this).data("province"),o=e(this).data("city"),n="all"===t?"全国":e('.J_MainScroller li[data-id="'+t+'"]').text()),i.afterSelect({provinceId:t,provinceStr:n,cityId:o,cityStr:a})}})}};n.init()},afterSelect:function(e){this.close(),this.selectCallBack(e)}},SS:{init:function(t,i){var n=e("#J_SS"),o=this;o.trigger=t,o.options=e.extend({},{type:"action",url:"/json/white/search/disease",itemTmpl:"<p data-id='{{data.uuid}}'>{{data.name}}</p>",placeholder:"请输入疾病",showTreatment:!1,params:{}},i),o.initList=[];try{o.initList=JSON.parse(t.attr("data-init"))}catch(a){}n.length||o._create(),o._open()},_open:function(){var e=this,t=e.$container.find("input");t.val(e.trigger.find(".J_Txt").text());var i=t.val();i&&i.length&&(t[0].selectionStart=t[0].selectionEnd=i.length,e.$container.find(".J_Clear").show()),e.$container.show(),t.focus(),t.trigger("input")},_create:function(){function t(){o.hide(),i.options.scroll&&window.scrollTo(0,i.options.scroll)}var i=this,n='<div class="g-ss" id="J_SS"><div class="input"><a href="javascript:;" class="cancel J_Cancel">取消</a><div class="box"><i></i><input type="text" placeholder="'+i.options.placeholder+'" class="" /><i class="J_Clear"></i></div></div><div class="list J_List"><div class="J_ListBox"></div></div></div>',o=i.$container=e(n).appendTo("body").css("height",e(window).height()),a=o.find("input");return a.on("focus",function(){e("body").addClass("g-fix-fixed")}).on("blur",function(){e("body").removeClass("g-fix-fixed")}),a.focus(),o.find(".J_Cancel").on("click",function(){return t(),!1}),o.find(".J_Clear").on("click",function(){return a.val("").focus(),a.trigger("input"),!1}),a.on("input",function(){var t=e.trim(e(this).val());t?(o.find(".J_Clear").show(),i._load(e(this))):(o.find(".J_Clear").hide(),i.showSuggest())}),i.scroll=$GH.iScroll("#J_SS .J_List",{top:50-e("#gh").height(),zIndex:102}),o.find(".J_List").on("touchmove",function(){a.blur()}),o.find(".J_List").on("click","p",function(){var n=e(this);return i.trigger.find(".J_Txt").val(n.text()),i.trigger.find(".J_Val").val(n.attr("data-id")),a.blur(),t(),!1}),o},_load:function(t){if(t.val()){var i=this,n=i.options.params;n.q=t.val(),e.ajax({type:"get",dataType:"json",cache:!1,url:i.options.url,data:n,success:function(e){if(e){var t=e.suggest;if(t){var n=t.disease;i.options.showTreatment&&t.treatment&&(n=n?n.concat(t.treatment):t.treatment),i.showSuggest(n)}}},error:function(){}})}},showSuggest:function(e){var t=this,i=t.$container.find(".J_ListBox").empty();if(e||(e=t.initList),e&&e.length){for(var n=[],o=0;o<e.length;o++){var a=e[o];a.uuid&&n.push($GH.alTmpl(t.options.itemTmpl,a))}i.append(n.join(""))}t.scroll.refresh()}},btn:{disable:function(e,t){e.data("disabled",!0),e.hasClass("gbn")||e.hasClass("gbs")?e.addClass("gbt-off"):e.hasClass("btn")&&e.addClass("disabled"),e.text(t)},enable:function(e,t){e.data("disabled",!1),e.hasClass("gbn")||e.hasClass("gbs")?e.removeClass("gbt-off"):e.hasClass("btn")&&e.removeClass("disabled"),e.text(t)},isActive:function(e){return!e.data("disabled")}},btnTapClassChange:function(){0!==e(".GJ_TapClass").length&&(e(".GJ_TapClass").on("touchstart",function(){var t=e(this),i=t.data("tap-class")||"active";t.addClass(i)}),e(".GJ_TapClass").on("touchend",function(){var t=e(this);t.removeClass(t.data("tap-class")||"active")}))},alert:function(t,i,n){t&&e.pgwModal({content:t,popup:!0,duration:i||2e3,close:!1,afterClose:function(){"function"==typeof n&&n()}})},confirm:function(t,i){e.pgwModal({content:'<div class="g-msg">'+t+"</div>",popup:!0,close:!1,confirm:!0,confirmButtons:i})},loading:{show:function(){return e(".GJ_Loading").length>0?void(e(".GJ_Loading").is(":visible")||e(".GJ_Loading").show()):void e("body").append('<div class="g-page-loading GJ_Loading"><div class="roll"></div><div class="fixed"></div></div>')},hide:function(){0!==e(".GJ_Loading").length&&e(".GJ_Loading").hide()}},validate:function(t){if(t)for(var i in t){var n=e(i);if(n.length){var o=e.trim(n.val()),a=t[i];if(a)for(var r in a){var s=!1,l="";if("function"==typeof a[r]){var c=a[r].call(n,o);c!==!0&&(s=!0,l=c)}else switch(r){case"required":o||(s=!0);break;case"mobile":/^1\d{10}$/.test(o)||""===o||(s=!0);break;case"password":/^([a-zA-Z0-9]|[~`!@#$%\^&\*\(\)_\+-=\{\}\]|\[:;\"'<>,\.\/\?]){6,16}$/.test(o)||""===o||(s=!0);break;case"chinese":/^[\u2E80-\uFE4F]+$/.test(o)||""===o||(s=!0);break;case"email":/^([a-z0-9_\.\-\+]+)@([\da-z\.\-]+)\.([a-z\.]{2,6})$/i.test(o)||""===o||(s=!0);break;case"idcard":$GH.verifyIdcard(o)||(s=!0);break;case"wholenumber":/^[1-9]*[1-9][0-9]*$/i.test(o)||""===o||(s=!0)}if(s)return l||(l=a[r]),l||(l=i+"未配置校验提示信息"),$GH.alert(l),!1}}}return!0},verifyIdcard:function(e,t){var i={y:"1900",m:"01",d:"01",sex:"male",valid:!1,length:0},n=function(t){i.length=t;var n,o=15===t?0:2;return i.y=(o?"":"19")+e.substring(6,8+o),i.m=e.substring(8+o,10+o),i.d=e.substring(10+o,12+o),i.sex=e.substring(14,15+o)%2===0?"female":"male",n=new Date(i.y,i.m-1,i.d),n.getFullYear()==1*i.y&&n.getMonth()+1==1*i.m&&n.getDate()==1*i.d},o=function(){return t?i:i.valid};if("string"!=typeof e)return o();if(/^\d{17}[0-9x]$/i.test(e)){if(!n(18))return o();e=e.toLowerCase().split("");for(var a=[7,9,10,5,8,4,2,1,6,3,7,9,10,5,8,4,2],r="10x98765432".split(""),s=0,l=0;17>l;l++)s+=a[l]*e[l];return r[s%11]===e.pop().toLowerCase()&&(i.valid=!0),o()}return/^\d{15}$/.test(e)?(n(15)&&(i.valid=!0),o()):o()},adjustGpPadding:function(t){var i=e(".GJ_Gp"),n=10;if(e("#gf").length){var o=e("#gf").height();e(".GJ_BotFixed:visible").css("bottom",o+"px"),n+=o}i.css("padding-bottom",n+e(".GJ_BotFixed:visible").height()+"px");var a=0;if(e("#gh").length){var r=e("#gh").height();e(".GJ_TopFixed:visible").css("top",r+"px"),a+=r}i.hasClass("gp-tp")&&(a+=10),i.css("padding-top",a+(e(".GJ_TopFixed:visible").height()-1)+"px"),t&&t()},formSubmitV2:function(t,i){if(!i.loading){var n="中...";i.loading=!0,i.text(i.text()+n),e.ajax({dataType:"json",cache:!1,data:t.serialize(),url:t.attr("action"),type:t.attr("method"),success:function(e){if(void 0===e.hasError||e.hasError)$GH.alert(e.message);else if(e.returnUrl&&""!=e.returnUrl){var t=e.returnUrl;t.indexOf("http://")<0&&t.indexOf("https://")<0&&(t=$GC.guahaoServer+t),location.href=t}},error:function(e,t){return"abort"===t?void $GH.alert("请求过于频繁，请求已中止"):void $GH.alert("系统异常，请稍后重试！")},complete:function(){var e=i.text();i.loading=!1,i.text(e.substring(0,e.indexOf(n)))}})}},formSubmit:function(t,i){e.ajax({dataType:"json",cache:!1,data:t.serialize(),url:t.attr("action"),type:t.attr("method"),success:function(e){if(void 0===e.hasError||e.hasError)i&&i.error?i.error.call(t,e):$GH.alert(e.message);else{var n=e.message||"成功了！";$GH.alert(n,2e3,function(){if(i&&i.success)i.success.call(t,e);else if(e.returnUrl&&""!=e.returnUrl){var n=e.returnUrl;n.indexOf("http://")<0&&(n=$GC.guahaoServer+n),location.href=n}})}},error:function(e,t){return"abort"===t?void $GH.alert("请求过于频繁，请求已中止"):void $GH.alert("系统异常，请稍后重试！")}})},Preload:function(){var e=function(t){var i=this;i.queue=[],i.urls=[].concat(t),i.total=i.urls.length,i.count=0,i.urls.forEach(function(t){if("string"!=typeof t)return++i.count,!1;var n=document.createElement("img");n.src=t,n.onload=n.onerror=function(){if(++i.count>=i.total){var t=i.queue.shift();if("function"==typeof t){var n=t();n&&n.constructor===e&&(n.queue=i.queue)}}}})};return e.prototype={constructor:e,then:function(e){return this.queue.push(e),this}},e}(),request:function(){var t=[];return function(i){i||(i={});var n=i.url||"";if(t.indexOf(n)>-1)return!1;t.push(n);var o={url:n,cache:!1,dataType:"json",success:function(e){e&&1!=e.hasError?i.fulfilled&&i.fulfilled.call(null,e):($GH.alert(e.message||"操作失败"),i.rejected&&i.rejected.call(null,e,!0))},error:function(e){window.console&&console.log(e),"abort"!==e.statusText&&$GH.alert("网络连接失败"),i.rejected&&i.rejected.call(null,e)},complete:function(){t.splice(t.indexOf(n),1),i.always&&i.always.call(null)}};return e.extend(o,i),e.ajax(o)}}(),autoHeight:function(e,t){var i,n=e.offsetHeight;return t||(t="height 0.24s ease-out"),e.length&&(e=e[0]),e&&1===e.nodeType?(e.style.height=n+"px",setTimeout(function(){e.style.transition="none",e.style.height="auto",i=e.offsetHeight,e.style.height=n+"px"},0),void setTimeout(function(){e.style.transition=t,e.style.height=i+"px"},30)):!1},Viewer:function(){function t(t,i){var n={duration:300,active:"active",transition:"transition"};this.options=e.extend({},n,i),this.timer={show:-1,hide:-1},this.elem=e(t)}return t.prototype={show:function(){clearTimeout(this.timer.show),clearTimeout(this.timer.hide),this.elem.addClass(this.options.active),this.timer.show=setTimeout(function(){this.elem.addClass(this.options.transition)}.bind(this),20)},hide:function(){clearTimeout(this.timer.show),clearTimeout(this.timer.hide),this.elem.removeClass(this.options.transition),this.timer.hide=setTimeout(function(){this.elem.removeClass(this.options.active)}.bind(this),this.options.duration)}},t}(),mobileMsg:{orderResend:function(t,i){e.ajax({dataType:"json",cache:!1,url:"/json/black/order/resendmsg/"+t,success:function(e){void 0===e.hasError||e.hasError?$GH.alert(e.message):($GH.alert("短信验证码发送成功！"),i&&i())},error:function(e,t){return"abort"===t?void $GH.alert("请求过于频繁，请求已中止"):void $GH.alert("发送失败，请稍后重试！")}})}},refreshCaptcha:function(e){var t=e.attr("data-src")||e.attr("src");return e.attr("src",t+"?_="+Math.floor(1e7*Math.random())),e},env:{isIos:function(){var e=navigator.userAgent;return e.match(/(iPad).*OS\s([\d_]+)/)||e.match(/(iPod)(.*OS\s([\d_]+))?/)||e.match(/(iPhone\sOS)\s([\d_]+)/)},isAndroid:function(){return navigator.userAgent.indexOf("Android")>-1||u.indexOf("Linux")>-1},isWeixin:function(){return"micromessenger"==navigator.userAgent.toLowerCase().match(/MicroMessenger/i)&&"undefined"!=typeof wx},isWxCityBox:function(){return"micromessenger"==navigator.userAgent.toLowerCase().match(/MicroMessenger/i)&&window.top!==window.self&&"undefined"!=typeof wxbridge&&null!==wxbridge},isDHB:function(){return document.domain.indexOf("dhb")>-1&&"undefined"!=typeof nativeEntry}},mobileCode:{_doSend:function(t,i){e.ajax({dataType:"json",cache:!1,url:t,success:function(e){void 0===e.hasError||e.hasError?$GH.alert(e.message):($GH.alert("短信验证码发送成功！"),i&&i())},error:function(e,t){return"abort"===t?void $GH.alert("请求过于频繁，请求已中止"):void $GH.alert("发送失败，请稍后重试！")}})},basic:function(e,t,i){var n="/json/white/mobile/send/"+e+"/"+t+"/"+md5(t+e);this._doSend(n,i)},updateProfile:function(e,t){var i="/json/black/update/profile/"+e+"/UPDATE_PROFILE/"+md5("UPDATE_PROFILE"+e);this._doSend(i,t)},book:function(e,t,i,n,o){var a="/json/black/res/mobile/"+e+"/RES_CODE_MOBILE/"+t+"/"+i;o&&"voice"==o&&(a="/json/black/res/voicemobile/"+e+"/RES_CODE_MOBILE/"+t+"/"+i),this._doSend(a,n)}}}}(Zepto),$Common=function(e){if($GH.monitor.trackSource(),$GH.logs("0"),window.fab=function r(){"use strict";var t=function(){var t=this;t.elem={wrap:e("#fab"),btn:e("#fab-btn"),menu:e("#fab-menu"),arrow:e("#fab-arrow")},t.visible=0!==t.elem.wrap.length,t.menuVisible=!1,t.state=t.$getState()||{left:10,bottom:100},t.startCoord={x:-1,y:-1},t.moveCoord={left:t.state.left,bottom:t.state.bottom},t.lastCoord={x:-1,y:-1},t.moving=!1,t.moveTimer=-1,t.menuViewer=new $GH.Viewer(t.elem.menu,{duration:500}),t.fabViewer=new $GH.Viewer(t.elem.wrap),t.$bind()};t.prototype={$bind:function(){function t(e){e.preventDefault(),"touchstart"===e.type&&(e=e.touches[0]),l.x=c.x=e.pageX,l.y=c.y=e.pageY,r.moving=!1,r.moveTimer=setTimeout(function(){r.moving=!0,s.btn.addClass("moving"),r.$hideMenu()},200)}function i(e){if(u&&(e=e.touches[0]),e.pageX!==c.x||e.pageY!==c.y)if(r.moving){var t={x:e.pageX-l.x,y:-(e.pageY-l.y)};r.move(t.x,t.y)}else clearTimeout(r.moveTimer);c.x=e.pageX,c.y=e.pageY}function n(e){clearTimeout(r.moveTimer),r.moving?(s.btn.removeClass("moving"),r.moving=!1,r.save(),$GH.monitor.info("left:"+r.state.left+"~~bottom:"+r.state.bottom,"fab-coord")):(u&&(e=e.changedTouches[0]),(e.pageX===l.x||e.pageY===l.y)&&(r.menuVisible?r.$hideMenu():r.$showMenu()))}function o(){r.moving&&(s.btn.removeClass("moving"),r.moving=!1,r.save()),s.btn.removeClass("moving"),clearTimeout(r.moveTimer)}function a(){clearTimeout(d),d=setTimeout(function(){r.visible&&r.move(0,0,!0).save()},50)}var r=this,s=this.elem,l=(this.state,this.startCoord),c=this.lastCoord,d=(this.moveCoord,this.menuView,-1);e(window).on("resize",a);var u="ontouchstart"in document;u?(s.menu.on("touchstart","li",function(){e(this).addClass("hover")}),s.menu.on("touchmove","li",function(){e(this).removeClass("hover")}),s.menu.on("touchend","li",function(){e(this).removeClass("hover")}),s.menu.on("touchcancel","li",function(){e(this).removeClass("hover")}),s.btn.on("touchstart",t),s.btn.on("touchmove",i),s.btn.on("touchend",n),s.btn.on("touchcancel",o)):(s.btn.on("mousedown",t),s.btn.on("mousemove",i),s.btn.on("mouseup",n),s.btn.on("mouseout",o))},$calculate:function(e,t){e=~~e,t=~~t;var i=this.elem,n=this.state,o=(this.moveCoord,{width:document.documentElement.clientWidth,height:document.documentElement.clientHeight}),a={width:i.btn[0].offsetWidth,height:i.btn[0].offsetHeight,left:n.left,bottom:n.bottom};return a.left+=e,a.bottom+=t,a.left=Math.max(10,a.left),a.left=Math.min(o.width-a.width-10,a.left),a.bottom=Math.max(10,a.bottom),a.bottom=Math.min(o.height-a.height-10-45,a.bottom),a},$getState:function(){try{return JSON.parse(localStorage.getItem("fab"))}catch(e){return null}},$hideMenu:function(){var e=this,t=e.elem;t.menu.find("a").removeClass("active"),t.btn.removeClass("active"),e.menuViewer.hide(),e.menuVisible=!1},$showMenu:function(){var e=this;e.menuViewer.show();var t=e.elem,t=e.elem,i=e.moveCoord,n={width:document.documentElement.clientWidth,height:document.documentElement.clientHeight},o={width:t.btn[0].offsetWidth,height:t.btn[0].offsetHeight,left:i.left,bottom:i.bottom},a={width:t.menu[0].offsetWidth,height:t.menu[0].offsetHeight,left:10,bottom:10},r={width:t.arrow[0].offsetWidth},s=12,l="";a.left=o.left+o.width/2-a.width/2,a.bottom=o.bottom,a.left=Math.max(10,a.left),a.left=Math.min(n.width-a.width-10,a.left),o.bottom>n.height-a.height-o.height-s-10-45?(l="dir-bottom",a.bottom-=a.height):l="dir-top",r.left=o.left+o.width/2-a.left,t.menu.removeClass("dir-top"),t.menu.removeClass("dir-bottom"),t.menu.addClass(l),t.menu.css({left:a.left,bottom:a.bottom}),t.menu.find("a").addClass("active"),t.arrow.css({left:r.left}),t.btn.addClass("active"),e.menuVisible=!0},$setState:function(){var e=this;localStorage.setItem("fab",JSON.stringify(e.state))},destroy:function(){var e=this,t=e.elem;t.btn.unbind(),t.menu.unbind(),t.wrap.remove(),window.fab=null},hide:function(){var e=this;return e.$hideMenu(),e.fabViewer.hide(),e.visible=!1,e},move:function(e,t,i){var n=this;if(!n.visible)return!1;var o=n.elem,a=n.moveCoord,r=n.$calculate(e,t);return o.btn[i?"addClass":"removeClass"]("move-transition"),a.left=r.left,a.bottom=r.bottom,o.btn.css(a),this},save:function(){var e=this,t=e.state,i=e.moveCoord;t.left=i.left,t.bottom=i.bottom,e.$setState()},show:function(){var e=this;return e.fabViewer.show(),e.visible=!0,e.move().save(),e}};var r=null;return 1===e("#fab").length&&0===e("#gf").length&&(r=new t,r.show()),r}(),e(".GJ_WxShare").on("click",function(){return e(".GJ_WxShareOverlay").show(),!1}),e(".GJ_WxShareOverlay").on("click",function(){return e(".GJ_WxShareOverlay").is(":visible")&&e(".GJ_WxShareOverlay").hide(),!1}),e(document).on("ajaxBeforeSend",function(t){var i=["a","button","input","body"],n=t.target.activeElement,o=i.join("[req-url],")+"[req-url]",a=t._args[1].url.replace(/\_\=[\d]+/,"");return e(o).length>0&&!e(n).hasClass("GJ_IngoreBlock")&&e(n).attr("req-url")===a?!1:void(-1!==i.indexOf(n.localName)&&(e(n).attr("req-url",a),e(document).on("ajaxComplete",function(){e(n).removeAttr("req-url")})))}),window.$GF)for(var t=0;t<window.$GF.length;t++)window.$GF[t].call();if(e(".GJ_ImgCaptcha").on("click",function(){return $GH.refreshCaptcha(e(this)),!1}),e(".GJ_AHText").on("keyup",function(){var t=e(this).height(),i=e(this)[0].scrollHeight,n=e(this).parent().height();i>t+2&&74>t&&(e(this).height(i-2),e(this).parent().height(n+(i-t)))}),$GH.btnTapClassChange(),e(".GJ_DatePicker").timepicker({onSelect:function(t){return e(".GJ_ShowDate").html(t[0]+"年"+t[1]+"月"+t[2]+"日"),e(".GJ_DateValue").val(t.join("-")).removeClass("ph"),!0}}),e(document).on("click",".GJ_Redirect",function(t){return t.stopPropagation(),location.href=e(this).attr("data-page"),!1}),document.domain.indexOf("mhealth")>-1){var i=$GH.cookie.get("_wycb_");if(e("#gh").length&&i){var n=e('<a href="javascript:;">关闭</a>');n.css({position:"absolute",color:"#fff",right:"10px"}),n.on("click",function(){location.href=i.replace(/\"/g,"")}),e("#gh").prepend(n)}}if(document.domain.indexOf("sanxing")>-1)""==location.pathname.replace(/\//g,"")&&e("#gh .GJ_Back").attr("href","action://finish");else if(document.domain.indexOf("cmb")>-1)if(""==location.pathname.replace(/\//g,"")){var o="http://cmbandroid/tool";$GH.env.isIos()&&(o="http://cmbiphone/tool"),e("#gh .GJ_Back").attr("href",o)}else""===document.referrer&&e("#gh .GJ_Back").attr("href","/");else-1==document.domain.indexOf("msyh")&&(""===document.referrer||""==location.pathname.replace(/\//g,""))&&e("#gh .GJ_Back").remove();if(e(".gp-orderpay-state").length>0&&e("#gh .GJ_Back").remove(),e(".GJ_Back").on("click",function(){var t=e(this).attr("href");return"javascript:;"==t?history.back(-1):location.replace(t),!1}),window.navigator.userAgent.indexOf("MiuiYellowPage")>-1){var a=function(e){!function(e){var t="MiuiYellowPageApi",i=function(t){try{e(t)}catch(i){alert(i.message)}},n=window,o=n[t];o?i(o):document.addEventListener("yellowpageApiReady",function(){setTimeout(function(){i(n[t])},1)})}(function(t){e(t)})};a(function(e){e.call("disablePullToRefresh")})}return e(document).on("focus","input, textarea, select",function(){"file"!=e(this).attr("type")&&1!=e(this).attr("data-noaction")&&e("body").addClass("g-fix-fixed"),e("#popBox").hide()}),e(document).on("blur","input, textarea, select",function(){"file"!=e(this).attr("type")&&1!=e(this).attr("data-noaction")&&(e("body").removeClass("g-fix-fixed"),setTimeout(function(){window.scrollTo(document.body.scrollLeft,document.body.scrollTop)},10)),e("#popBox").show()}),e(".GJ_Dropdown").dropdownSheet(),$GH.adjustGpPadding(),{mulLevelSelect:{subScroll:null,option:{},init:function(t){var i=this;this.options=e.extend({},{defaultSubItem:0,top:0,loadSubData:function(){},buildHtml:function(){},onSubSelect:function(){}},t),e(".J_MainScroller").on("click","li",function(){return i.showSubList(e(this)),!1}),e(document).on("click",".J_SubScroller li",function(){return i.options.onSubSelect&&i.options.onSubSelect.call(this),!1}),this.initMainScroll()},showSubList:function(t){var i=this;$GH.loading.show(),e(".J_FixedCurrent").hide(),t.closest(".J_MainScroller").find("li").removeClass("current"),t.addClass("current"),this.options.loadSubData.call(t,function(e){i.renderSubList(e,function(){$GH.loading.hide()})})},initMainScroll:function(){var t=this,i=$GH.iScroll(".J_MainScroller",{top:t.options.top},{probeType:3,deceleration:2e-4});if(i.on("scroll",function(){t.adjustCurrent(this.y)}),i.on("scrollEnd",function(){t.adjustCurrent(this.y)}),t.options.defaultSubItem){var n=e(".J_MainScroller .current");n.length>0&&(i.scrollToElement(n[0]),t.showSubList(n))}},renderSubList:function(t,i){var n=e(".J_SubScroller").find("ul");if(n.empty(),!t||0===t.length)return void("function"==typeof i&&i());for(var o=[],a=0;a<t.length;a++)o.push(this.options.buildHtml(t[a]));n.append(o.join("")),this.options.defaultSubItem&&n.find('li[data-id="'+this.options.defaultSubItem+'"]').addClass("current"),this.initSubScroll(i)},initSubScroll:function(t){var i=this;return i.subScroll?(i.subScroll.refresh(),i.options.defaultSubItem?e(".J_SubScroller .current").length>0&&i.subScroll.scrollToElement(e(".J_SubScroller .current")[0]):i.subScroll.scrollTo(0,0,200),void("function"==typeof t&&t())):(e(".J_SubScroller").css({height:e(".J_MainScroller").height(),display:"block"}).animate({left:"34%",width:"66%",zIndex:2,boxShadow:"-1px 3px 5px rgba(0,0,0,0.3)"},100,function(){i.subScroll=$GH.iScroll(".J_SubScroller",{top:i.options.top,left:"34%",width:"66%",zIndex:999}),i.options.defaultSubItem&&e(".J_SubScroller .current").size()>0&&i.subScroll.scrollToElement(e(".J_SubScroller .current")[0])}),void("function"==typeof t&&t()))},adjustCurrent:function(){var t=e(".J_MainScroller .current");if(t.length){var i=t.offset().top,n=t.height(),o=e(window).height(),a=e("#gh").height();a>=i?e(".J_FixedCurrent").text(t.text()).css({top:a}).show():i>a&&o-n>=i?e(".J_FixedCurrent").hide():e(".J_FixedCurrent").text(t.text()).css({top:"auto",bottom:0}).show()}}},searchWithFilter:function(t,i){function n(e,t){var n={page:t};if(e)for(var o=0;o<e.length;o++)n[e[o]]=i[e[o]].id;return n}function o(t,o,r){e.ajax({type:"get",dataType:"json",cache:!1,url:a.url,data:n(a.types.all,t),success:function(e){if(a.successFn)a.successFn.call(null,e,i,r);else{if(e.hasError)return void $GH.alert(e.message);if(e.data&&e.data.list){i.itemList=i.itemList.concat(e.data.list);for(var t,n=0;t=i.itemList[n];n++)"1"==t.doctorType?t.photo=$GC.staticServer+"/img/character/doc-special-l.png":"2"==t.doctorType&&(t.photo=$GC.staticServer+"/img/character/doc-common-l.png");r.pageCount=Math.ceil(e.data.totalCount/10)}}},error:function(e,t){return"abort"===t?void $GH.alert("请求过于频繁，请求已中止"):void $GH.alert("系统服务异常，请稍后重试！")},complete:function(){$GH.loading.hide(),i.loading=!1,i.$scan(),o&&o()}})}i.loading=!0,i.itemList=[],$GH.loading.show();var a=e.extend({},{url:"",types:{},noFilter:!1,scrollerTop:0,scrollerBot:50,successFn:null},t||{}),r=$Common.pullUpAngularScroll;if(r.init({initScrollCfg:{top:a.scrollerTop,bottom:a.scrollerBot},scrollSelector:".J_Scroller",pageSize:10,listSelector:".J_ScrollerList",loadingData:function(e,t){o(e,t,this)}}),!a.noFilter){var s={};$GH.botFilter(e("#J_BotFilter"),function(t){e("#J_BotFilter .J_Nav").on("click","a",function(){function n(){t.close(),$GH.loading.show(),i.itemList=[],r.scroll.scrollTo(0,0),r.currentPage=1,o(1,function(){r.initScroll()},r)}var a=e(this),l=a.parents(".J_Nav");if(l.hasClass("J_Nav_Others"))if(a.hasClass("J_QD"))s={},n();else{if(a.hasClass("on"))return!1;var c=a.parent().attr("data-type");c&&(s[c]||(s[c]=e.extend({},i[c])),i[c]={id:a.attr("data-id"),name:e.trim(a.text())},i.$scan())}else{if(a.hasClass("on"))return!1;var c=a.parent().attr("data-type");c&&(i[c]={id:a.attr("data-id"),name:e.trim(a.text())}),n()}return!1})},function(t){var n=e("#J_BotFilter").find(".J_Nav:eq("+t+")");if(n.hasClass("J_Nav_Others")){for(var o=0;o<a.types.others.length;o++){var r=a.types.others[o];s[r]&&(i[r]=e.extend({},s[r]))}s={},i.$scan()}})}},pullUpAngularScroll:{scroll:null,options:{},currentPage:1,pageCount:1,init:function(t){$GH.loading.show();var i=this;this.options=e.extend({},{pageSize:10,initScrollCfg:{},scrollSelector:"",listSelector:"",loadingData:function(){}},t),this.options.loadingData.call(this,1,function(){i.initScroll()})},initScroll:function(){var t=this;if(e(this.options.listSelector+" .g-pullUp").show(),t.pageCount==t.currentPage&&e(this.options.listSelector+" .g-pullUp").hide(),this.scroll)return this.scroll.refresh(),void $GH.loading.hide();var i=document.querySelector(".g-pullUp"),n=0;i&&(n=i.offsetHeight),this.scroll=$GH.iScroll(this.options.scrollSelector,{top:this.options.initScrollCfg.top||0,bottom:this.options.initScrollCfg.bottom||0},{probeType:1,deceleration:2e-4,startY:0});var o=function(){t.pageCount<=t.currentPage||t.scroll.y<=t.scroll.maxScrollY+50&&i&&!i.className.match("g-loading")&&(e(".g-pullUp").addClass("g-loading").html('<span class="g-icon g-pullUpIcon">&nbsp;</span><span class="g-pullUpLabel">正在努力加载...</span>'),t.options.loadingData.call(t,++t.currentPage,function(){t.initScroll(),i&&i.className.match("g-loading")&&e(".g-pullUp").removeClass("g-loading").html("")}))};this.scroll.on("scroll",function(){o()}),this.scroll.on("scrollEnd",function(){o()}),$GH.loading.hide()}},pullUpScroll:{scroll:null,options:{},currentPage:1,totalCount:0,init:function(t){$GH.loading.show();var i=this;this.options=e.extend({},{pageSize:10,initScrollCfg:{},scrollSelector:"",listSelector:"",customFunc:null,loadingData:function(){},buildHtml:function(){},afterRendered:function(){}},t),this.options.loadingData.call(this,1,function(e){i.renderList(e,function(){i.initScroll()})}),e(this.options.listSelector).on("refreshList",function(){e(this).find("ul").empty(),i.currentPage=1,i.options.loadingData.call(this,1,function(e){i.renderList(e,function(){i.initScroll()}),i.scroll.scrollTo(0,0)})})},initScroll:function(){var t=this;if(this.scroll)return this.scroll.refresh(),this.options.afterRendered(),void $GH.loading.hide();var i=document.querySelector(".g-pullUp"),n=0;i&&(n=i.offsetHeight),e(this.options.listSelector+" ul > li").length<this.options.pageSize&&e(this.options.listSelector+" .g-pullUp").hide(),this.scroll=$GH.iScroll(this.options.scrollSelector,{top:this.options.initScrollCfg.top||0,bottom:this.options.initScrollCfg.bottom||0},{probeType:1,deceleration:2e-4,startY:0});var o=function(){if(!(e(t.options.listSelector+" ul > li").length<t.options.pageSize)&&!(e(t.options.listSelector+" ul > li").length>=t.totalCount)&&t.scroll.y<=t.scroll.maxScrollY+50&&i&&!i.className.match("g-loading")){e(".g-pullUp").addClass("g-loading").html('<span class="g-icon g-pullUpIcon">&nbsp;</span><span class="g-pullUpLabel">正在努力加载...</span>');var n=0;n=t.currentPage?t.currentPage+1:2,t.options.loadingData.call(t,n,function(o){t.renderList(o,function(){t.initScroll(),i&&i.className.match("g-loading")&&e(".g-pullUp").removeClass("g-loading").html(""),t.currentPage=n})})}};t.options.customFunc&&"function"==typeof t.options.customFunc&&t.options.customFunc.call(t),this.scroll.on("scroll",function(){o()}),this.scroll.on("scrollEnd",function(){o()}),this.options.afterRendered(),$GH.loading.hide()},renderList:function(t,i){var n=e(this.options.listSelector);if(!t||!t.length)return void(i&&i());for(var o=[],a=0;a<t.length;a++){var r=t[a];o.push(this.options.buildHtml(r))}n.find("ul").append(o.join("")),i&&i()}},initStarsVote:function(t){e(".GJ_StarList span").on("click",function(){var i=e(this).data("index");i=parseInt(i,10);var n=e(this).parent().next();e(this).parent().find("span").each(function(){var t=e(this).data("index");t=parseInt(t,10),i>=t?e(this).addClass("selected"):e(this).removeClass("selected")}),n.val(i),"function"==typeof t&&t(i)})},doVote:function(){$Common.initStarsVote(),e(".J_Submit").on("click",function(){e("#J_DoVoteForm").submit()}),e("#J_DoVoteForm").on("submit",function(){var t=(e(this),$GH.validate({"#disease":{required:"请输入所患疾病",check:function(e){return/[\u4E00-\uFA29]/.test(e)?!0:"疾病名称必须含有汉字"}},"#manner":{required:"请为医生态度评分"},"#effect":{required:"请为治疗效果评分"},"#service":{required:"请为医院服务评分"},"#time":{required:"请为候诊时间评分"},"#desc":{required:"请输入就医经验",check:function(e){return e.length<10?"分享内容不得少于10个字":/[\u4E00-\uFA29]/.test(e)?!0:"分享内容必须含有汉字"}}}));return t&&$GH.formSubmit(e("#J_DoVoteForm")),!1})},getHDObj:function(e,t){if(e.expertHospDetpList&&e.expertHospDetpList.length>0){if(!t)return{hname:e.expertHospDetpList[0].hospitalNameDTO.name,dname:e.expertHospDetpList[0].hospDeptNameDTOList[0].name};for(var i=0;i<e.expertHospDetpList.length;i++)for(var n=e.expertHospDetpList[i].hospDeptNameDTOList,o=0;o<n.length;o++)if(t==n[o].id)return{hname:e.expertHospDetpList[i].hospitalNameDTO.name,dname:n[o].name}}return null},buildDoctorItem:function(e,t,i){var n=[];n.push('<li data-id="'+e.id+'">'),n.push('<div class="portrait">');var o=e.photo,a=$GC.staticServer+"/img/character/doc-unknow.png";n.push('<img src="'+o+'" alt="" onerror="this.src=\''+a+"'\"/>"),n.push("</div>"),n.push('<div class="main">'),n.push('<p><span class="name">'+e.name+"</span>"),n.push('<span class="position">'+e.titleTypeText+"</span></p>");var r=$Common.getHDObj(e,i);return r&&n.push('<p class="office">'+r.hname+"-"+r.dname+"</p>"),n.push('<p class="great"><span class="tt">擅长：</span>'+(e.feature||"暂无")+"</p>"),n.push("</div>"),"dangri"==t?(n.push('<div class="g-fr show">'),n.push('<span class="'+("1"===e.todayHaoyuan?"enable":"disable")+'">'+("1"===e.todayHaoyuan?"有号":"约满")+"</span>"),n.push("</div>"),n.push("</li>")):"2"!==e.doctorHaoyuanType&&"5"!==e.doctorHaoyuanType&&(n.push('<div class="g-fr show">'),n.push('<span class="'+("1"===e.haoyuan?"enable":"disable")+'">'+("1"===e.haoyuan?"有号":"约满")+"</span>"),n.push("</div>"),n.push("</li>")),n.join("")},buildHospitalItem:function(e){var t=[];t.push('<li class="g-arrow-r" data-id="'+e.id+'">');var i=$GC.staticServer+"/img/character/hos.png";return t.push('<div class="portrait"><img src="'+e.photo+'" alt="" onerror="this.src=\''+i+"'\"/></div>"),t.push('<div class="main">'),t.push('<p><span class="name">'+e.name+"</span></p>"),t.push('<p class="level">'+e.hospitalLevel+"&nbsp;&nbsp;|&nbsp;&nbsp;预约量："+$Common.shortCount(e.orderCount||0)+"</p>"),t.push("</div>"),t.push("</li>"),t.join("")},buildVoteItem:function(e){var t=[];t.push('<li class="shadow-box">'),t.push('<div class="title g-clear">'),t.push('<span class="topic">'+e.diseaseName+"</span>"),t.push('<div class="g-vote">'),t.push('<div class="enable" style="width:'+20*e.doctorAttitude+'%"></div>'),t.push("</div>"),t.push("</div>"),t.push('<div class="desc">'+e.content+"</div>"),t.push('<div class="date">');var i=null===e.treatmentAfterday?"":0===e.treatmentAfterday?"就诊当天":"就诊后"+e.treatmentAfterday+"天";t.push('<span class="time">'+e.gmtCreatedStr+" "+i+"</span>");var n=e.nickName;n=n.substr(0,1)+(2===n.length?"*":"**"),t.push('<span class="user">'+n+"</span>"),t.push("</div>");var o=e.commentExpertAppendVOList;if(o)for(var a=0;a<o.length;a++){var r=o[a];t.push('<div class="more">'),t.push('<dv class="message"><span>追加</span>：'+r.content+"</div>"),t.push('<div class="date">');var s=0===r.treatmentAfterday?"就诊当天":"就诊后"+r.treatmentAfterday+"天";
t.push('<span class="time">'+r.gmtCreated+" "+s+"</span>"),t.push('<span class="user">'+n+"</span>"),t.push("</div>"),t.push("</div>")}return t.push("</li>"),t.join("")},shortCount:function(e){if(!e)return 0;var t=e;return t>1e4&&(t=(t/1e4).toFixed(1)+"万"),t}}}(Zepto);!function(e){alight.directives.gl={pjstar:function(t){for(var i=e(t).attr("data-value"),n="",o=1;6>o;o++)n+="<i",o>i&&(n+=" class='off'"),n+="></i>";e(t).html(n)}},alight.filters={shortCount:function(){return function(e){return $Common.shortCount(e)}},maskName:function(){return function(e){return $GH.maskStr(e,2)}},scoreSplit:function(){return function(e){var t="暂无";if(e>0){var i=e.toString().split("."),t="<em>"+i[0]+"</em>";t+=i.length>1?"."+i[1]:".0"}return t}},clean:function(){return function(e){return e&&""!=e||(e="暂无"),e}},cutdown:function(e){return function(t){return $GH.smartStr(t,e)}},img140:function(){return function(e){return $GC.imageServer+"/images/image140"+e}},img4Article:function(){return function(){return $GC.staticServer+"/h5/img/hos-article.png"}},number2Date:function(){return function(e){var t=new Date;return t.setTime(e),t.getFullYear()+"-"+(t.getMonth()+1)+"-"+t.getDate()}},htmlEncode:function(){return function(e){var t=document.createElement("div");return t.appendChild(document.createTextNode(e)),t.innerHTML}}}}(Zepto),$(function(){function e(e){var t=function(){$(".J_CountDownTip").show(),$(".J_CountDown").countdown(function(){$(".J_CountDownTip").hide(),$(".J_Resend").show()},60,"time")};$(".J_TriggerSend").length>0&&$GH.mobileCode.basic($("#J_HiddenMobile").val(),e,function(){t()}),$(".J_Resend").on("click",function(){$GH.mobileCode.basic($("#J_HiddenMobile").val(),e,function(){$(".J_Resend").hide(),t()})})}$GH.module("#J_Broken",function(){$(window).on("click",function(){location.reload()}),$GUM.info("访问量过大","PAGE_BUSY")}),$GH.module("#J_AccountLogin",function(e){var t={init:function(){$(".J_ImgCaptcha").on("click",function(){return $GH.refreshCaptcha($(this).find("img")),!1}),e.find("input").on("keydown",function(e){13===e.which&&$(".J_Login").trigger("click")}),$(".J_Login").on("click",function(){var e=$(this),t=$GH.validate({"#username":{required:"用户名不能为空"},"#password":{required:"请输入密码"},"#captcha":{required:"请输入验证码"}});return t&&$.ajax({type:"post",dataType:"json",data:{loginId:$("#username").val(),password:window.md5($("#password").val()),validCode:$("#captcha").val()},cache:!1,url:e.attr("data-action"),success:function(e){void 0===e.hasError||e.hasError?($GH.alert(e.message),$("#captcha").val("").focus(),$GH.refreshCaptcha($(".J_ImgCaptcha").find("img"))):location.href=e.returnUrl||$("#target").val()||$GC.guahaoServer},error:function(e,t){"abort"!==t&&$GH.alert("登录失败，请稍后重试！")}}),!1})}};t.init()}),$GH.module("#J_AccountRegister",function(){var t=!1;$(".J_ImgCaptcha").on("click",function(){return $GH.refreshCaptcha($(this).find("img")),!1}),$(".J_Check").on("click",function(){return $(this).toggleClass("g-checkbox-checked"),$(this).toggleClass("g-checkbox"),$("#agreement").val($(this).hasClass("g-checkbox-checked")?"1":""),!1}),$(".J_GetCaptcha").on("click",function(){var e=$(this);$(".J_Check").hasClass("g-checkbox-checked")&&$("#agreement").val("1");var t=$GH.validate({"#mobile":{required:"手机号码不能为空",mobile:"手机号码格式不正确"},"#captcha":{required:"请输入验证码"},"#agreement":{required:"请先同意协议才能注册"}});return t&&$GH.btn.isActive(e)&&($GH.btn.disable(e,"提交中..."),$.ajax({type:"get",dataType:"json",cache:!1,data:{validcode:$("#captcha").val()},url:"/json/white/checkimagevalidcode",success:function(t){if(!t||t.hasError)return $GH.alert(t.message),void $GH.btn.enable(e,"获取验证码");var i=$("#mobile").val(),n=new Date,o="12"+n.getDate()+n.getMonth()+n.getFullYear(),a=parseInt(i)+100*parseInt(o),r=e.attr("data-goto")+"?m="+a;$("#J_HiddenTarget").val()&&(r+="&target="+$("#J_HiddenTarget").val()),location.href=r},error:function(){$GH.alert("操作失败，请稍后重试！"),$GH.btn.enable(e,"获取验证码")}})),!1}),e("REG_MOBILE"),$(".J_VerifyMobilePage input").on("keydown",function(e){13===e.which&&$(".J_VerifyCaptcha").trigger("click")}),$(".J_VerifyCaptcha").on("click",function(){if(t)return!1;t=!0;var e=$(this),i=$GH.validate({"#smsCaptcha":{required:"短信验证码不能为空"}});if(i){var n=$("#J_HiddenMobile").val(),o=$("#smsCaptcha").val(),a=$("#imgCaptcha").val(),r=$("#J_HiddenTarget").val();$.ajax({type:"post",dataType:"json",data:{mobile:n,smsCaptcha:o,imgCaptcha:a,target:r},cache:!1,url:e.attr("data-action"),success:function(i){void 0===i.hasError||i.hasError?($GH.alert(i.message),$("#imgCaptcha").val("").focus(),$GH.refreshCaptcha($(".J_ImgCaptcha").find("img")),t=!1):location.href=e.attr("data-goto")+"?mobile="+n+"&smsCaptcha="+o+"&imgCaptcha="+a+"&target="+r},error:function(e,i){"abort"!==i&&($GH.alert("提交失败，请稍后重试！"),t=!1)}})}else t=!1;return!1}),$(".J_SetPassword").on("click",function(){var e=$(this),t=$GH.validate({"#password":{required:"密码不能为空",password:"密码格式不正确，请输入6-16位数字、字母组成的密码"}});return t&&$.ajax({type:"post",dataType:"json",data:{mobile:$("#J_HiddenMobile").val(),password:$("#password").val(),smsCaptcha:$("#J_HiddenSmsCaptcha").val(),imgCaptcha:$("#J_HiddenImgCaptcha").val(),encMobile:$("#J_HiddenEncMobile").val(),target:$("#J_HiddenTarget").val()},cache:!1,url:e.attr("data-action"),success:function(t){void 0===t.hasError||t.hasError?$GH.alert(t.message,"",function(){t.returnUrl&&(location.href=t.returnUrl)}):$GH.alert("注册成功","",function(){try{$GH.monitor.info("id:"+$("#J_HiddenMobile").val()+"~~source:"+$GH.cookie.get("_track_source"),"YHZC")}catch(i){}location.href=t.returnUrl?t.returnUrl:e.attr("data-goto")})},error:function(e,t){"abort"!==t&&$GH.alert("提交失败，请稍后重试！")}}),!1})}),$GH.module("#J_Account",function(){$(".J_ImgCaptcha").on("click",function(){return $GH.refreshCaptcha($(this).find("img")),!1}),$(".J_BackPwdFirst").on("click",function(){var e=$(this),t=$GH.validate({"#username":{required:"请输入登录名"},"#captcha":{required:"请输入验证码"}}),i=$("#username").val(),n=$("#captcha").val();return t&&$.ajax({type:"post",dataType:"json",data:{loginId:i,validcode:n},cache:!1,url:e.attr("data-action"),success:function(t){void 0===t.hasError||t.hasError?($GH.alert(t.message),$("#captcha").val("").focus(),$GH.refreshCaptcha($(".J_ImgCaptcha").find("img"))):location.href=e.attr("data-goto")+"?loginId="+i+"&imgCaptcha="+n},error:function(e,t){"abort"!==t&&$GH.alert("操作失败，请稍后重试！")}}),!1}),$("#J_PhoneVerify").on("click",function(){$(".J_PhoneLines").show(),$(".J_EmailLines").hide(),$(".J_BackPwdPhoneSecond").show(),$(".J_BackPwdEmailSecond").hide()}),$("#J_EmailVerify").on("click",function(){$(".J_PhoneLines").hide(),$(".J_EmailLines").show(),$(".J_BackPwdPhoneSecond").hide(),$(".J_BackPwdEmailSecond").show()}),$(".J_BackPwdPhoneSecond").on("click",function(){var e=$(this),t=$GH.validate({"#captcha":{required:"请输入验证码"}}),i=$("#captcha").val(),n=$("#encodeMobile").val();return t&&$.ajax({type:"post",dataType:"json",data:{mobile:n,userId:$("#encodeUserId").val(),validcode:i,findPwdType:1},cache:!1,url:e.attr("data-action"),success:function(t){void 0===t.hasError||t.hasError?$GH.alert(t.message,"",function(){t.returnUrl&&(location.href=t.returnUrl)}):location.href=e.attr("data-goto")+"?loginId="+$("#encodeUserId").val()+"&imgCaptcha="+$("#J_HiddenImgCaptcha").val()+"&smsCaptcha="+i+"&mobile="+n+"&findPwdType=1"},error:function(e,t){return"abort"===t?void $GH.alert("请求过于频繁，请求已中止"):void $GH.alert("操作失败，请稍后重试！")}}),!1}),$(".J_BackPwdSendCaptcha").on("click",function(){var e=$(this);$GH.mobileCode.basic($("#J_HiddenMobile").val(),"PWD_RESET_MOBILE",function(){e.countdown(function(){e.text("重发")},60,"time秒后重发")})}),$(".J_RestPwd").on("click",function(){var e=$(this),t=$GH.validate({"#pwd":{required:"请输入密码",password:"密码格式不正确，请输入6-16位数字字母组成的密码"},"#repwd":{required:"请再输入一次密码",equal:function(){return $("#pwd").val()!==$("#repwd").val()?"两次输入的密码不一致":!0}}}),i=$("#userId").val(),n=$("#J_HiddenImgCaptcha").val();return t&&$.ajax({type:"post",dataType:"json",data:{userId:$("#userId").val(),newpassword:$("#pwd").val(),repassword:$("#repwd").val(),mobile:$("#J_HiddenMobile").val(),smsCaptcha:$("#J_HiddenSmsCaptcha").val(),imgCaptcha:n},cache:!1,url:e.attr("data-action"),success:function(t){void 0===t.hasError||t.hasError?$GH.alert(t.message,"",function(){t.returnUrl&&(location.href=t.returnUrl+"?loginId="+i+"&imgCaptcha="+n)}):location.href=e.attr("data-goto")+"1"},error:function(e,t){return"abort"===t?void $GH.alert("请求过于频繁，请求已中止"):void $GH.alert("操作失败，请稍后重试！")}}),!1}),$(".J_BackPwdEmailSecond").on("click",function(){var e=$(this);return $.ajax({dataType:"json",data:{email:$("#encodeEmail").val(),userId:$("#encodeUserId").val(),imgCaptcha:$("#J_HiddenImgCaptcha").val(),findPwdType:2},cache:!1,url:e.attr("data-action"),success:function(t){void 0===t.hasError||t.hasError?$GH.alert(t.message):location.href=e.attr("data-goto")+"2"},error:function(e,t){return"abort"===t?void $GH.alert("请求过于频繁，请求已中止"):void $GH.alert("操作失败，请稍后重试！")}}),!1})}),$GH.module("#J_AccountBind",function(){function e(e){$.ajax({type:"post",dataType:"json",data:e.serialize(),cache:!1,url:e.attr("action"),success:function(e){$GH.alert(e.message,"",function(){e.returnUrl&&""!=e.returnUrl&&location.replace(e.returnUrl)})},error:function(e,t){"abort"!==t&&$GH.alert("提交失败，请稍后重试！")}})}if($("#J_Send").on("click",function(){var e=$(this);if(!e.hasClass("off")){var t=$GH.validate({"#J_mobileIpt":{required:"手机号码不能为空",mobile:"手机号码格式不正确"}});if(t){var i=$.trim($("#J_mobileIpt").val());$GH.mobileCode.basic(i,$("#smsTypeIpt").val(),function(){e.addClass("off").html("重新获取(<span>60</span>S)");var t=e.find("span"),i=60,n=setInterval(function(){i--,0==i?(e.removeClass("off").html("获取验证码"),clearInterval(n)):t.text(i)},1e3)})}}return!1}),0==$("#sendIpt").val()){var t=$.trim($("#beforeMobileIpt").val());$("#J_mobileIpt").on("input",function(){t==$.trim($(this).val())?$(".J_CodeLine").hide():$(".J_CodeLine").show()})}$("#J_NextBtn").on("click",function(){var e={"#J_mobileIpt":{required:"手机号码不能为空",mobile:"手机号码格式不正确"}};if($(".J_CodeLine").is(":visible")&&(e["#mobileCodeIpt"]={required:"短信验证码不能为空"}),$GH.validate(e)){var t=$(this),i=$("#J_mobileIpt").val(),n=$("#mobileCodeIpt").val();$.ajax({type:"post",dataType:"json",data:{mobile:i,smsCaptcha:n,secret:$("#secret").val(),time:$("#time").val()},cache:!1,url:"/json/white/partners/check",success:function(e){if(void 0===e.hasError||e.hasError)$GH.alert(e.message);else{try{$GH.monitor.info("id:"+i+"~~source:"+$GH.cookie.get("_track_source"),"YHZC")}catch(n){}t.closest("form").submit()}},error:function(e,t){"abort"!==t&&$GH.alert("提交失败，请稍后重试！")}})}return!1}),$("#J_BindBtn").on("click",function(){return e($(this).closest("form")),!1}),$("#J_RegBtn").on("click",function(){var t=$GH.validate({"#password":{required:"密码不能为空",password:"密码格式不正确，请输入6-16位数字、字母组成的密码"},"#agreement":{required:"请先同意协议才能注册"}});return t&&e($(this).closest("form")),!1}),$(".J_Check").on("click",function(){return $(this).toggleClass("g-checkbox-checked"),$(this).toggleClass("g-checkbox"),$("#agreement").val($(this).hasClass("g-checkbox-checked")?"1":""),!1})})}),$(function(){$GH.module("#J_DoctorRecruit",function(){$(".J_Check").off("click").on("click",function(){return $(this).toggleClass("g-checkbox-checked"),$(this).toggleClass("g-checkbox"),$("#agreement").val($(this).hasClass("g-checkbox-checked")?"1":""),!1}),$("#J_Submit").on("click",function(){var e=$GH.validate({"#agreement":{required:"您需要同意“微医网络医生薪资协议”才能加入"}});return e&&$.ajax({type:"post",dataType:"json",data:{id:$("#doctorId").val(),confirmStatus:1},cache:!1,url:$("#recruitForm").attr("action"),success:function(e){return e?void(void 0===e.hasError||e.hasError?$GH.alert(e.message):$GH.alert("申请成功，等待审核","",function(){document.location.href="wydoctor:gotoRegSuccessPage"})):void $GH.alert("操作失败，请稍后重试！")},error:function(e,t){"abort"!==t&&$GH.alert("操作失败，请稍后重试！")}}),!1}),$("#J_Cancel").on("click",function(){return $GH.confirm("确定取消加入<br/>执业医生咨询团队？",[{name:"取消",style:"btn",fn:function(e){e()}},{name:"确定",style:"btn",fn:function(e){e(),$.ajax({type:"post",dataType:"json",data:{id:$("#doctorId").val(),confirmStatus:0},cache:!1,url:$("#recruitForm").attr("action"),success:function(e){void 0===e.hasError||e.hasError?$GH.alert(e.message):document.location.href="wydoctor:gotoRegSuccessPage"},error:function(e,t){"abort"!==t&&$GH.alert("操作失败，请稍后重试！")}})}}]),!1})}),$GH.module("#J_NewsPage",function(){var e={officeId:0,init:function(){$(document).on("click",".J_NewsList li",function(){location.href=$(this).parent().parent().data("page")+$(this).data("id")}),$Common.pullUpScroll.init({pageSize:10,initScrollCfg:{top:0},scrollSelector:".J_NewsListScroller",listSelector:".J_NewsList",loadingData:function(e,t){var i=this,n=$(".J_NewsList");$.ajax({type:"get",dataType:"json",cache:!1,data:{pageSize:10,pageNo:e},url:n.data("action"),success:function(e){e.list&&t&&(i.totalCount=e.totalCount,t(e.list))},error:function(e,t){return"abort"===t?void $GH.alert("请求过于频繁，请求已中止"):void $GH.alert("操作失败，请稍后再试！")}})},buildHtml:function(e){var t=[];t.push('<li data-id="'+e.id+'">'),t.push('<div class="newsImg"><img src="'+e.h5Img+'" alt=""/></div>'),t.push('<div class="newsCon">'),t.push("<h3>"+e.title+"</h3>");var i=$(window).width()<375?22:29;return t.push('<div class="newsDetail">'+($GH.smartStr(e.summary,i)||"")+"</div>"),t.push("</div>"),t.push("</li>"),t.join("")}})}};e.init()})}),$GH.module("#J_AppointmentRefuse",function(){$(".reason input").change(function(){$("textarea").val($(this).val())}),$(".reason input:first").click(),$(".J_Submit").click(function(){$("form").submit()})}),$GH.module("#J_EteamCooperation",function(){$(".J_JoinIn").click(function(){$GH.confirm('<div style="font-size:17px;color:#333;">是否接收转诊<div style="font-size:12px;padding:10px 20px 0 20px;">开通后，您将接收到其他医生转诊给您的患者。</div></div>',[{name:"取消",style:"btn-eteam",fn:function(e){e()}},{name:"开通",style:"btn-eteam",fn:function(){window.location.href=$GC.guahaoServer+"/eteam/jiahao/configure?expertId="+$(".J_ExpertId").val()}}])})}),$GH.module("#J_AppointmentAgree",function(e){var t={init:function(){this.initDatePicker(),this.initMessage(),this.initChooseHaoYuan(),e.find(".J_DoctorsDropDown").dropdownSheet(),$(".J_Submit").click(function(){if("base"!=$(this).data("type")){var e=$GH.validate({".J_DPTxt":{required:"请选择加号日期"},".J_Day":{required:"请完整填写加号时间"},".J_HourTimeRange":{required:"请完整填写加号时间"},".J_Place":{required:"请填写取号地点"}});e&&($(".J_ShiftCase").val(""),$('input[name="clinicDatetime"]').val($.formatDate(new Date($('input[name="clinicDatetime"]').val().replace("-","/").replace("-","/")),"yyyyMMdd")),$("form").submit())}else 1===$(".J_ScheduleList .select").length?($(".J_ShiftCase").val($(".J_ScheduleList .select").prev().children("input").val()),$(".J_Time_Use").val($(".J_ScheduleList .select").prev().children("div").children("label").text()),$("form").submit()):$GM.smartAlert("请选择加号号源！")})},initChooseHaoYuan:function(){var t=this;e.find(".J_FenPei").dropdownSheet(null,function(){"base"==$(".J_FenPei select option:selected").data("type")?($(".J_Based").show(),$(".J_Add").hide(),$(".J_Submit").data("type","base"),0===$(".J_ScheduleList .select").length?$(".J_Submit").hide():$(".J_Submit").show()):($(".J_Based").hide(),$(".J_Add").show(),$(".J_Submit").data("type","add"),$(".J_Submit").show())});$("#expertName").change(function(){$.ajax({url:"/json/getHospDeptName?expertUuid="+$(".J_agreeexpertName option:selected").val(),type:"post",dataType:"json",success:function(i){if($(".J_HosptKs select").html(""),i.length>0){for(var n=0;n<i.length;n++)$(".J_HosptKs select").append("<option data-value='"+i[n].split(",")[1]+"'>"+i[n].split(",")[0]+"</option>");e.find(".J_HosptKs").dropdownSheet(null,function(){var e=$(".J_HosptKs option:selected");t.loadSchedule(e.data("value"),e.data("value").split("~")[0],e.data("value").split("~")[1],$(".J_agreeexpertName option:selected").val()),$(".J_SetDoc").text(e.text()),$(".J_MegWrite").val($(".J_MsgTemp").text())});var o=$(".J_HosptKs option:selected");t.loadSchedule(o.data("value"),o.data("value").split("~")[0],o.data("value").split("~")[1],$(".J_agreeexpertName option:selected").val()),$(".J_SetDoc").text(o.text()).next().text($(".J_DoctorsDropDown option:selected").text()),$(".J_MegWrite").val($(".J_MsgTemp").text())}else $(".J_HosptKs").hide();$('input[name="hospdeptName"]').val($(".J_HosptKs option:selected").text().split("-")[1]),$('input[name="hospitalName"]').val($(".J_HosptKs option:selected").text().split("-")[0]),$('input[name="hospitalUuid"]').val($(".J_HosptKs option:selected").data("value").split("~")[0]),$('input[name="hospdeptUuid"]').val($(".J_HosptKs option:selected").data("value").split("~")[1])},error:function(){alert("服务器错误！")}})}).trigger("change")},loadSchedule:function(e,t,i,n){$.ajax({type:"get",dataType:"json",cache:!1,url:"/json/shifts?hospitalDetpId="+e+"&expertId="+n+"&intentDate="+$(".J_WantDate").text()+"&hospitalid="+t+"&hospdeptid="+i,success:function(e){if(!e||!e.length||0==e.length)return $(".J_ScheduleList").html("<li>未加载到排班数据...</li>"),$(".J_ScheduleList").css({"background-color":"#FDF8DE",border:"1px solid #ECDDB8"}),$(".J_FenPei input").val("对症加号"),$(".J_Based").hide(),$(".J_Add").show(),void $(".J_Submit").data("type","add").show();for(var t=[],i=0;i<e.length;i++){var n=e[i],o=n.comments.split(" ");t.push('<li><a href="javascript:;"></a><div for="shifcaseId'+i+'"><input type="hidden" id="shifcaseId'+i+'" name="shifcaseId" data-value="'+n.roleid+'" value="'+n.id+'"><div><label>'+o[0]+"</label><label>"+o[1]+"</label><label>"+o[2]+'</label></div><div class="sche-line-two"><label>'+o[3]+"</label><label>"+o[4]+"</label><span>"+o[5]+"</span></div></div><p></p></li>")}$(".J_ScheduleList").css({"background-color":"white"}),$(".J_ScheduleList").empty().append(t.join("")),$(".J_Based").show(),$(".J_Add").hide(),$(".J_FenPei input").val("基础号源"),$(".J_Submit").data("type","base").show(),$(".J_ScheduleList label").click(function(){$(".J_RoldId").val($(this).children().data("value")),$(this).parent().children().removeClass("select"),$(this).addClass("select")}),$(".J_ScheduleList a").click(function(){$(".J_ScheduleList p").removeClass("select"),$(this).next().next().addClass("select")}),$(".J_ScheduleList a:first").click()},error:function(){$GH.alert("服务器错误，请稍后再试！")}})},initMessage:function(){$(".J_SetDoc").text($(".J_agreeexpertName option:selected").data("hospname")+"-"+$(".J_agreeexpertName option:selected").data("hosdeptname")+$(".J_agreeexpertName option:selected").text()),$('input[name="hospitalName"]').val($(".J_agreeexpertName option:selected").data("hospname")),$('input[name="hospitalUuid"]').val($(".J_agreeexpertName option:selected").data("hospuuid")),$('input[name="expertName"]').val($(".J_agreeexpertName option:selected").data("expertname")),$(".J_Day").change(function(){$(".J_SetDay").text($(".J_Day option:selected").data("value")),$(".J_MegWrite").val($(".J_MsgTemp").text())}),$(".J_Time").change(function(){$(".J_SetTime").text($(".J_Time option:selected").text()),$(".J_HourTimeRange").val($(".J_Time option:selected").text()),$(".J_MegWrite").val($(".J_MsgTemp").text())}),$(".J_agreeexpertName").change(function(){$(".J_SetDoc").text($(".J_agreeexpertName option:selected").data("hospname")+"-"+$(".J_agreeexpertName option:selected").data("hosdeptname")+$(".J_agreeexpertName option:selected").text()),$(".J_MegWrite").val($(".J_MsgTemp").text()),$('input[name="hospitalName"]').val($(".J_agreeexpertName option:selected").data("hospname")),$('input[name="hospitalUuid"]').val($(".J_agreeexpertName option:selected").data("hospuuid")),$('input[name="hospdeptUuid"]').val($(".J_agreeexpertName option:selected").data("hosdeptuuid")),$('input[name="expertName"]').val($(".J_agreeexpertName option:selected").data("expertname"))}),$(".J_HosptKs select").change(function(){$('input[name="hospitalName"]').val($(".J_HosptKs option:selected").text().split("-")[0]),$('input[name="hospdeptName"]').val($(".J_HosptKs option:selected").text().split("-")[1]),$('input[name="hospitalUuid"]').val($(".J_HosptKs option:selected").data("value").split("~")[0]),$('input[name="hospdeptUuid"]').val($(".J_HosptKs option:selected").data("value").split("~")[1]),$('input[name="expertName"]').val($(".J_agreeexpertName option:selected").data("expertname"))}),$(".J_Place").change(function(){$(".J_SetPlace").text($(".J_Place").val()),$(".J_MegWrite").val($(".J_MsgTemp").text())}),$(".J_ConnectPerson").change(function(){$(".J_SetConnectPerson").text($(this).val().length>0?"向"+$(this).val():""),$(".J_MegWrite").val($(".J_MsgTemp").text())})},initDatePicker:function(){var t=this,i=["周日","周一","周二","周三","周四","周五","周六"];e.find(".J_DP").each(function(){var e=$(this),n=e.find(".J_DPTxt"),o=e.find(".J_DPVal");e.timepicker({defaultValue:function(){var e=o.val(),i=t.getNextWorkDay().dateString;return e?e:i},onSelect:function(e){var a=new Date;a.setFullYear(e[0],e[1]-1,e[2]);var r=o.val();return o.val(e.join("-")),t.validateDate()?(n.html(e[1]+"-"+e[2]+" "+i[a.getDay()]).removeClass("ph"),!0):(o.val(r),!1)}})})},getNextWorkDay:function(){var e=new Date,t=e.getFullYear()+"-"+(e.getMonth()+1)+"-"+e.getDate(),i=new Date(t.replace(/-/g,"/")),n=i.getDay(),o=5;3===n||4===n||5===n?o=7:6===n&&(o=6),i.setTime(i.getTime()+24*o*3600*1e3);var a=new Date;return a.setTime(a.getTime()+24*(o+6)*3600*1e3),{obj:i.toString(),time:i.getTime(),mmddStart:i.getMonth()+1+"月"+i.getDate()+"日",maxTime:a.getTime(),mmddEnd:a.getMonth()+1+"月"+a.getDate()+"日",dateString:i.getFullYear()+"-"+(i.getMonth()+1)+"-"+i.getDate()}},validateDate:function(){{var t=!0,i=e.find(".J_DPValFrom").val(),n=e.find(".J_DPValTo").val(),o=null,a=null;this.getNextWorkDay()}return i&&(o=new Date(i.replace(/-/g,"/"))),n&&(a=new Date(n.replace(/-/g,"/"))),o&&a&&o.getTime()>a.getTime()&&(t=!1,$GH.alert("期望就诊时间段不正确")),$(".J_SetDate").text($(".J_DPValFrom").val()),$(".J_MegWrite").val($(".J_MsgTemp").text()),$(".J_DPTxt").val("true"),t}};t.init()}),$GH.module("#J_AppointmentList",function(){var e={init:function(){var e=this;$Common.pullUpScroll.init({pageSize:10,scrollSelector:".J_DoctorScroller",listSelector:".J_DoctorList",loadingData:function(t,i){var n=$(".J_DoctorList");e.targets=n.data("page"),$.ajax({type:"get",dataType:"json",cache:!1,data:{pageNo:t,groupId:n.data("groupid")},url:n.data("action"),success:function(e){e.data&&0!==e.data.length?i&&i(e.data):($GH.alert("暂无对症预约信息！"),i&&i([]))},error:function(e,t){return"abort"===t?void $GH.alert("请求过于频繁，请求已中止"):void $GH.alert("操作失败，请稍后再试！")}})},buildHtml:function(t){return e.buildHtml(t)}})},buildHtml:function(e){var t=this.targets+"?id="+e.id+"&patientName="+encodeURIComponent(e.patientName)+"&patientSex="+e.patientSex+"&patientAge="+e.patientAge+"&state="+e.state+"&returnFlag="+e.returnFlag+"&gmtCreatedStr="+e.gmtCreatedStr;return'<li class="appointment-list" onclick=location.href="'+t+'">                <div class="appointment-title">                    <span class="appointment-name">'+e.patientName+'</span>                    <span class="appointment-sex-age">'+(1==e.patientSex?"男":"女")+" "+e.patientAge+'岁</span>                    <span class="appointment-status">'+["申请中","已通过","初审拒绝","审核中","终审拒绝","申请取消","待加号"][e.state]+'</span>                </div>                <div class="appointment-content">'+e.comments+'</div>                <div class="appointment-footer">                    <span class="appointment-jiuzhen">'+(e.returnFlag?"复诊":"初诊")+'</span>                    <span class="appointment-date">'+e.gmtCreatedStr+"</span>                </div>            </li>"}};e.init()}),$GH.module("#J_AppointmentDetail",function(e,t){var i={init:function(){t.imageShow=function(e){$GH.ImageUploader($(e.target).parent(),{onlySlider:e.target})}}};i.init()}),$GH.module("#J_EteamApplySetting",function(){var e={init:function(){var e=$GH.iScroll(".J_ExperienceScroll",{top:10,bottom:61}),t=null,i=!1,n=0,o=!1;$("#J_EteamApplayList").on("touchstart","li",function(o){var a=$(this),r=$(this).data("id");t=setTimeout(function(){n=e.y,i=!0,o.preventDefault();var t=[{name:"取消",style:"btn",fn:function(e){e()}},{name:"确定",style:"btn",fn:function(e){e(),$.ajax({type:"post",url:$GC.guahaoServer+"/eteam/applySettings/delete/"+r,data:{},cache:!1,dataType:"json",success:function(e){e&&(void 0===e.hasError||e.hasError?$GH.alert(e.message):(a.remove(),location.href=location.href+"?_t="+(new Date).getTime()))},error:function(e,t){return"abort"===t?void $GH.alert("请求过于频繁，请求已中止"):void $GH.alert("操作失败，请稍后再试！")}})}}];$GH.confirm("删除",t)},300)}).on("touchend","li",function(){if(o)clearTimeout(t),i=!1,o=!1;else if(i)i=!1;else{clearTimeout(t);var e=$(this).data("id"),n=$(this).parent().data("page");window.location.href=n+e}}),e.on("scrollStart",function(){clearTimeout(t),i=!1,o=!0})}};e.init()}),$GH.module("#J_EteamApplyNew",function(){var e={init:function(){$("#J_DieaseAddConditions .labelfor i").on("click",function(){var e=$(this).parent();$(this).addClass("rdio-cked").siblings("i").removeClass("rdio-cked");var t=e.children(".rdio-cked").data("value");e.children("input").val(t)}),$("#J_SelectDis").on("click",function(){return $GH.SS.init($(this),{showTreatment:!0}),!1}),$("#J_DieaseLimit").on("touchstart",function(){$("#J_DieaseCount").focus()}),$("#J_Submit").click(function(){var e=$GH.validate({".J_Txt":{required:"请填写疾病"},"#J_DieaseCount":{required:"请填写每班次病种加号量限制",wholenumber:"加号量必须为不小于1的整数",max:function(e){return e>127?"加号数量过多":!0}},"#J_Diagnosed":{required:"请选择初复诊"},"#J_Degree":{required:"请选择确诊程度"},"#J_SurgeryNeed":{required:"请选择手术需求"},"#J_PatientSrc":{required:"请选择病患来源"},"#J_Report":{required:"请选择是否上传诊断报告"}});e&&$("form").submit()})}};e.init()}),$GH.module("#J_DeptBooking",function(e,t){var i={cacheData:{},init:function(){var i=this;t.loading=!1,t.totalTips="正在加载排班数据",t.curTips="",t.dateList=[],t.curDate="",t.curBook={},this.loadSchedule(function(){e.find(".J_Calendar").css({width:57*$(".J_Calendar li").length+10+"px"});var t=e.find(".J_Calendar li:first");t.addClass("current"),i.refresh(t.data("id"))}),t.switchDate=function(e,n){t.curDate!==n.id&&($(e.currentTarget).addClass("current").siblings().removeClass("current"),i.refresh(n.id))},t.order=function(t){$GC.isLogined?4!==t.status&&$GH.alert("当前排班不可预约"):location.href=e.data("login-page")}},refresh:function(e){t.curDate=e,t.curBook=this.cacheData[e],0===t.curBook.length&&(t.curTips="暂无排班信息"),t.$scan()},loadSchedule:function(i){var n=this;t.loading=!0,t.$scan(),$.ajax({type:"get",dataType:"json",cache:!1,data:{departmentId:e.data("deptid")},url:"/json/white/expert/custom/shiftcase",success:function(e){return!e||$.isEmptyObject(e)?void(t.totalTips="暂无排班信息"):void("99"===e.returnFlag?t.totalTips="您访问过于频繁，请5分钟后再试":n.setSches(e))},error:function(e,i){return"abort"===i?void(t.totalTips="请求过于频繁，请求已中止"):void(t.totalTips="合作平台数据加载有问题，请稍后再试！")},complete:function(){t.loading=!1,t.$scan(),t.dateList.length>0&&(t.totalTips="","function"==typeof i&&i())}})},setSches:function(e){function i(e,t,i){var n=e[t.name];n&&(n.week=e.week,n.period=t.memo,n.showDateStr=i,n.price=n.price.toFixed(2),n.statusTxt=o[n.status],n.expert=e.customExpert,(!n.url||!$GC.isLogined||$GC.isLogined&&4!==n.status)&&(n.url="javascript:;"),4===n.status?c.push(n):d.push(n))}var n=[],o=["截止","停诊","已满","已满","预约"],a=[{name:"morning",memo:"上午"},{name:"afternoon",memo:"下午"},{name:"evening",memo:"晚上"},{name:"fl",memo:"全天"}];for(var r in e){for(var s=new Date(r.replace(/-/g,"/")),l=$.formatDate(s,"MM-dd"),c=[],d=[],u=e[r],h=0;h<u.length;h++)for(var p=0;p<a.length;p++)i(u[h],a[p],l);this.cacheData[r]=c.concat(d),n.push({id:r,week:$.formatDate(s,"E"),str:l})}n.sort(function(e,t){return e.id.replace(/-/g,"")-t.id.replace(/-/g,"")}),t.dateList=n}};i.init()}),$GH.module("#J_BookingDoctorList",function(e,t){function i(e,i,o){$.ajax({type:"get",dataType:"json",cache:!1,url:n,data:{pageNo:e},success:function(e){if(e.hasError)return void $GH.alert(e.message);if(e.data&&e.data.list){t.itemList=t.itemList.concat(e.data.list);for(var i,n=0;i=t.itemList[n];n++)"1"==i.doctorType?i.photo=$GC.staticServer+"/img/character/doc-special-l.png":"2"==i.doctorType&&(i.photo=$GC.staticServer+"/img/character/doc-common-l.png");o.pageCount=Math.ceil(e.data.totalCount/10),t.total=e.data.totalCount}},error:function(e,t){return"abort"===t?void $GH.alert("请求过于频繁，请求已中止"):void $GH.alert("系统服务异常，请稍后重试！")},complete:function(){$GH.loading.hide(),t.loading=!1,t.$scan(),i&&i()}})}var n=e.attr("data-action");t.loading=!0,t.itemList=[],t.total="",t.hyType=e.attr("data-type"),$GH.loading.show();var o=$Common.pullUpAngularScroll;o.init({initScrollCfg:{top:40},scrollSelector:".J_Scroller",pageSize:10,listSelector:".J_ScrollerList",loadingData:function(e,t){i(e,t,this)}})}),$GH.module("#J_BookingHospitalList",function(e,t){$("body").css("background","#FFFFFF"),t.sortList=[{id:"2",name:"综合排序"},{id:"7",name:"预约量"}],t.sort=$.extend({},t.sortList[0]),t.hlList=[{id:"all",name:"不限"},{id:"33",name:"三级甲等"}],t.hl=$.extend({},t.hlList[0]),t.wtList=[{id:"all",name:"不限"},{id:"1",name:"非常快"},{id:"2",name:"比较快"},{id:"3",name:"一般"}],t.wt=$.extend({},t.wtList[0]),t.loading=!0,t.itemList=[],$GH.locate(function(i){$Common.searchWithFilter({url:e.attr("data-action"),types:{all:["sort","wt","hl"],others:["wt","hl"]},successFn:function(e,t,i){e.list&&(t.itemList=t.itemList.concat(e.list),i.pageCount=e.pageCount,t.total=e.totalCount)}},t),t.areaName=i.province,"all"!=i.provinceId&&"all"!=i.cityId&&(t.areaName=i.city)})}),$GH.module("#J_SelectOffice",function(){var e={hospitalId:0,mainOffice:"",subOfficeId:0,cacheData:null,mapList:{},init:function(){var e=this;$GH.loading.show(),this.hospitalId=$("#J_HiddenHospital").val(),this.subOfficeId=$("#J_HiddenOffice").val(),$(".J_GoHospital").on("click",function(){location.href=$(this).data("page")+e.hospitalId}),this.initMainOffice(function(){e.initScroller(function(){$GH.loading.hide()})})},initScroller:function(e){var t=this;$Common.mulLevelSelect.init({defaultSubItem:t.subOfficeId,top:$(".J_GoHospital").height()+$(".top-action-bar").height(),loadSubData:function(e){if(t.cacheData){var i=$(this).data("id"),n=t.cacheData[i];e(n.obj||[])}},buildHtml:function(e){var t=e.text;return t.length>9&&(t=t.substr(0,9)+"..."),'<li data-id="'+e.value+'">'+t+"</li>"},onSubSelect:function(){location.href=$(this).closest(".J_SubScroller").data("page")+"?hospitalId="+t.hospitalId+"&deptId="+$(this).data("id")}}),"function"==typeof e&&e()},initMainOffice:function(e){var t=this;this.loadOffice(function(i){if(!i||0===i.length)return void("function"==typeof e&&($GH.alert("抱歉，没有数据！"),e()));for(var n=[],o=0;o<i.length;o++){var a=i[o];a.key&&(t.mapList[o]=a.key,n.push('<li data-id="'+o+'">'+a.key+"</li>"))}if($(".J_MainScroller").find("ul").append(n.join("")),t.cacheData=i,t.subOfficeId){for(var r=0;r<i.length;r++){var s=i[r];if(t.mainOffice)break;if(s.obj&&s.obj.length)for(var l=0;l<s.obj.length;l++)if(s.obj[l].value===t.subOfficeId){t.mainOffice=s.key;break}}$('.J_MainScroller li[data-id="'+t.mainOffice+'"]').addClass("current")}"function"==typeof e&&e()})},loadOffice:function(e){$.ajax({type:"get",dataType:"json",cache:!1,data:{hospitalId:this.hospitalId},url:$(".J_MainScroller").data("action"),success:function(t){e(t&&t.hospDepts)},error:function(e,t){return"abort"===t?void $GH.alert("请求过于频繁，请求已中止"):void $GH.alert("操作失败，请稍后再试！")}})}};e.init()}),$GH.module("#J_SelectCity",function(){var e={init:function(){var e=this,t=$("#J_HiddenProvince").val();t&&$('.J_MainScroller li[data-id="'+t+'"]').addClass("current"),$Common.mulLevelSelect.init({defaultSubItem:$("#J_HiddenCity").val(),loadSubData:function(t){var i=$(".J_SubScroller"),n=$(this).data("id");if("hot"===n)return void t(window.$hotCity);if("all"===n){var o="全国",a="全国",r="all",s="all";return $GH.cookie.set("_locs",r+"_"+s+"||"+encodeURIComponent(o)+"_"+encodeURIComponent(a),7),void e.redirect()}$.ajax({type:"get",dataType:"json",cache:!1,url:i.data("action"),data:{areaId:n},success:function(e){e&&e.data&&(e.data.splice(0,0,{id:"all",name:"不限"}),t(e.data))},error:function(e,t){return"abort"===t?void $GH.alert("请求过于频繁，请求已中止"):void $GH.alert("操作失败，请稍后再试！")
}})},buildHtml:function(e){return e.isHot?'<li data-province="'+e.provinceId+'" data-city="'+e.cityId+'">'+e.name+"</li>":'<li data-id="'+e.id+'">'+e.name+"</li>"},onSubSelect:function(){var t=$(".J_MainScroller li.current").data("id"),i=$(".J_MainScroller li.current").text(),n=$(this).data("id"),o=$(this).text();"hot"===t&&(t=$(this).data("province"),n=$(this).data("city"),i="all"===t?"全国":$('.J_MainScroller li[data-id="'+t+'"]').text()),$GH.cookie.set("_locs",t+"_"+n+"||"+encodeURIComponent(i)+"_"+encodeURIComponent(o),7),e.redirect()}})},redirect:function(){setTimeout(function(){var e=$("#J_HiddenFrom").val();e+=e.indexOf("?")>-1?"&":"?",e+="_="+(new Date).getTime(),location.href=e},100)}};e.init()}),$GH.module("#J_CommonSelectCity",function(){var e={init:function(){var e=this;$Common.mulLevelSelect.init({defaultSubItem:"hot",loadSubData:function(t){var i=$(".J_SubScroller"),n=$(this).data("id");if("hot"===n)return void t(window.$hotCity);if("all"===n){var o="全国",a="全国",r="all",s="all";return void e.redirect(r,s,o,a)}$.ajax({type:"get",dataType:"json",cache:!1,url:i.data("action"),data:{areaId:n},success:function(e){e&&e.data&&(e.data.splice(0,0,{id:"all",name:"不限"}),t(e.data))},error:function(e,t){return"abort"===t?void $GH.alert("请求过于频繁，请求已中止"):void $GH.alert("操作失败，请稍后再试！")}})},buildHtml:function(e){return e.isHot?'<li data-province="'+e.provinceId+'" data-city="'+e.cityId+'">'+e.name+"</li>":'<li data-id="'+e.id+'">'+e.name+"</li>"},onSubSelect:function(){var t=$(".J_MainScroller li.current").data("id"),i=$(".J_MainScroller li.current").text(),n=$(this).data("id"),o=$(this).text();"hot"===t&&(t=$(this).data("province"),n=$(this).data("city"),i="all"===t?"全国":$('.J_MainScroller li[data-id="'+t+'"]').text()),e.redirect(t,n,i,o)}})},redirect:function(e,t,i,n){var o=$.getUrlParams(),a="_="+(new Date).getTime(),r=function(r){return o.pi=e,o.ci=t,o.provinceStr=i,o.cityStr=n,r+"?"+$.param(o)+"&"+a};setTimeout(function(){switch($("#J_HiddenFrom").val()){case"consult":a=r("/consult/more");break;case"volunteer":a=r("/consult/volunteer");break;case"eteam":a=r("/eteam/list");break;case"quick":a=r("/wyky");break;default:a=""}a&&(location.href=a)},100)}};e.init()}),$GH.module("#J_CommonHospitalList",function(){var e={officeId:0,init:function(){$(document).on("click",".J_HospitalList li",function(){location.href=$(this).parent().parent().data("page")+$(this).data("id")}),$Common.pullUpScroll.init({pageSize:10,initScrollCfg:{top:40},scrollSelector:".J_HospitalScroller",listSelector:".J_HospitalList",loadingData:function(e,t){var i=this,n=$(".J_HospitalList");$.ajax({type:"get",dataType:"json",cache:!1,data:{pageNo:e},url:n.data("action"),success:function(e){e.data&&t&&(i.totalCount=e.totalCount,t(e.data))},error:function(e,t){return"abort"===t?void $GH.alert("请求过于频繁，请求已中止"):void $GH.alert("操作失败，请稍后再试！")}})},buildHtml:function(e){return $Common.buildHospitalItem(e)},afterRendered:function(){$(".J_Tips").show()}})}};e.init()}),function(e){"use strict";var t=!0,i={userAppTag:"MWYBrowser",doctorAppTag:"MWYSBrowser",device:function(){var e=navigator.userAgent,t=e.indexOf("Android")>-1,i=e.indexOf("iPhone")>-1,n=!!e.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/),o=e.indexOf("Windows Phone")>-1,a=e.indexOf(this.userAppTag)>-1,r=e.indexOf(this.doctorAppTag)>-1,s=t||n||o,l=s&&(a||r),c="";s&&(n&&(c="ios"),t&&(c="android"),o&&(c="wp"));var d=function(t){var i=0,n="";if(a)n=t.userAppTag;else{if(!r)return 0;n=t.doctorAppTag}return i=e.substr(e.indexOf(n)+n.length+1,5),i=i.replace(/\./g,""),i=parseInt(i,10)}(this);return{os:c,android:t,iPhone:i,mobile:s,app:l,androidApp:t&&l,iOSApp:n&&l,isUserApp:a,isDoctorApp:r,appVersion:d,supportJsBridge:a&&d>=235||r&&d>=234}}};e.$DT=i.device();var n={doReadying:!0,bridge:null,queue:[],enableDebugMode:function(t){e.onerror=function(i,n,o,a){if("function"==typeof t)t({message:i,script:n,line:o,column:a});else{var r=[];r.push("额，代码有错。。。"),r.push("\n错误信息：",i),r.push("\n出错文件：",n),r.push("\n出错位置：",o+"行，"+a+"列"),e.alert(r.join(""))}}},initBridge:function(t){e.WebViewJavascriptBridge?t(e.WebViewJavascriptBridge):document.addEventListener("WebViewJavascriptBridgeReady",function(){t(e.WebViewJavascriptBridge)},!1)},ready:function(e){return t&&$DT.app&&$DT.supportJsBridge?void this.initBridge(function(t){t.callNative=function(e,i,n){var o=function(e){if($DT.androidApp&&"string"==typeof e)try{e=JSON.parse(e)}catch(t){n()}n(e)};t.callHandler(e,i,o)},t.init(),e(t)}):void e()},adaptNative:function(e){this.ready(function(t){return t?void t.callNative("checkJsApi",[e.method],function(i){i[e.method]?e.successCallback(t):e.failCallback()}):void e.failCallback()})}};e.$BG=n,"function"==typeof define&&(define.amd||define.cmd)&&(define.amd?define(function(){return{$DT:i,$BG:n}}):define.cmd&&define(function(e,t,o){o.exports={$DT:i,$BG:n}}))}(window),$GH.module("#J_shoutao-home",function(){var e=(new Swiper(".swiper-container",{pagination:".pagination",loop:!0}),window.YulorePage);e&&e.enableOrderButton($GC.guahaoServer+"/my/order/list")});var BinaryFile=function(e,t,i){var n=e,o=t||0,a=0;this.getRawData=function(){return n},"string"==typeof e?(a=i||n.length,this.getByteAt=function(e){return 255&n.charCodeAt(e+o)},this.getBytesAt=function(e,t){for(var i=[],a=0;t>a;a++)i[a]=255&n.charCodeAt(e+a+o);return i}):"unknown"==typeof e&&(a=i||IEBinary_getLength(n),this.getByteAt=function(e){return IEBinary_getByteAt(n,e+o)},this.getBytesAt=function(e,t){return new VBArray(IEBinary_getBytesAt(n,e+o,t)).toArray()}),this.getLength=function(){return a},this.getSByteAt=function(e){var t=this.getByteAt(e);return t>127?t-256:t},this.getShortAt=function(e,t){var i=t?(this.getByteAt(e)<<8)+this.getByteAt(e+1):(this.getByteAt(e+1)<<8)+this.getByteAt(e);return 0>i&&(i+=65536),i},this.getSShortAt=function(e,t){var i=this.getShortAt(e,t);return i>32767?i-65536:i},this.getLongAt=function(e,t){var i=this.getByteAt(e),n=this.getByteAt(e+1),o=this.getByteAt(e+2),a=this.getByteAt(e+3),r=t?(((i<<8)+n<<8)+o<<8)+a:(((a<<8)+o<<8)+n<<8)+i;return 0>r&&(r+=4294967296),r},this.getSLongAt=function(e,t){var i=this.getLongAt(e,t);return i>2147483647?i-4294967296:i},this.getStringAt=function(e,t){for(var i=[],n=this.getBytesAt(e,t),o=0;t>o;o++)i[o]=String.fromCharCode(n[o]);return i.join("")},this.getCharAt=function(e){return String.fromCharCode(this.getByteAt(e))},this.toBase64=function(){return window.btoa(n)},this.fromBase64=function(e){n=window.atob(e)}},BinaryAjax=function(){function e(){var e=null;return window.ActiveXObject?e=new ActiveXObject("Microsoft.XMLHTTP"):window.XMLHttpRequest&&(e=new XMLHttpRequest),e}function t(t,i,n){var o=e();o?(i&&("undefined"!=typeof o.onload?o.onload=function(){"200"==o.status?i(this):n&&n(),o=null}:o.onreadystatechange=function(){4==o.readyState&&("200"==o.status?i(this):n&&n(),o=null)}),o.open("HEAD",t,!0),o.send(null)):n&&n()}function i(t,i,n,o,a,r){var s=e();if(s){var l=0;o&&!a&&(l=o[0]);var c=0;o&&(c=o[1]-o[0]+1),i&&("undefined"!=typeof s.onload?s.onload=function(){"200"==s.status||"206"==s.status||"0"==s.status?(s.binaryResponse=new BinaryFile(s.responseText,l,c),s.fileSize=r||s.getResponseHeader("Content-Length"),i(s)):n&&n(),s=null}:s.onreadystatechange=function(){if(4==s.readyState){if("200"==s.status||"206"==s.status||"0"==s.status){var e={status:s.status,binaryResponse:new BinaryFile("unknown"==typeof s.responseBody?s.responseBody:s.responseText,l,c),fileSize:r||s.getResponseHeader("Content-Length")};i(e)}else n&&n();s=null}}),s.open("GET",t,!0),s.overrideMimeType&&s.overrideMimeType("text/plain; charset=x-user-defined"),o&&a&&s.setRequestHeader("Range","bytes="+o[0]+"-"+o[1]),s.setRequestHeader("If-Modified-Since","Sat, 1 Jan 1970 00:00:00 GMT"),s.send(null)}else n&&n()}return function(e,n,o,a){a?t(e,function(t){var r,s,l=parseInt(t.getResponseHeader("Content-Length"),10),c=t.getResponseHeader("Accept-Ranges");r=a[0],a[0]<0&&(r+=l),s=r+a[1]-1,i(e,n,o,[r,s],"bytes"==c,l)}):i(e,n,o)}}();document.write("<script type='text/vbscript'>\r\nFunction IEBinary_getByteAt(strBinary, iOffset)\r\n	IEBinary_getByteAt = AscB(MidB(strBinary, iOffset + 1, 1))\r\nEnd Function\r\nFunction IEBinary_getBytesAt(strBinary, iOffset, iLength)\r\n  Dim aBytes()\r\n  ReDim aBytes(iLength - 1)\r\n  For i = 0 To iLength - 1\r\n   aBytes(i) = IEBinary_getByteAt(strBinary, iOffset + i)\r\n  Next\r\n  IEBinary_getBytesAt = aBytes\r\nEnd Function\r\nFunction IEBinary_getLength(strBinary)\r\n	IEBinary_getLength = LenB(strBinary)\r\nEnd Function\r\n</script>\r\n");var EXIF=function(){function e(e){return!!e.exifdata}function t(e,t){BinaryAjax(e.src,function(n){var o=i(n.binaryResponse);e.exifdata=o||{},t&&t.call(e)})}function i(e){if(255!=e.getByteAt(0)||216!=e.getByteAt(1))return!1;for(var t,i=2,n=e.getLength();n>i;){if(255!=e.getByteAt(i))return u&&console.log("Not a valid marker at offset "+i+", found: "+e.getByteAt(i)),!1;if(t=e.getByteAt(i+1),22400==t)return u&&console.log("Found 0xFFE1 marker"),a(e,i+4,e.getShortAt(i+2,!0)-2);if(225==t)return u&&console.log("Found 0xFFE1 marker"),a(e,i+4,e.getShortAt(i+2,!0)-2);i+=2+e.getShortAt(i+2,!0)}}function n(e,t,i,n,a){var r,s,l,c=e.getShortAt(i,a),d={};for(l=0;c>l;l++)r=i+12*l+2,s=n[e.getShortAt(r,a)],!s&&u&&console.log("Unknown tag: "+e.getShortAt(r,a)),d[s]=o(e,r,t,i,a);return d}function o(e,t,i,n,o){var a,r,s,l,c,d,u=e.getShortAt(t+2,o),h=e.getLongAt(t+4,o),p=e.getLongAt(t+8,o)+i;switch(u){case 1:case 7:if(1==h)return e.getByteAt(t+8,o);for(a=h>4?p:t+8,r=[],l=0;h>l;l++)r[l]=e.getByteAt(a+l);return r;case 2:return a=h>4?p:t+8,e.getStringAt(a,h-1);case 3:if(1==h)return e.getShortAt(t+8,o);for(a=h>2?p:t+8,r=[],l=0;h>l;l++)r[l]=e.getShortAt(a+2*l,o);return r;case 4:if(1==h)return e.getLongAt(t+8,o);r=[];for(var l=0;h>l;l++)r[l]=e.getLongAt(p+4*l,o);return r;case 5:if(1==h)return c=e.getLongAt(p,o),d=e.getLongAt(p+4,o),s=new Number(c/d),s.numerator=c,s.denominator=d,s;for(r=[],l=0;h>l;l++)c=e.getLongAt(p+8*l,o),d=e.getLongAt(p+4+8*l,o),r[l]=new Number(c/d),r[l].numerator=c,r[l].denominator=d;return r;case 9:if(1==h)return e.getSLongAt(t+8,o);for(r=[],l=0;h>l;l++)r[l]=e.getSLongAt(p+4*l,o);return r;case 10:if(1==h)return e.getSLongAt(p,o)/e.getSLongAt(p+4,o);for(r=[],l=0;h>l;l++)r[l]=e.getSLongAt(p+8*l,o)/e.getSLongAt(p+4+8*l,o);return r}}function a(e,t){if("Exif"!=e.getStringAt(t,4))return u&&console.log("Not valid EXIF data! "+e.getStringAt(t,4)),!1;var i,o,a,r,s,l=t+6;if(18761==e.getShortAt(l))i=!1;else{if(19789!=e.getShortAt(l))return u&&console.log("Not valid TIFF data! (no 0x4949 or 0x4D4D)"),!1;i=!0}if(42!=e.getShortAt(l+2,i))return u&&console.log("Not valid TIFF data! (no 0x002A)"),!1;if(8!=e.getLongAt(l+4,i))return u&&console.log("Not valid TIFF data! (First offset not 8)",e.getShortAt(l+4,i)),!1;if(o=n(e,l,l+8,p,i),o.ExifIFDPointer){r=n(e,l,l+o.ExifIFDPointer,h,i);for(a in r){switch(a){case"LightSource":case"Flash":case"MeteringMode":case"ExposureProgram":case"SensingMethod":case"SceneCaptureType":case"SceneType":case"CustomRendered":case"WhiteBalance":case"GainControl":case"Contrast":case"Saturation":case"Sharpness":case"SubjectDistanceRange":case"FileSource":r[a]=m[a][r[a]];break;case"ExifVersion":case"FlashpixVersion":r[a]=String.fromCharCode(r[a][0],r[a][1],r[a][2],r[a][3]);break;case"ComponentsConfiguration":r[a]=m.Components[r[a][0]]+m.Components[r[a][1]]+m.Components[r[a][2]]+m.Components[r[a][3]]}o[a]=r[a]}}if(o.GPSInfoIFDPointer){s=n(e,l,l+o.GPSInfoIFDPointer,f,i);for(a in s){switch(a){case"GPSVersionID":s[a]=s[a][0]+"."+s[a][1]+"."+s[a][2]+"."+s[a][3]}o[a]=s[a]}}return o}function r(i,n){return i.complete?(e(i)?n&&n.call(i):t(i,n),!0):!1}function s(t,i){return e(t)?t.exifdata[i]:void 0}function l(t){if(!e(t))return{};var i,n=t.exifdata,o={};for(i in n)n.hasOwnProperty(i)&&(o[i]=n[i]);return o}function c(t){if(!e(t))return"";var i,n=t.exifdata,o="";for(i in n)n.hasOwnProperty(i)&&(o+="object"==typeof n[i]?n[i]instanceof Number?i+" : "+n[i]+" ["+n[i].numerator+"/"+n[i].denominator+"]\r\n":i+" : ["+n[i].length+" values]\r\n":i+" : "+n[i]+"\r\n");return o}function d(e){return i(e)}var u=!1,h={36864:"ExifVersion",40960:"FlashpixVersion",40961:"ColorSpace",40962:"PixelXDimension",40963:"PixelYDimension",37121:"ComponentsConfiguration",37122:"CompressedBitsPerPixel",37500:"MakerNote",37510:"UserComment",40964:"RelatedSoundFile",36867:"DateTimeOriginal",36868:"DateTimeDigitized",37520:"SubsecTime",37521:"SubsecTimeOriginal",37522:"SubsecTimeDigitized",33434:"ExposureTime",33437:"FNumber",34850:"ExposureProgram",34852:"SpectralSensitivity",34855:"ISOSpeedRatings",34856:"OECF",37377:"ShutterSpeedValue",37378:"ApertureValue",37379:"BrightnessValue",37380:"ExposureBias",37381:"MaxApertureValue",37382:"SubjectDistance",37383:"MeteringMode",37384:"LightSource",37385:"Flash",37396:"SubjectArea",37386:"FocalLength",41483:"FlashEnergy",41484:"SpatialFrequencyResponse",41486:"FocalPlaneXResolution",41487:"FocalPlaneYResolution",41488:"FocalPlaneResolutionUnit",41492:"SubjectLocation",41493:"ExposureIndex",41495:"SensingMethod",41728:"FileSource",41729:"SceneType",41730:"CFAPattern",41985:"CustomRendered",41986:"ExposureMode",41987:"WhiteBalance",41988:"DigitalZoomRation",41989:"FocalLengthIn35mmFilm",41990:"SceneCaptureType",41991:"GainControl",41992:"Contrast",41993:"Saturation",41994:"Sharpness",41995:"DeviceSettingDescription",41996:"SubjectDistanceRange",40965:"InteroperabilityIFDPointer",42016:"ImageUniqueID"},p={256:"ImageWidth",257:"ImageHeight",34665:"ExifIFDPointer",34853:"GPSInfoIFDPointer",40965:"InteroperabilityIFDPointer",258:"BitsPerSample",259:"Compression",262:"PhotometricInterpretation",274:"Orientation",277:"SamplesPerPixel",284:"PlanarConfiguration",530:"YCbCrSubSampling",531:"YCbCrPositioning",282:"XResolution",283:"YResolution",296:"ResolutionUnit",273:"StripOffsets",278:"RowsPerStrip",279:"StripByteCounts",513:"JPEGInterchangeFormat",514:"JPEGInterchangeFormatLength",301:"TransferFunction",318:"WhitePoint",319:"PrimaryChromaticities",529:"YCbCrCoefficients",532:"ReferenceBlackWhite",306:"DateTime",270:"ImageDescription",271:"Make",272:"Model",305:"Software",315:"Artist",33432:"Copyright"},f={0:"GPSVersionID",1:"GPSLatitudeRef",2:"GPSLatitude",3:"GPSLongitudeRef",4:"GPSLongitude",5:"GPSAltitudeRef",6:"GPSAltitude",7:"GPSTimeStamp",8:"GPSSatellites",9:"GPSStatus",10:"GPSMeasureMode",11:"GPSDOP",12:"GPSSpeedRef",13:"GPSSpeed",14:"GPSTrackRef",15:"GPSTrack",16:"GPSImgDirectionRef",17:"GPSImgDirection",18:"GPSMapDatum",19:"GPSDestLatitudeRef",20:"GPSDestLatitude",21:"GPSDestLongitudeRef",22:"GPSDestLongitude",23:"GPSDestBearingRef",24:"GPSDestBearing",25:"GPSDestDistanceRef",26:"GPSDestDistance",27:"GPSProcessingMethod",28:"GPSAreaInformation",29:"GPSDateStamp",30:"GPSDifferential"},m={ExposureProgram:{0:"Not defined",1:"Manual",2:"Normal program",3:"Aperture priority",4:"Shutter priority",5:"Creative program",6:"Action program",7:"Portrait mode",8:"Landscape mode"},MeteringMode:{0:"Unknown",1:"Average",2:"CenterWeightedAverage",3:"Spot",4:"MultiSpot",5:"Pattern",6:"Partial",255:"Other"},LightSource:{0:"Unknown",1:"Daylight",2:"Fluorescent",3:"Tungsten (incandescent light)",4:"Flash",9:"Fine weather",10:"Cloudy weather",11:"Shade",12:"Daylight fluorescent (D 5700 - 7100K)",13:"Day white fluorescent (N 4600 - 5400K)",14:"Cool white fluorescent (W 3900 - 4500K)",15:"White fluorescent (WW 3200 - 3700K)",17:"Standard light A",18:"Standard light B",19:"Standard light C",20:"D55",21:"D65",22:"D75",23:"D50",24:"ISO studio tungsten",255:"Other"},Flash:{0:"Flash did not fire",1:"Flash fired",5:"Strobe return light not detected",7:"Strobe return light detected",9:"Flash fired, compulsory flash mode",13:"Flash fired, compulsory flash mode, return light not detected",15:"Flash fired, compulsory flash mode, return light detected",16:"Flash did not fire, compulsory flash mode",24:"Flash did not fire, auto mode",25:"Flash fired, auto mode",29:"Flash fired, auto mode, return light not detected",31:"Flash fired, auto mode, return light detected",32:"No flash function",65:"Flash fired, red-eye reduction mode",69:"Flash fired, red-eye reduction mode, return light not detected",71:"Flash fired, red-eye reduction mode, return light detected",73:"Flash fired, compulsory flash mode, red-eye reduction mode",77:"Flash fired, compulsory flash mode, red-eye reduction mode, return light not detected",79:"Flash fired, compulsory flash mode, red-eye reduction mode, return light detected",89:"Flash fired, auto mode, red-eye reduction mode",93:"Flash fired, auto mode, return light not detected, red-eye reduction mode",95:"Flash fired, auto mode, return light detected, red-eye reduction mode"},SensingMethod:{1:"Not defined",2:"One-chip color area sensor",3:"Two-chip color area sensor",4:"Three-chip color area sensor",5:"Color sequential area sensor",7:"Trilinear sensor",8:"Color sequential linear sensor"},SceneCaptureType:{0:"Standard",1:"Landscape",2:"Portrait",3:"Night scene"},SceneType:{1:"Directly photographed"},CustomRendered:{0:"Normal process",1:"Custom process"},WhiteBalance:{0:"Auto white balance",1:"Manual white balance"},GainControl:{0:"None",1:"Low gain up",2:"High gain up",3:"Low gain down",4:"High gain down"},Contrast:{0:"Normal",1:"Soft",2:"Hard"},Saturation:{0:"Normal",1:"Low saturation",2:"High saturation"},Sharpness:{0:"Normal",1:"Soft",2:"Hard"},SubjectDistanceRange:{0:"Unknown",1:"Macro",2:"Close view",3:"Distant view"},FileSource:{3:"DSC"},Components:{0:"",1:"Y",2:"Cb",3:"Cr",4:"R",5:"G",6:"B"}};return{readFromBinaryFile:d,pretty:c,getTag:s,getAllTags:l,getData:r,Tags:h,TiffTags:p,GPSTags:f,StringValues:m}}();!function(e){function t(e,t){this.file=e,this.options=n.extend({},o,t),this._defaults=o,this._name=i,this.init()}var i="canvasResize",n={newsize:function(e,t,i,n,o){var a=o?"h":"";if(i&&e>i||n&&t>n){var r=e/t;(r>=1||0===n)&&i&&!o?(e=i,t=i/r>>0):o&&i/n>=r?(e=i,t=i/r>>0,a="w"):(e=n*r>>0,t=n)}return{width:e,height:t,cropped:a}},dataURLtoBlob:function(e){for(var t=e.split(",")[0].split(":")[1].split(";")[0],i=atob(e.split(",")[1]),n=new ArrayBuffer(i.length),o=new Uint8Array(n),a=0;a<i.length;a++)o[a]=i.charCodeAt(a);var r=window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder;return r?(r=new(window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder),r.append(n),r.getBlob(t)):r=new Blob([n],{type:t})},detectSubsampling:function(e){var t=e.width,i=e.height;if(t*i>1048576){var n=document.createElement("canvas");n.width=n.height=1;var o=n.getContext("2d");return o.drawImage(e,-t+1,0),0===o.getImageData(0,0,1,1).data[3]}return!1},rotate:function(e,t){var i={1:{90:6,180:3,270:8},2:{90:7,180:4,270:5},3:{90:8,180:1,270:6},4:{90:5,180:2,270:7},5:{90:2,180:7,270:4},6:{90:3,180:8,270:1},7:{90:4,180:5,270:2},8:{90:1,180:6,270:3}};return i[e][t]?i[e][t]:e},transformCoordinate:function(e,t,i,n){switch(n){case 5:case 6:case 7:case 8:e.width=i,e.height=t;break;default:e.width=t,e.height=i}var o=e.getContext("2d");switch(n){case 1:break;case 2:o.translate(t,0),o.scale(-1,1);break;case 3:o.translate(t,i),o.rotate(Math.PI);break;case 4:o.translate(0,i),o.scale(1,-1);break;case 5:o.rotate(.5*Math.PI),o.scale(1,-1);break;case 6:o.rotate(.5*Math.PI),o.translate(0,-i);break;case 7:o.rotate(.5*Math.PI),o.translate(t,-i),o.scale(-1,1);break;case 8:o.rotate(-.5*Math.PI),o.translate(-t,0)}},detectVerticalSquash:function(e,t,i){var n=document.createElement("canvas");n.width=1,n.height=i;var o=n.getContext("2d");o.drawImage(e,0,0);for(var a=o.getImageData(0,0,1,i).data,r=0,s=i,l=i;l>r;){var c=a[4*(l-1)+3];0===c?s=l:r=l,l=s+r>>1}var d=l/i;return 0===d?1:d},callback:function(e){return e},extend:function(){var e=arguments[0]||{},t=1,i=arguments.length,o=!1;e.constructor===Boolean&&(o=e,e=arguments[1]||{}),1===i&&(e=this,t=0);for(var a;i>t;t++)if(null!==(a=arguments[t]))for(var r in a)e!==a[r]&&(o&&"object"==typeof a[r]&&e[r]?n.extend(e[r],a[r]):void 0!==a[r]&&(e[r]=a[r]));return e}},o={width:300,height:0,crop:!1,quality:80,rotate:0,callback:n.callback};t.prototype={init:function(){var e=this,t=this.file,i=new FileReader;i.onloadend=function(i){var o=i.target.result,a=atob(o.split(",")[1]),r=new BinaryFile(a,0,a.length),s=EXIF.readFromBinaryFile(r),l=new Image;l.onload=function(){var i=s.Orientation||1;i=n.rotate(i,e.options.rotate);var o=i>=5&&8>=i?n.newsize(l.height,l.width,e.options.width,e.options.height,e.options.crop):n.newsize(l.width,l.height,e.options.width,e.options.height,e.options.crop),a=l.width,r=l.height,c=o.width,d=o.height,u=document.createElement("canvas"),h=u.getContext("2d");h.save(),n.transformCoordinate(u,c,d,i),n.detectSubsampling(l)&&(a/=2,r/=2);var p=1024,f=document.createElement("canvas");f.width=f.height=p;for(var m=f.getContext("2d"),g=n.detectVerticalSquash(l,a,r),v=0;r>v;){for(var $=v+p>r?r-v:p,w=0;a>w;){var y=w+p>a?a-w:p;m.clearRect(0,0,p,p),m.drawImage(l,-w,-v);var S=Math.floor(w*c/a),_=Math.ceil(y*c/a),b=Math.floor(v*d/r/g),C=Math.ceil($*d/r/g);h.drawImage(f,0,0,y,$,S,b,_,C),w+=p}v+=p}h.restore(),f=m=null;var x=document.createElement("canvas");x.width="h"===o.cropped?d:c,x.height="w"===o.cropped?c:d;var J="h"===o.cropped?.5*(d-c):0,H="w"===o.cropped?.5*(c-d):0;if(newctx=x.getContext("2d"),newctx.drawImage(u,J,H,c,d),"image/png"===t.type)var k=x.toDataURL(t.type);else var k=x.toDataURL("image/jpeg",.01*e.options.quality);e.options.callback(k,x.width,x.height)},l.src=o},i.readAsDataURL(t)}},e[i]=function(e,i){return"string"==typeof e?n[e](i):void new t(e,i)}}(window),$GH.module("#J_Case_List",function(e,t){t.jump=function(e){location.href=e}}),$GH.module("#J_Case_GuahaoInfo",function(e,t){var i=e.find("form").first();t.submit=function(e){e.preventDefault();var t=$GH.validate({"#clinicDate":{required:"请选择就诊日期"},"#hospitalName":{required:"请填写医院名称"},"#hospDeptName":{required:"请填写科室名称"}});t&&$.post(i.attr("action"),i.serialize(),function(e){return e.hasError?void $GH.alert(e.message):($GH.alert(e.message),void setTimeout(function(){location.href=e.returnUrl},2e3))},"json")};var n=e.find(".GJ_DatePicker"),o=new Date;n.find(".GJ_ShowDate").html(o.getFullYear()+"年"+(o.getMonth()+1)+"月"+o.getDate()+"日"),n.find(".GJ_DateValue").val([o.getFullYear(),o.getMonth()+1,o.getDate()].join("-"))}),$GH.module("#J_CaseZhusu",function(e,t){var i=e.find("form").first();t.status={},t.selectStatus=function(){new $GH.ActionSheet("",[{name:"已确诊",styleClass:"option",fn:function(){t.status.name="已确诊",t.status.val=1,t.$scan(),this.close()}},{name:"未确诊",styleClass:"option",fn:function(){t.status.name="未确诊",t.status.val=2,t.$scan(),this.close()}},{name:"取消",styleClass:"cancel",fn:function(){this.close()}}]).open()},$GH.ImageUploader($(".J_ImageUp"),{inputName:"imagePath",uploaderUrl:window.$GC?$GC.guahaoServer+"/json/black/image/upload?type=1":"",afterComplete:function(){$(".J_imagedesc").hide();var e=$(".J_ImageUp").find(".preview").length;e>=9&&$(".J_UploadBtn").hide()},afterDelete:function(){var e=$(".J_ImageUp").find(".preview").length;1==e&&$(".J_imagedesc").show()}}),$("#J_Submit").click(function(){$.post(i.attr("action"),i.serialize(),function(e){return e.hasError?void $GH.alert(e.message):($GH.alert(e.message),void setTimeout(function(){location.href=e.returnUrl},2e3))},"json")}),$("#J_SelectDis").on("click",function(){$GH.SS.init($(this),{mustUuid:!0});var e=$(this);return $("#J_SS").find(".J_List").on("click","p",function(){return e.find(".J_Txt").attr("value",$(this).text()),e.find(".J_Txt").text(""),!1}),!1}),$(".J_zhusuvisit span").click(function(){$(this).addClass("selected").siblings().removeClass("selected"),$(".J_visitval").val($(this).attr("tar"))}),$(".J_zhusutags span").click(function(){var e=$(this).attr("data-id"),t=$(this).text(),i=$(".J_tagsid").val(),n=$(".J_tagstext").val();if($(this).hasClass("selected")){if($(this).removeClass("selected"),""==i)return!1;var o=i.split(","),a=n.split(","),r=o.indexOf(e);o.splice(r,1),a.splice(r,1),i=o.toString(),n=a.toString(),$(".J_tagsid").val(i),$(".J_tagstext").val(n)}else if($(this).addClass("selected"),""==i)$(".J_tagsid").val(e),$(".J_tagstext").val(t);else{var o=i.split(","),a=n.split(",");o.push(e),a.push(t),i=o.toString(),n=a.toString(),$(".J_tagsid").val(i),$(".J_tagstext").val(n)}})}),$GH.module("#J_CaseAdvice",function(e){var t=e.find("form").first();$("#J_Submit").click(function(){$.post(t.attr("action"),t.serialize(),function(e){return e.hasError?void $GH.alert(e.message):($GH.alert(e.message),void setTimeout(function(){location.href=e.returnUrl},2e3))},"json")})}),$GH.module("#J_CaseInspection",function(e){var t=e.find("form").first();$GH.ImageUploader($(".J_ImageUp"),{inputName:"imagePath",uploaderUrl:window.$GC?$GC.guahaoServer+"/json/black/image/upload?type=1":"",afterComplete:function(){$(".J_imagedesc").hide();var e=$(".J_ImageUp").find(".preview").length;e>=9&&$(".J_UploadBtn").hide()},afterDelete:function(){var e=$(".J_ImageUp").find(".preview").length;1==e&&$(".J_imagedesc").show()}}),$("#J_Submit").click(function(){$.post(t.attr("action"),t.serialize(),function(e){return e.hasError?void $GH.alert(e.message):($GH.alert(e.message),void setTimeout(function(){location.href=e.returnUrl},2e3))},"json")})}),$GH.module("#J_CasePresscription",function(e){var t=e.find("form").first();$GH.ImageUploader($(".J_ImageUp"),{inputName:"imagePath2",uploaderUrl:window.$GC?$GC.guahaoServer+"/json/black/image/upload?type=1":"",afterComplete:function(){$(".J_imagedesc").hide();var e=$(".J_ImageUp").find(".preview").length;e>=9&&$(".J_UploadBtn").hide()},afterDelete:function(){var e=$(".J_ImageUp").find(".preview").length;1==e&&$(".J_imagedesc").show()}}),$("#J_Submit").click(function(){$.post(t.attr("action"),t.serialize(),function(e){return e.hasError?void $GH.alert(e.message):($GH.alert(e.message),void setTimeout(function(){location.href=e.returnUrl},2e3))},"json")})}),$GH.module("#J_CaseDetail",function(e){e.find(".g-image-upload-box .preview").on("click",function(){$GH.ImageUploader($(this).parent(),{onlySlider:this})}),$("#J_SelectDis").on("click",function(){$GH.SS.init($(this),{mustUuid:!0});var e=$(this);return $("#J_SS").find(".J_List").on("click","p",function(){e.find(".J_Txt").attr("value",$(this).text()),e.find(".J_Txt").text("");var t=e.find("#postaction").val(),i={diagnose:$(this).text(),patientId:e.find("#patientId").val(),medicalRecordId:e.find("#medicalRecordId").val(),saveType:e.find("#medicalRecordSaveType").val()};return $.post(t,i,function(e){return e.hasError?void $GH.alert(e.message):void 0},"json"),!1}),!1})}),$GH.module("#J_CaseAdd",function(e){var t=e.find("form");t.on("submit",function(e){e.preventDefault();var i=$GH.validate({"#diagnose":{required:"请填写: 医生诊断"},"#enjoin":{required:"请填写: 医生嘱咐"}});i&&$.post(t.attr("action"),t.serialize(),function(e){return e.hasError?void $GH.alert(e.message):($GH.alert(e.message),void setTimeout(function(){location.href=e.returnUrl},2e3))},"json")}),$GH.ImageUploader($(".J_ImageUp1"),{inputName:"imagePath",uploaderUrl:window.$GC?$GC.guahaoServer+"/json/black/image/upload?type=1":""}),$GH.ImageUploader($(".J_ImageUp2"),{inputName:"imagePath2",uploaderUrl:window.$GC?$GC.guahaoServer+"/json/black/image/upload?type=1":""})}),$GH.module("#J_CaseComplete",function(e,t){var i=e.find(".J_Toggler"),n=e.find("form");i.on("click",function(){var e=$(this),t=e.data("toggler");e.toggleClass("g-arrow-u"),$(this).next(t).toggle()}),$GH.ImageUploader($(".J_ImageUp1"),{inputName:"imagePath",uploaderUrl:window.$GC?$GC.guahaoServer+"/json/black/image/upload?type=1":""}),$GH.ImageUploader($(".J_ImageUp2"),{inputName:"imagePath2",uploaderUrl:window.$GC?$GC.guahaoServer+"/json/black/image/upload?type=1":""}),e.find(".g-image-upload-box .preview").on("click",function(){$GH.ImageUploader($(this).parent(),{onlySlider:this})}),t.submit=function(e){e.preventDefault();var t=$GH.validate({"#diagnose":{required:"请填写: 医生诊断"},"#enjoin":{required:"请填写: 医生嘱咐"}});t&&$.post(n.attr("action"),n.serialize(),function(e){return e.hasError?void $GH.alert(e.message):($GH.alert(e.message),void setTimeout(function(){location.href=e.returnUrl},2e3))},"json")}}),$GH.module("#J_CaseFeedback",function(e,t){var i=e.find("form").first();$GH.ImageUploader($(".g-image-upload-box"),{inputName:"imagePath",uploaderUrl:window.$GC?$GC.guahaoServer+"/json/black/image/upload?type=1":""}),e.find(".J_Status_Select > a").on("click",function(){var t=$(this);t.addClass("selected").siblings().removeClass("selected"),e.find(".J_Status_Select_Value").val(t.data("val"))}),t.submit=function(e){e.preventDefault(),$.post(i.attr("action"),i.serialize(),function(e){return e.hasError?void $GH.alert(e.message):($GH.alert(e.message),void setTimeout(function(){location.href=e.returnUrl},2e3))},"json")}}),$GH.module("#J_CaseHistory",function(e){var t=e.find(".J_Vline");t.css({height:document.body.scrollHeight})}),$GH.module("#J-Obstetrical-History",function(e){e.find("span").on("click",function(e){var t=$(e.target);t.hasClass("on")?t.removeClass("on"):t.addClass("on").siblings().removeClass("on")}),e.find("[sid=submitBut]").on("click",function(){for(var t=e.find("[sid=span-content]"),i=0;i<t.length;i++){var n=$(t[i]),o=n.find("[sid=form-input]"),a=n.find("[class=on]");o.html("");for(var r="",s=0;s<a.length;s++)r+='<input type="hidden" value="'+$(a[s]).data("id")+'" name="'+n.find("[sid=nameValue]").val()+"["+s+']" />';o.html(r)}var l=e.find("[sid=myform]");$.ajax({type:l.attr("method"),url:l.attr("action"),data:l.serialize(),dataType:"json",error:function(){$GH.alert("Connection error")},success:function(e){e.hasError?$GH.alert(e.message):$GH.alert(e.message,null,function(){e.returnUrl&&(location.href=e.returnUrl)})}})})}),$GH.module("#J-Health-Personal",function(e){e.find("span").on("click",function(e){var t=$(e.target);t.hasClass("on")?t.removeClass("on"):t.addClass("on")}),e.find("[sid=submitBut]").on("click",function(){var t=e.find("[sid=form-input]"),i=e.find("[sid=span-content]").find("[class=on]");t.html("");for(var n="",o=0;o<i.length;o++)n+='<input type="hidden" value="'+$(i[o]).data("id")+'" name="'+e.find("[sid=nameValue]").val()+"["+o+']" />';t.html(n);var a=e.find("[sid=myform]");$.ajax({type:a.attr("method"),url:a.attr("action"),data:a.serialize(),dataType:"json",error:function(){$GH.alert("Connection error")},success:function(e){e.hasError?$GH.alert(e.message):$GH.alert(e.message,null,function(){e.returnUrl&&(location.href=e.returnUrl)})}})})});var $GS={};$GS.searchSuggest=function(e){var t={contextParams:{},scroll:null,cacheHistory:[],init:function(){var t=this;this.initSearchBar(),this.contextParams=e||{},this.scroll=$GH.iScroll(".J_ListScroll",{top:this.contextParams.top||$(".J_Input").height()-1,zIndex:999}),$(".J_ListScroll").hide(),$(".J_ListScroll").on("touchmove",function(){$("#J_Keyword").blur()}),$(document).on("tap",".J_SuggestList li",function(){t.redirect($(this).text())}),$(".J_Clear").on("click",function(){$("#J_Keyword").val("").focus()})},initSearchBar:function(){var e=this,t=$("#J_Keyword").val();t&&t.length&&($("#J_Keyword")[0].selectionStart=$("#J_Keyword")[0].selectionEnd=t.length,$(".J_Clear").show()),$(".J_Clear").on("click",function(){$("#J_Keyword").val("").focus()}),$(".J_Search").on("click",function(){e.redirect($("#J_Keyword").val())}),$("#J_SearchForm").on("submit",function(){return e.redirect($("#J_Keyword").val()),!1}),$(".J_Cancel").on("click",function(){window.history.back(-1)}),$("#J_Keyword").on("input focus",function(){var t=$.trim($(this).val());t?($(".J_Clear").show(),e.loadSuggest()):($(".J_Clear").hide(),$(".J_ListScroll").hide())}),$("#J_Keyword").on("keydown",function(t){13===t.which&&e.redirect($(this).val())}),$("#J_Keyword").on("blur",function(){$(".J_ListScroll").hide()})},redirect:function(e){return e?void(location.href=$("#J_Keyword").data("goto")+"?q="+encodeURIComponent(e)):void $GH.alert("请输入搜索关键词")},loadSuggest:function(){var e=$("#J_Keyword");if(e.val()){var t=this;$.ajax({type:"get",dataType:"json",cache:!1,url:e.data("action"),data:{q:e.val()},success:function(e){if(e){var i=e.suggest;i&&(i=i.hospital||i.doctor||i.disease,t.showSuggest(i))}},error:function(e,t){return"abort"===t?void $GH.alert("请求过于频繁，请求已中止"):void $GH.alert("操作失败，请稍后再试！")
}})}},showSuggest:function(e){if(e&&e.length){for(var t=[],i=0;i<e.length;i++)t.push("<li>"+e[i].name+"</li>");$(".J_ListScroll").show(),$(".J_SuggestList").show().find("ul").empty().append(t.join("")),this.scroll.refresh()}}};t.init()},$GS.searchResult=function(e){var t={context:"",contextParams:{},cacheArea:{},cacheSort:{},cacheFilter:{},init:function(){var t=this;if(this.contextParams=e||{},this.context=$("#J_Context").val(),this.context){var i=$(window).height()-$(".J_ConsContainer").offset().top;$(".J_Cons span").on("click",function(){if($(this).data("sx"))return!1;$(this).siblings().removeClass("current"),$(this).addClass("current");var e=$(this).data("id");return 1===e?location.href=$(this).data("page"):2===e?($(".J_"+t.context+"Complex").show(),$(".J_"+t.context+"Filter").hide(),$(".J_ConsContainer").height(i).show()):($(".J_"+t.context+"Complex").hide(),$(".J_"+t.context+"Filter").show(),$(".J_ConsContainer").height(i).show()),!1}),$(".J_ConsContainer").on("click",function(e){return $(e.target).closest(".J_Complex").length||$(e.target).closest(".J_Filter").length?void 0:($(this).hide(),!1)}),this.initParams(),this["init"+this.context+"List"](),this.initSort(),this.initFilter()}},initSort:function(){var e=this;$(".J_Complex li").on("click",function(){$(this).siblings().removeClass("selected"),$(this).addClass(" selected"),e.cacheSort[e.context]=$(this).data("id"),$(".J_ComplexName").html($(this).text()),$(".J_"+e.context+"List").trigger("refreshList"),$(".J_Complex").hide(),$(".J_ConsContainer").hide()})},initFilter:function(){var e=this;$(".J_Filter .cancel").on("click",function(){$(this).closest(".J_Filter").hide();var t=e.cacheFilter[e.context];"Doctor"===e.context?(e.setFilterData(".J_Exist",t.es),e.setFilterData(".J_DoctorLevel",t.dt)):e.setFilterData(".J_HospitalLevel",t.hl),$(".J_ConsContainer").hide()}),$(".J_Filter .ok").on("click",function(){$(this).closest(".J_Filter").hide(),e.cacheFilter[e.context]="Doctor"===e.context?{es:$(".J_Exist .selected").data("id")||"",dt:$(".J_DoctorLevel .selected").data("id")||""}:{hl:$(".J_HospitalLevel .selected").data("id")||"all"},$(".J_ConsContainer").hide(),$(".J_"+e.context+"List").trigger("refreshList")}),$(".J_Filter li").on("click",function(){$(this).siblings().removeClass("selected"),$(this).addClass("selected"),$(this).parent().parent().prev().find(".status").text($(this).text())})},setFilterData:function(e,t){$(e).find("li").removeClass("selected");var i=$(e).find('li[data-id="'+t+'"]');i.addClass("selected"),$(e).prev().find(".status").text(i.text())},initParams:function(){this.cacheArea[this.context]=$("#J_HiddenArea").val()||"";var e={};try{var t=window.localStorage;e=t.getItem("searchParams_"+this.context),e=JSON.parse(e)}catch(i){return void console.log("获取搜索缓存异常")}this.cacheSort[this.context]=e&&e.sort||"2";var n=$(".J_"+this.context+'Complex li[data-id="'+this.cacheSort[this.context]+'"]');if(n.length>0&&(n.addClass("selected"),$(".J_ComplexName").html(n.text())),"Doctor"===this.context){var o=e&&e.es||"",a=e&&e.dt||"";this.cacheFilter.Doctor={es:o,dt:a},this.setFilterData(".J_Exist",o),this.setFilterData(".J_DoctorLevel",a)}else{var r=e&&e.hl||"all";this.cacheFilter.Hospital={hl:r},this.setFilterData(".J_HospitalLevel",r)}},storeParams:function(e){var t=window.localStorage;if(t)try{t.setItem("searchParams_"+this.context,JSON.stringify(e))}catch(i){}},getParams:function(){var e=this.context,t={hid:$("#J_HiddenHospital").val()||"",q:$("#J_Keyword").val(),sort:this.cacheSort[e]};return"Doctor"===e?(t.es=this.cacheFilter[e].es,t.dt=this.cacheFilter[e].dt):t.hl=this.cacheFilter[e].hl,this.storeParams(t),t},initDoctorList:function(){var e=this;$(document).on("click",".J_DoctorList li",function(){location.href=$(this).parent().parent().data("page")+"?expertId="+$(this).data("id")}),$Common.pullUpScroll.init({pageSize:10,initScrollCfg:{top:this.contextParams.top||120,bottom:this.contextParams.bottom||0},scrollSelector:".J_DoctorScroller",listSelector:".J_DoctorList",loadingData:function(t,i){var n=this;1===t&&($(".J_MainContent").hide(),$(".J_Loading").show());var o=e.getParams();o.page=t;var a=$(".J_DoctorList");$.ajax({type:"get",dataType:"json",cache:!1,data:o,url:a.data("action"),success:function(e){if(e.data&&0!==e.data.totalCount){$(".J_EmptyTips").hide(),$(".J_MainContent").show();var o=e.data.totalCount;n.totalCount=o,$(".J_TotalCouont").text(o),i&&i(e.data.list)}else 1===t&&($(".J_EmptyTips").show(),$(".J_MainContent").hide()),i&&i([])},error:function(e,t){return"abort"===t?void $GH.alert("请求过于频繁，请求已中止"):void $GH.alert("操作失败，请稍后再试！")}})},buildHtml:function(t){return(e.contextParams.buildDoctorItem||$Common.buildDoctorItem)(t)}})}};t.init()},$GH.module("[class*=gp-czwy-]",function(){$GH.module(".gp-czwy-recommend",function(){var e={more:$("#fwnr-more")};e.more.on("click",function(){var e=$(this),t=e.parent(),i=t.find("ul");$GH.autoHeight(i[0]),t.addClass("active")})}),$GH.module(".gp-czwy-buy",function(){function e(e){var i=t.time[0],n=new Date(i.value).getTime();return n!==n?(i.value=o,$GH.alert("日期无效"),!1):n<new Date(o)?(1==e&&(i.value=o),$GH.alert("日期超出最小值"),!1):n>new Date(a)?(1==e&&(i.value=a),$GH.alert("日期超出最大值"),!1):!0}var t={form:$("#buy-form"),submit:$("#buy-submit"),time:$("#service-starttime"),city:$("#parent-address-city"),county:$("#parent-address-county")};t.submit.click(function(){t.form.submit()}),t.form.on("submit",function(){var t=$GH.validate({"#parent-name":{required:"请填写家长姓名"},"#parent-mobile":{required:"请填写家长手机号码"},"#parent-address-detail":{required:"请填写详细的通讯地址"},"#baby-name":{required:"请填写宝宝姓名"},"#baby-idno":{required:"请填写宝宝证件号码"},"#service-starttime":{checkDate:function(){var t=e();return t?!0:"服务开始时间超出有效范围"}},"#agreement":{check:function(){return this[0].checked||"请勾选《成长无忧儿童医疗服务条款》"}}});return t}),t.city.on("change",function(){0===this.selectedIndex?t.county.removeAttr("disabled"):(t.county.attr("disabled","disabled"),t.county[0].selectedIndex=0)}),t.form.data("error")&&$GH.alert(t.form.data("error"));var i=document.createElement("input"),n=$GH.getTime(),o=$GH.getTime("Y-M-D",new Date(n.y,n.m-1,n.d+1)),a=$GH.getTime("Y-M-D",new Date(n.y,n.m-1+12,n.d));i.type="date",t.time.timepicker({defaultValue:function(){return $GH.getTime("y-m-d",new Date(t.time[0].value))},minValue:o,maxValue:a,onSelect:function(i){t.time.val($GH.getTime("Y-M-D",new Date(i[0],i[1]-1,i[2]))),e(!0)}}),e(!0)}),$GH.module(".gp-czwy-confirm",function(){var e={form:$("#confirm-form"),submit:$("#confirm-submit")};e.submit.on("click",function(){e.form.submit()})})}),$GH.module(".gp-daozhen-select",function(e){var t=Number(document.body.scrollHeight-window.screen.availHeight);if(t>0){var i=window.screen.availHeight/2;e.find(".box").height(i),e.find(".box").next("p").css({top:window.screen.availHeight/2})}}),$GH.module("#J_Daozhen_JB_1",function(e){e.find(".J_Select > a").on("click",function(){var t=$(this);e.find(".J_Select > a").removeClass("selected"),t.addClass("selected")}),$GH.iScroll(".J_ListScroll",{top:85}),$(".J_ListScroll a").on("click",function(){location.href=$(".J_ListScroll").data("page")+$(this).text()+"&hospitalId="+($("#J_HiddenHospital").val()||"")}),$(".J_Search").on("click",function(){location.href=$("#J_Keyword").data("page")})}),$GH.module("#J_Daozhen_2",function(e,t){var i=$GC.guahaoServer+"/guide/chooseDiagnose";t.diagnose={},t.select=function(e){t.loading=!0,$GH.loading.show(),t.$scan(),$.post(i,{isSelect:e,diagnoseUuid:$("#diagnoseUuid").val()},function(e){return e.hasError?void $GH.alert(e.message):(t.diagnose=e.data.diagnoseItem,t.loading=!1,$GH.loading.hide(),void t.$scan())},"json")}}),$GH.module("#J_Daozhen_body",function(){var e={male_front_facial:[284,75,442,192],male_front_neck:[314,198,418,243],male_front_chest:[227,291,502,438],male_front_abdomen:[245,441,481,669],male_front_arm_left:[200,282,254,480,68,873,26,786,176,516],male_front_arm_right:[540,290,478,492,625,864,685,849],male_front_leg:[218,804,480,1344],male_front_genitals:[272,678,457,786],male_back_head:[272,0,442,180],male_back_neck:[320,186,415,219],male_back_back:[242,255,478,612],male_back_arm_left:[182,282,273,510,26,774,98,860,254,492],male_back_arm_right:[540,290,469,492,631,876,688,850],male_back_excretion:[236,615,496,780],male_back_leg:[215,795,493,1383],female_front_facial:[266,75,428,183],female_front_neck:[302,189,392,240],female_front_chest:[233,303,470,414],female_front_abdomen:[257,423,446,624],female_front_arm_left:[194,267,251,399,182,765,140,792,89,717,161,633],female_front_arm_right:[497,276,452,402,533,786,596,765],female_front_leg:[209,744,491,1365],female_front_genitals:[252,636,458,732],female_back_head:[254,12,454,207],female_back_neck:[302,210,406,240],female_back_back:[254,252,466,588],female_back_arm_left:[212,282,179,645,104,702,140,780,188,759,260,39],female_back_arm_right:[496,285,454,414,541,783,592,774],female_back_excretion:[239,603,490,741],female_back_leg:[227,771,496,1383]},t=$("#guahaoServer").val(),i=$("#hospitalId").val(),n=['<map name="male_front" id="male_front">','<area shape="react" coords="$${male_front_facial|coordinate}" href ="'+t+"/guide/symptoms?sex=1&partId=10&hospitalId="+i+'" alt="耳鼻口" />','<area shape="react" coords="$${male_front_neck|coordinate}" href ="'+t+"/guide/symptoms?sex=1&partId=2&hospitalId="+i+'" alt="颈部" />','<area shape="react" coords="$${male_front_chest|coordinate}" href ="'+t+"/guide/symptoms?sex=1&partId=3&hospitalId="+i+'" alt="胸部" />','<area shape="react" coords="$${male_front_abdomen|coordinate}" href ="'+t+"/guide/symptoms?sex=1&partId=4&hospitalId="+i+'" alt="腹部" />','<area shape="poly" coords="$${male_front_arm_left|coordinate}" href ="'+t+"/guide/symptoms?sex=1&partId=11&hospitalId="+i+'" alt="上肢" />','<area shape="poly" coords="$${male_front_arm_right|coordinate}" href ="'+t+"/guide/symptoms?sex=1&partId=11&hospitalId="+i+'" alt="上肢" />','<area shape="react" coords="$${male_front_leg|coordinate}" href ="'+t+"/guide/symptoms?sex=1&partId=12&hospitalId="+i+'" alt="下肢" />','<area shape="react" coords="$${male_front_genitals|coordinate}" href ="'+t+"/guide/symptoms?sex=1&partId=7&hospitalId="+i+'" alt="生殖器" />',"</map>",'<map name="male_back" id="male_back">','<area shape="react" coords="$${male_back_head|coordinate}" href="'+t+"/guide/symptoms?sex=1&partId=1&hospitalId="+i+'" alt="头部">','<area shape="react" coords="$$male_back_neck|coordinate}" href="'+t+"/guide/symptoms?sex=1&partId=2&hospitalId="+i+'" alt="颈部">','<area shape="react" coords="$${male_back_back|coordinate}" href="'+t+"/guide/symptoms?sex=1&partId=9&hospitalId="+i+'" alt="背部">','<area shape="poly" coords="$${male_back_arm_left|coordinate}" href="'+t+"/guide/symptoms?sex=1&partId=11&hospitalId="+i+'" alt="上肢">','<area shape="poly" coords="$${male_back_arm_right|coordinate}" href="'+t+"/guide/symptoms?sex=1&partId=11&hospitalId="+i+'" alt="上肢">','<area shape="react" coords="$${male_back_excretion|coordinate}" href="'+t+"/guide/symptoms?sex=1&partId=8&hospitalId="+i+'" alt="排泄部">','<area shape="react" coords="$${male_back_leg|coordinate}" href="'+t+"/guide/symptoms?sex=1&partId=12&hospitalId="+i+'" alt="下肢">',"</map>",'<map name="female_front" id="female_front">','<area shape="react" coords="$${female_front_facial|coordinate}" href="'+t+"/guide/symptoms?sex=2&partId=10&hospitalId="+i+'" alt="耳鼻口">','<area shape="react" coords="$${female_front_neck|coordinate}" href="'+t+"/guide/symptoms?sex=2&partId=2&hospitalId="+i+'" alt="颈部">','<area shape="react" coords="$${female_front_chest|coordinate}" href="'+t+"/guide/symptoms?sex=2&partId=3&hospitalId="+i+'" alt="胸部">','<area shape="react" coords="$${female_front_abdomen|coordinate}" href="'+t+"/guide/symptoms?sex=2&partId=4&hospitalId="+i+'" alt="腹部">','<area shape="poly" coords="$${female_front_arm_left|coordinate}" href="'+t+"/guide/symptoms?sex=2&partId=11&hospitalId="+i+'" alt="上肢">','<area shape="poly" coords="$${female_front_arm_right|coordinate}" href="'+t+"/guide/symptoms?sex=2&partId=11&hospitalId="+i+'" alt="上肢">','<area shape="react" coords="$${female_front_genitals|coordinate}" href="'+t+"/guide/symptoms?sex=2&partId=7&hospitalId="+i+'" alt="生殖器">','<area shape="react" coords="$${female_front_leg|coordinate}" href="'+t+"/guide/symptoms?sex=2&partId=12&hospitalId="+i+'" alt="下肢">',"</map>",'<map name="female_back" id="female_back">','<area shape="react" coords="$${female_back_head|coordinate}" href="'+t+"/guide/symptoms?sex=2&partId=1&hospitalId="+i+'" alt="头部">','<area shape="react" coords="$${female_back_neck|coordinate}" href="'+t+"/guide/symptoms?sex=2&partId=2&hospitalId="+i+'" alt="颈部">','<area shape="react" coords="$${female_back_back|coordinate}" href="'+t+"/guide/symptoms?sex=2&partId=9&hospitalId="+i+'" alt="背部">','<area shape="poly" coords="$${female_back_arm_left|coordinate}" href="'+t+"/guide/symptoms?sex=2&partId=11&hospitalId="+i+'" alt="上肢">','<area shape="poly" coords="$${female_back_arm_right|coordinate}" href="'+t+"/guide/symptoms?sex=2&partId=11&hospitalId="+i+'" alt="上肢">','<area shape="react" coords="$${female_back_excretion|coordinate}" href="'+t+"/guide/symptoms?sex=2&partId=8&hospitalId="+i+'" alt="排泄部">','<area shape="react" coords="$${female_back_leg|coordinate}" href="'+t+"/guide/symptoms?sex=2&partId=12&hospitalId="+i+'" alt="下肢">',"</map>"].join("\n");juicer.set("cache",!0),juicer.set("errorhandling",!1),juicer.set("strip",!0),juicer.set("detection",!1);var o=parseFloat(window.getComputedStyle(document.querySelector("#flip-img"),null).width,10),a=parseFloat(window.getComputedStyle(document.querySelector("#flip-img"),null).height,10),r=function(e){return $.each(e,function(t,i){e[t]=t%2===0?parseInt(o/736*i,10):parseInt(a/1464*i,10)}),e.join(",")};juicer.register("coordinate",r),$("#J_ImgMap").html(juicer.to_html(n,e));var s="_dz_inf",l=$GH.cookie.get(s);if(l)var e={sex:l};var c=$.extend({},{sex:1},e||{});1===Number(c.sex)&&($("#J_SexSel").css({"background-image":"url("+$GC.staticServer+"/h5/img/daozhen/male.png)"}).data("sex",1),$(".flipper img").each(function(){$(this).attr({src:$(this).attr("src").replace("female","male"),usemap:$(this).attr("usemap").replace("female","male")})})),2===Number(c.sex)&&($("#J_SexSel").css({"background-image":"url("+$GC.staticServer+"/h5/img/daozhen/female.png)"}).data("sex",2),$(".flipper img").each(function(){$(this).attr({src:$(this).attr("src").replace("male","female"),usemap:$(this).attr("usemap").replace("male","female")})})),setTimeout(function(){$(".flipper img").show()},500),$("#J_SexSel").on("click",function(){var e=$(this).data("sex");$(".flipper").animate({opacity:0},0,"ease-out"),1===e&&($(this).css({"background-image":"url("+$GC.staticServer+"/h5/img/daozhen/female.png)"}).data("sex",2),$(".flipper img").each(function(){$(this).attr({src:$(this).attr("src").replace("male","female"),usemap:$(this).attr("usemap").replace("male","female")})})),2===e&&($(this).css({"background-image":"url("+$GC.staticServer+"/h5/img/daozhen/male.png)"}).data("sex",1),$(".flipper img").each(function(){$(this).attr({src:$(this).attr("src").replace("female","male"),usemap:$(this).attr("usemap").replace("female","male")})})),setTimeout(function(){$(".flipper").animate({opacity:1},1e3,"ease-in")},300);var t={sex:-Number(e)+3,age:"",hospitalId:$("#hospitalId").val()};$GH.cookie.set(s,t.sex)}),$("#J_Roate").on("click",function(){return $("#flip-toggle").toggleClass("hover"),$(".direction").text("反面"===$(".direction").text()?"正面":"反面"),!1})}),$GH.module("#J_Daozhen_1",function(){var e="_dz_inf",t=$GH.cookie.get(e);t&&($("#sex a").removeClass("on"),$("#sex a:eq("+(t-1)+")").addClass("on")),$("#sex a").on("click",function(){var t=$(this);return $("#sex a").removeClass("on"),t.addClass("on"),$GH.cookie.set(e,t.attr("data-val")),!1}),$("#J_List a").on("click",function(){var e=$(this);return e.attr("href",e.attr("href")+"&sex="+$("#sex a.on").attr("data-val")),!0})}),function(e){function t(e){return(0>e||e>9?"":"0")+e}var i=new Array("一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月","1月","2月","3月","4月","5月","6月","7月","8月","9月","10月","11月","12月"),n=new Array("星期天","星期一","星期二","星期三","星期四","星期五","星期六","周日","周一","周二","周三","周四","周五","周六"),o={isDate:function(t,i){var n=e.getDateFromFormat(t,i);return 0==n?!1:!0},compareDates:function(e,t){var i=e.getTime(),n=t.getTime();return 0==i||0==n?-1:i>n?1:0},compareDatesString:function(t,i,n,o){var a=e.getDateFromFormat(t,i),r=e.getDateFromFormat(n,o);return 0==a||0==r?-1:a>r?1:0},dateDiff:function(e,t,i){var n=i.getTime()-t.getTime();switch(e.toLowerCase()){case"y":return parseInt(i.getFullYear()-t.getFullYear());case"m":return parseInt(12*(i.getFullYear()-t.getFullYear())+(i.getMonth()-t.getMonth()));case"d":return parseInt(n/1e3/60/60/24);case"w":return parseInt(n/1e3/60/60/24/7);case"h":return parseInt(n/1e3/60/60);case"n":return parseInt(n/1e3/60);case"s":return parseInt(n/1e3);case"l":return parseInt(n)}},clearTime:function(e){return e.setHours(0),e.setMinutes(0),e.setSeconds(0),e.setMilliseconds(0),e},cloneDate:function(t,i){return i?e.clearTime(new Date(+t)):new Date(+t)},addMonths:function(t,i,n){if(+t){var o=t.getMonth()+i,a=e.cloneDate(t);for(a.setDate(1),a.setMonth(o),t.setMonth(o),n||e.clearTime(t);t.getMonth()!=a.getMonth();)t.setDate(t.getDate()+(a>t?1:-1))}return t},addDays:function(t,i,n){if(+t){var o=t.getDate()+i,a=e.cloneDate(t);for(a.setHours(9),a.setDate(o),t.setDate(o),n||e.clearTime(t);t.getDate()!=a.getDate();)t.setTime(+t+(a>t?1:-1)*HOUR_MS)}return t},dateAdd:function(e,t,i){switch(e.toLowerCase()){case"y":return new Date(i.setFullYear(i.getFullYear()+t));case"m":return new Date(i.setMonth(i.getMonth()+t));case"d":return new Date(i.setDate(i.getDate()+t));case"w":return new Date(i.setDate(i.getDate()+7*t));case"h":return new Date(i.setHours(i.getHours()+t));case"n":return new Date(i.setMinutes(i.getMinutes()+t));case"s":return new Date(i.setSeconds(i.getSeconds()+t));case"l":return new Date(i.setMilliseconds(i.getMilliseconds()+t))}},formatDate:function(e,o){o+="";var a,r="",s=0,l="",c="",d=e.getYear()+"",u=e.getMonth()+1,h=e.getDate(),p=e.getDay(),a=e.getHours(),f=e.getMinutes(),m=e.getSeconds(),g=new Object;for(d.length<4&&(d=""+(d-0+1900)),g.y=""+d,g.yyyy=d,g.yy=d.substring(2,4),g.M=u,g.MM=t(u),g.MMM=i[u-1],g.NNN=i[u+11],g.d=h,g.dd=t(h),g.E=n[p+7],g.EE=n[p],g.H=a,g.HH=t(a),g.h=0==a?12:a>12?a-12:a,g.hh=t(g.h),g.K=a>11?a-12:a,g.k=a+1,g.KK=t(g.K),g.kk=t(g.k),g.a=a>11?"PM":"AM",g.m=f,g.mm=t(f),g.s=m,g.ss=t(m);s<o.length;){for(l=o.charAt(s),c="";o.charAt(s)==l&&s<o.length;)c+=o.charAt(s++);r+=null!=g[c]?g[c]:c}return r},getDateFromFormat:function(e,t){function o(e){for(var t="1234567890",i=0;i<e.length;i++)if(-1==t.indexOf(e.charAt(i)))return!1;return!0}function a(e,t,i,n){for(var a=n;a>=i;a--){var r=e.substring(t,t+a);if(r.length<i)return null;if(o(r))return r}return null}e+="",t+="";for(var r,s,l=0,c=0,d="",u="",h=new Date,p=h.getYear(),f=h.getMonth()+1,m=1,g=h.getHours(),v=h.getMinutes(),$=h.getSeconds(),w="";c<t.length;){for(d=t.charAt(c),u="";t.charAt(c)==d&&c<t.length;)u+=t.charAt(c++);if("yyyy"==u||"yy"==u||"y"==u){if("yyyy"==u&&(r=4,s=4),"yy"==u&&(r=2,s=2),"y"==u&&(r=2,s=4),p=a(e,l,r,s),null==p)return 0;l+=p.length,2==p.length&&(p=p>70?1900+(p-0):2e3+(p-0))}else if("MMM"==u||"NNN"==u){f=0;for(var y=0;y<i.length;y++){var S=i[y];if(e.substring(l,l+S.length).toLowerCase()==S.toLowerCase()&&("MMM"==u||"NNN"==u&&y>11)){f=y+1,f>12&&(f-=12),l+=S.length;break}}if(1>f||f>12)return 0}else if("EE"==u||"E"==u)for(var y=0;y<n.length;y++){var _=n[y];if(e.substring(l,l+_.length).toLowerCase()==_.toLowerCase()){l+=_.length;break}}else if("MM"==u||"M"==u){if(f=a(e,l,u.length,2),null==f||1>f||f>12)return 0;l+=f.length}else if("dd"==u||"d"==u){if(m=a(e,l,u.length,2),null==m||1>m||m>31)return 0;l+=m.length}else if("hh"==u||"h"==u){if(g=a(e,l,u.length,2),null==g||1>g||g>12)return 0;l+=g.length}else if("HH"==u||"H"==u){if(g=a(e,l,u.length,2),null==g||0>g||g>23)return 0;l+=g.length}else if("KK"==u||"K"==u){if(g=a(e,l,u.length,2),null==g||0>g||g>11)return 0;l+=g.length}else if("kk"==u||"k"==u){if(g=a(e,l,u.length,2),null==g||1>g||g>24)return 0;l+=g.length,g--}else if("mm"==u||"m"==u){if(v=a(e,l,u.length,2),null==v||0>v||v>59)return 0;l+=v.length}else if("ss"==u||"s"==u){if($=a(e,l,u.length,2),null==$||0>$||$>59)return 0;l+=$.length}else if("a"==u){if("am"==e.substring(l,l+2).toLowerCase())w="AM";else{if("pm"!=e.substring(l,l+2).toLowerCase())return 0;w="PM"}l+=2}else{if(e.substring(l,l+u.length)!=u)return 0;l+=u.length}}if(l!=e.length)return 0;if(2==f)if(p%4==0&&p%100!=0||p%400==0){if(m>29)return 0}else if(m>28)return 0;if((4==f||6==f||9==f||11==f)&&m>30)return 0;12>g&&"PM"==w?g=g-0+12:g>11&&"AM"==w&&(g-=12);var b=new Date(p,f-1,m,g,v,$);return b.getTime()},parseDate:function(t){var i=2==arguments.length?arguments[1]:!1;generalFormats=new Array("y-M-d","MMM d, y","MMM d,y","y-MMM-d","d-MMM-y","MMM d"),monthFirst=new Array("M/d/y","M-d-y","M.d.y","MMM-d","M/d","M-d"),dateFirst=new Array("d/M/y","d-M-y","d.M.y","d-MMM","d/M","d-M");for(var n=new Array("generalFormats",i?"dateFirst":"monthFirst",i?"monthFirst":"dateFirst"),o=null,a=0;a<n.length;a++)for(var r=window[n[a]],s=0;s<r.length;s++)if(o=e.getDateFromFormat(t,r[s]),0!=o)return new Date(o);return null}};e.extend(e,o)}(Zepto),$GH.module("#J_department",function(){$(".expert-list .wrapper").css({width:71*$(".expert").length+15+"px"}),$(".eteams-list .wrapper").css({width:225*$(".eteams-item").length+"px"}),$(".eteams-list .eteams-load").hide(),$(".eteams-list .eteams-item").show(),$("#J_department").css("padding-bottom","0px");var e=!0;$(".J_nav").click(function(){$(this).addClass("selected").siblings().removeClass("selected");var t=$(this).attr("tar");$(".J_switch").eq(t).show().siblings(".J_switch").hide();var i={tab:t};if(historyState.setItem("tab",i),e&&$("#J_Swiper").length>0&&"1"==t){e=!1,new Swiper("#J_Swiper",{pagination:".pagination",visibilityFullFit:!0,calculateHeight:!0,autoplay:5e3,autoplayDisableOnInteraction:!1,loop:!0,noSwiping:!0,noSwipingClass:"stop-swiping"});var n=$("#J_Swiper").find(".swiper-slide").length;1==n&&($("#J_Swiper").find(".pagination").remove(),$("#J_Swiper").find(".swiper-slide").addClass("stop-swiping"))}});var t=historyState.getItem("tab")||{tab:0};1==t.tab&&$(".J_nav").eq(1).click(),0==$("#gh").length?$(".nav-wrap").css("top","0px"):$(".nav-wrap").css("top","44px")}),function(){$GH.module("#J_Disease_Detail",function(e){$("#J_MOrL").on("click",function(){var e=$(this).parent().toggleClass("expand");return $(this).text(e.hasClass("expand")?"收起":"点击查看全部内容"),!1}),$(".J_Toggle").on("click",function(){var t=$(this),i=$(this).parent();if(i.hasClass("expand"))i.removeClass("expand");else{e.find("section.expand").removeClass("expand"),i.addClass("expand");var n=t.offset().top;$(window).scrollTop()>n&&$(window).scrollTop(n-42)}return!1})})}(),$(function(){var e={initScroll:function(e,t,i){return $(e).length?$GH.iScroll(e,{top:t||0,bottom:i||0}):void 0},initFavorite:function(){$(".J_FavorDoctor").on("click",function(){var e=$(this),i=t.data("is-login");if(!i)return void(location.href=t.data("login-page"));var n=t.data("has-followed");$GH.loading.show(),$.ajax(n?{type:"post",dataType:"json",cache:!1,url:t.data("unfollow"),data:{expertId:t.data("expert")},success:function(i){i.hasError||(t.data("has-followed",!1),$GH.loading.hide(),$GH.alert("已取消关注"),e.addClass("on").text("关注"))},error:function(e,t){return $GH.loading.hide(),"abort"===t?void $GH.alert("请求过于频繁，请求已中止"):void $GH.alert("操作失败，请稍后再试！")}}:{type:"post",dataType:"json",cache:!1,url:t.data("follow"),data:{expertId:t.data("expert")},success:function(i){i.hasError?$GH.alert(i.message):(t.data("has-followed",!0),$GH.loading.hide(),$GH.alert("关注成功"),e.removeClass("on").text("已关注"))},error:function(e,t){return $GH.loading.hide(),"abort"===t?void $GH.alert("请求过于频繁，请求已中止"):void $GH.alert("操作失败，请稍后再试！")}})})}},t=$("#dispatcher");$GH.module("#J_DoctorHomeLanding",function(t){t.find(".J_Actions .off").on("click",function(){var e=$(this);return $GH.alert("暂未开通"+e.text()),!1}),t.find(".J_Places_Toggle").on("click",function(){var e=$(this),t=e.parent().find("p").show();return e.toggleClass("collapse"),e.hasClass("collapse")&&(t.hide(),t.eq(1).show()),!1}),e.initFavorite()}),$GH.module("#J_DoctorImageTextConsult",function(e,i){$(".J_DoConsult").on("click",function(){var e=t.data("is-login");return e?"1"!==$(".J_HiddenConsultLimit").val()?($GH.alert("您今天咨询"+$(".J_ExpertName").html()+"医生的次数已满，明天再提问吧"),!1):void 0:!0}),alight.filters.subName=function(){return function(e){return e?$GH.maskStr(e,2,3):""}},alight.filters.subDate=function(){return function(e){return e.substr(0,10)}};var n=$GH.iScroll(".wrapper",{top:50,bottom:60},{probeType:2});i.totalCount=0,i.historyList=[],i.getHistoryList=function(e){i.pageNo=e,i.loading=!0,$GH.loading.show(),$.ajax({dataType:"json",cache:!1,data:{doctorUserId:t.data("expert"),pageNo:e},url:$GC.guahaoServer+"/json/white/bconsult/list",type:"get",success:function(e){$GH.loading.hide(),i.loading=!1,e.map&&e.map.localPageModel.list&&(i.historyList=i.historyList.concat(e.map.localPageModel.list)),i.totalCount=e.map.localPageModel.totalCount,i.$scan(),n.refresh()},error:function(){$GH.loading.hide()}})},i.getHistoryList(1),n.on("scroll",function(){i.historyList.length<i.totalCount&&this.maxScrollY>this.y&&!i.loading&&(i.loading=!0,i.$scan(),i.getHistoryList(i.pageNo+1))}),i.go=function(e){location.href=$GC.guahaoServer+e},$(".J_Invite").on("click",function(){var i=t.data("is-login");return i?($.ajax({type:"get",dataType:"json",cache:!1,url:e.data("invite-action"),success:function(e){e.hasError?$GH.alert(e.message):$(".J_InviteCount").text(parseInt($(".J_InviteCount").text(),10)+1)},error:function(){$GH.alert("操作失败，请稍后再试！")}}),!1):(location.href=t.data("login-page"),!1)}),$(".J_Ticket").click(function(){$(this).hasClass("selected")?($(this).removeClass("selected"),$(".J_UseT").hide(),$(".J_NotUseT").show()):($(this).addClass("selected"),$(".J_UseT").show(),$(".J_NotUseT").hide())})}),$GH.module("#J_DoctorPhoneConsult",function(e){var t={curDate:null,minDate:0,maxDate:0,init:function(){var e=this;this.initSchedule(),$(".J_DoConsult").on("click",function(){var t=$("#J_ScheduleId").val();return t?(location.href=$(this).data("link")+"?id="+$("#J_ExpertId").val()+"&scheduleId="+t+"&activityId="+($("#J_ActivityId").val()||"")+"&fee="+$("#J_Fee").val()+"&scheduleTimeStr="+encodeURIComponent($.formatDate(e.curDate,"yyyy-MM-dd")+" "+$("#J_ScheduleTime").val()),!1):($GH.alert("请选择排班"),!1)})},initSchedule:function(){function t(){e.find("#J_ScheduleId").val(""),e.find("#J_ScheduleTime").val("")}var i=this;$GH.loading.show(),this.minDate=$.clearTime(new Date),this.maxDate=$.clearTime($.dateAdd("d",6,new Date)),this.loadSchedule($(".J_BeginDate").val()),$("body").on("click",".J_ScheduleList li",function(){return $(".J_ScheduleList li").removeClass("current"),$(this).addClass("current"),e.find("#J_ScheduleId").val($(this).data("sid")),e.find("#J_ActivityId").val($(this).data("aid")),e.find("#J_ScheduleTime").val($(this).data("time")),e.find("#J_FeeText").html("￥"+($(this).data("price")/100).toFixed(2)),e.find("#J_Fee").val($(this).data("price")),!1}),$(".J_PrevDate").on("click",function(){var e=$.dateAdd("d",-1,i.curDate);return t(),i.loadSchedule($.formatDate(e,"yyyy-MM-dd")),!1}),$(".J_NextDate").on("click",function(){var e=$.dateAdd("d",1,i.curDate);return t(),i.loadSchedule($.formatDate(e,"yyyy-MM-dd")),!1})},loadSchedule:function(t){$(".J_ScheduleList").empty();var i=$.clearTime(new Date(t));i.getTime()>this.minDate.getTime()?$(".J_PrevDate").show():$(".J_PrevDate").hide(),i.getTime()>this.maxDate.getTime()?$(".J_NextDate").hide():$(".J_NextDate").show(),$(".J_CurrentDate").html($.formatDate(i,"E MM月dd日")),this.curDate=i,$.ajax({type:"get",dataType:"json",cache:!1,url:e.data("schedule-action"),data:{scheduleDate:t},success:function(e){if(e.hasError)$GH.alert(e.message),$GH.loading.hide();else{var t=[],i=e.map.schedulelist;if(0===i.length)return $(".J_ScheduleList").append("<li>暂无排班信息</li>"),$GH.loading.hide(),!1;for(var n=0;n<i.length;n++){var o=i[n];t.push('<li data-sid="'+o.scheduleId+'" data-aid="'+o.platActivityId+'" data-time="'+o.startTime+'" data-price="'+o.fee+'"><a href="javascript:;">'+o.startTime+"</a></li>")}$(".J_ScheduleList").append(t.join("")),$GH.loading.hide()}},error:function(){$GH.alert("操作失败，请稍后再试！"),$GH.loading.hide()}})}};t.init()}),$GH.module("#J_PhoneConsultSubmit",function(e){var t={init:function(){e.find(".J_PatientsDropDown").dropdownSheet(null,function(e){$("#J_PatientPhone").val(e.find("option:selected").data("mobile")),$(".J_Clear").show()}),$("#J_PatientPhone").val($(".J_PatientsDropDown select").find("option:selected").data("mobile")),$("#J_PatientPhone").on("input",function(){$.trim($(this).val())?$(".J_Clear").show():$(".J_Clear").hide()}),$(".J_Clear").on("click",function(){return $("#J_PatientPhone").val("").focus(),$(".J_Clear").hide(),!1}),e.find(".J_SubmitOrder").on("click",function(){var e={"#J_PatientPhone":{required:"请输入接听人电话",mobile:"电话格式不正确"}};return $GH.validate(e)&&$(this).closest("form").submit(),!1})}};t.init()}),$GH.module("#J_CompleteEmrInfo",function(e){var t={init:function(){$("#J_SelectDis").on("click",function(){return $GH.SS.init($(this),{showTreatment:!0}),!1}),this.initUpload(),this.initSubmit()},initUpload:function(){var t=function(){return e.find("img.preview").length};$GH.ImageUploader($(".g-image-upload-box"),{inputName:"imagePath",uploaderUrl:$GC.guahaoServer+"/json/black/image/upload?type=2",afterComplete:function(){t()>0&&$(".J_Showmeonfileuploaded").hide(),9===t()&&$(".upload-btn").hide()},afterDelete:function(){t()<=9&&$(".upload-btn").show(),1===t()&&$(".J_Showmeonfileuploaded").show()}})},initSubmit:function(){e.find(".J_SubmitOrder").on("click",function(){var e={"#content":{required:"请详细描述您的病情和所需帮助（10-500字）",check:function(e){return e.length<10?"请详细描述您的病情和所需帮助（10-500字）":!0}}};return $GH.validate(e)&&$(this).closest("form").submit(),!1})}};t.init()}),$GH.module("#J_DoctorVideoConsult",function(e){var t={init:function(){$.ajax({type:"get",dataType:"json",cache:!1,url:e.data("schedule-action"),success:function(e){if(e.hasError)return $GH.alert(e.message),$(".J_ScheduleList .tips").html("暂无排班信息"),!1;var t=e.map.schedulelist;if(0===t.length)return $(".J_ScheduleList .tips").html("暂无排班信息"),!1;for(var i=[],n=0;n<t.length;n++){var o=t[n],a=new Date(o.scheduleDate);i.push('<li><span class="date">'+$.formatDate(a,"MM月dd日")+'</span><span class="time">'+$.formatDate(a,"E")+"&nbsp;"+o.startTime+" - "+o.endTime+'</span><a href="javascript:;">剩余：'+o.number+"</a></li>")}$(".J_ScheduleList").empty().append(i.join(""))},error:function(){$GH.alert("操作失败，请稍后再试！"),$(".J_ScheduleList .tips").html("暂无排班信息")}})}};t.init()}),$GH.module("#J_DoctorHomeBooking",function(e,i){function n(t){var n=!1;e.find("#J_Depts a").removeClass("on").hide().each(function(){var e=$(this);e.data("hid")==t&&(e.css("display","inline-block"),n||(e.addClass("on"),i.did=e.attr("data-did"),n=!0))})}function o(){var e=i.did;i.curBook={},i.tips="",i.showMore=!1,i.showMoreTxt="查看更多号源",l[e]?(i.curBook=l[e],0===i.curBook.sches.length&&(i.tips="暂无排班信息"),i.$scan()):a()}function a(e){i.loading=!0,i.$scan(),$.ajax({type:"get",dataType:"json",cache:!1,data:{doctorId:i.eid,officeId:i.did},url:"/json/white/expert/shiftcase/",success:function(t){return t&&0!=t.length?void("99"===t[0].scheduleData.returnFlag?i.tips="您访问过于频繁，请5分钟后再试":(l[i.did]={},s(t,e),r(t))):void(i.tips="暂无排班信息")},error:function(e,t){return"abort"===t?void(i.tips="请求过于频繁，请求已中止"):void(i.tips="合作平台数据加载有问题，请稍后再试！")},complete:function(){i.loading=!1,l[i.did]&&(i.curBook=l[i.did]),i.$scan()}})}function r(e){l[i.did].rules=[];for(var t=0;t<e.length;t++){var n={platform:e[t].name,openTime:"",list:[]},o=e[t].scheduleData;if(o){n.openTime=o.openTime;var a=o.reaservationRule;if(a)for(var t=0;t<a.length;t++)n.list.push(a[t])}(""!=n.platform||""!=n.openTime||n.list.length>0)&&(0==n.list.length&&n.list.push("暂无"),l[i.did].rules.push(n))}}function s(e,t){function n(e,t){var i=e[t.name];
i&&(i.week=e.week,i.period=t.memo,i.price=i.price.toFixed(2),i.statusTxt=u[i.status],i.platform=s,i.disabled=d,(d||!i.url||!c||c&&4!=i.status)&&(i.url="javascript:;"),4==i.status?a.push(i):r.push(i))}function o(e,t){return e.date.replace(/-/g,"")>t.date.replace(/-/g,"")?1:-1}for(var a=[],r=[],s="",d=!1,u=["截止","停诊","已满","已满","预约"],h=[{name:"morning",memo:"上午"},{name:"afternoon",memo:"下午"},{name:"evening",memo:"晚上"},{name:"fl",memo:"全天"}],p=0;p<e.length;p++){s=e[p].name;var f=e[p].scheduleData;if(f){d="2"===f.doctorHaoyuanType||"5"===f.doctorHaoyuanType;var m=f.schedules;if(m)for(var p=0;p<m.length;p++)for(var g=0;g<h.length;g++)n(m[p],h[g])}}a.sort(o),r.sort(o),l[i.did].sches=a.concat(r),t&&0==a.length&&(i.needEteam=!0),0==a.length&&0==r.length&&(i.tips="暂无排班信息")}var l={},c=t.data("is-login")===!0,d=e.find(".J_Places").length>0;if(i.loading=!1,i.eid=e.attr("data-eid"),i.isopen="1"==e.attr("data-isopen")?!0:!1,i.did=$("#J_Depts a.on").attr("data-did"),i.tips="",i.curBook={},i.needEteam=!i.isopen,i.showMore=!1,i.showMoreTxt="查看更多号源",i.order=function(e){return e.disabled?($GH.alert("当前排班不可预约"),!1):void(c?4!=e.status&&$GH.alert("当前排班不可预约"):location.href=t.data("login-page"))},i.toggle=function(){i.showMore=!i.showMore,i.showMoreTxt=i.showMore?"收起":"查看更多号源"},d){var u=e.find(".J_Places"),h=u.find("select"),p=h.val();u.dropdownSheet(),n(p),u.find("select").on("change",function(){var e=$(this);u.find("span").text(e.find("option:selected").text()),n(e.val()),o()})}else e.find("#J_Depts a").css("display","inline-block");e.find("#J_Depts a").on("click",function(){if(i.loading)return $GH.alert("正在加载，请稍后再试..."),!1;var t=$(this);return t.hasClass("on")||(e.find("#J_Depts a").removeClass("on"),t.addClass("on"),i.did=t.attr("data-did"),o()),!1}),i.isopen&&a(!0)}),$GH.module("#J_DoctorHomeExperience",function(e,t){$("body").css("background","#FFFFFF"),t.diseaseIdList=[{id:"0",name:"全部疾病"}],t.diseaseId=$.extend({},t.diseaseIdList[0]),e.attr("data-did")&&(t.diseaseId.id=e.attr("data-did")),t.commentTypeList=[{id:"all",name:"全部来源"},{id:"5",name:"咨询评价"},{id:"0",name:"就诊评价"}],t.commentType=$.extend({},t.commentTypeList[0]),t.hospitalIdList=[{id:"",name:"全部医院"}],t.hospitalId=$.extend({},t.hospitalIdList[0]),e.attr("data-hid")&&(t.hospitalId.id=e.attr("data-hid")),$Common.searchWithFilter({url:e.attr("data-action")+"/1-"+t.diseaseId.id,types:{all:["diseaseId","commentType","hospitalId"]},successFn:function(e,t,i){if(e.hasError)return void $GH.alert(e.message);if(e.map&&e.map.localPageModel&&(e.map.localPageModel.list&&(t.itemList=t.itemList.concat(e.map.localPageModel.list)),i.pageCount=e.map.localPageModel.pageCount),e.map&&e.map.searchCommentDO&&1===t.diseaseIdList.length&&e.map.searchCommentDO.searchCommentDiseaseDOs)for(var n=e.map.searchCommentDO.searchCommentDiseaseDOs,o=n.length>7?7:n.length,a=0;o>a;a++){var r=n[a];r.count<3||(t.diseaseIdList.push({id:r.diseaseId,name:r.diseaseName}),t.diseaseId.id==r.diseaseId&&(t.diseaseId.name=r.diseaseName))}if(e.map&&e.map.searchCommentDO&&1===t.hospitalIdList.length&&e.map.searchCommentDO.searchCommentHospitalTags)for(var n=e.map.searchCommentDO.searchCommentHospitalTags,o=n.length>7?7:n.length,a=0;o>a;a++){var r=n[a];r.count<1||(t.hospitalIdList.push({id:r.hospitalId,name:r.hospitalName}),t.hospitalId.id==r.hospitalId&&(t.hospitalId.name=r.hospitalName))}}},t)}),$GH.module("#J_ShareExperience",function(){$Common.doVote(),$("#J_SelectDis").on("click",function(){return $GH.SS.init($(this),{showTreatment:!0}),!1}),$(".J_ReasonList a").on("click",function(){$(this).siblings().removeClass("current"),$(this).addClass("current"),3===$(this).data("id")?($(".J_OtherTip").hide(),$("#J_HiddenReason").val("").show(),setTimeout(function(){$("#J_HiddenReason").focus()},100)):($(".J_OtherTip").show(),$("#J_HiddenReason").hide().val($(this).text()))}),$(".J_SubmitReason").on("click",function(){return $("#J_HiddenReason").val()?void $GH.formSubmit($("#J_ReasonForm")):($GH.alert("请填写未就医原因"),void(3===$(".J_ReasonList a.current").data("id")&&setTimeout(function(){$("#J_HiddenReason").focus()},100)))})}),$GH.module("#J_ConsultComment",function(e){$Common.initStarsVote(function(t){e.find(".J_SmileList dd").hide(),e.find(".J_SmileList .smile-"+t).show()}),e.find("#J_SelectDis").on("click",function(){return $GH.SS.init($(this),{showTreatment:!0}),!1}),$(".J_Submit").on("click",function(){$("#J_DoVoteForm").submit()}),$("#J_DoVoteForm").on("submit",function(){var e=$GH.validate({"#manner":{required:"请给满意度打分"}});return e&&$("#J_DoVoteForm").submit(),!1})}),$GH.module("#J_ConsultDetail",function(e,t){t.imageShow=function(e){$GH.ImageUploader($(e.target).parent(),{onlySlider:e.target})},e.find(".J_Delete").on("click",function(){var e=$(this);return $GH.confirm("您确认要删除咨询吗？",[{name:"取消",style:"btn",fn:function(e){e()}},{name:"确定",style:"btn",fn:function(t){t(),$.ajax({type:"get",dataType:"json",cache:!1,url:e.data("action"),success:function(e){e.hasError?$GH.alert(e.message):location.href=$GC.guahaoServer+"/my/bconsult/list"},error:function(){$GH.alert("操作失败，请稍后再试！")}})}}]),!1}),e.find(".J_Cancel").on("click",function(){var e=$(this),t=new Date,i=new Date($(".J_ConsultDate").html().replace(/-/g,"/")),n="",o=$("#J_fee").html();return o&&(o=o.substring(1)),n=$.dateDiff("h",t,i)<24&&o>0?"确认取消咨询？距离电话开始时间过近，只能退还90%咨询费用":"您确认要取消咨询吗？",$GH.confirm(n,[{name:"取消",style:"btn",fn:function(e){e()}},{name:"确定",style:"btn",fn:function(t){t(),$.ajax({type:"get",dataType:"json",cache:!1,url:e.data("action"),success:function(e){e.hasError?$GH.alert(e.message):location.reload()},error:function(){$GH.alert("操作失败，请稍后再试！")}})}}]),!1}),e.find(".J_ConnectConsult").on("click",function(){var e=$(this);return $.ajax({type:"get",dataType:"json",cache:!1,url:e.data("action"),success:function(t){t.hasError?$GH.alert(t.message):(e.removeClass("gbt-orange").addClass("gbt-disabled"),e.countdown(function(){e.removeClass("gbt-disabled").addClass("gbt-orange"),e.text("进入咨询")},10,"系统呼入中(times)"))},error:function(){$GH.alert("操作失败，请稍后再试！")}}),!1})}),$GH.module("#J_PatientApply",function(e){var t=e.attr("data-checkurl"),i=$("#J_ExpertName").val(),n={valid:!0,msg:""};e.find(".J_PatientsDropDown").dropdownSheet($("#J_PatientSel option").length<6?{name:"添加就诊人",fn:function(){return this.close(),location.href=$GC.guahaoServer+"/my/patient/add?backUrl="+location.href,!1}}:null),$("#J_PatientSel").on("change",function(){var e=$("#J_PatientSel").find("option:selected");return""==e.val()?!1:void $.ajax({type:"get",dataType:"json",cache:!1,url:t+e.val(),success:function(t){"2"===t.data?(n.valid=!1,n.msg=e.text()+"已经是"+i+"医生的患者了",$GH.alert(n.msg)):"1"===t.data?(n.valid=!1,n.msg=e.text()+"的患者报到已提交审核中，请勿重复申请",$GH.alert(n.msg)):(n.valid=!0,n.msg="")},error:function(e,t){return"abort"===t?void $GH.alert("请求过于频繁，请求已中止"):void $GH.alert("操作失败，请稍后再试！")}})}).trigger("change");var o=function(){return e.find("img.preview").length};$GH.ImageUploader($(".g-image-upload-box"),{uploadBtn:".upload-btn",fileInput:".file-input",inputName:"imagePath",uploaderUrl:window.$GC.guahaoServer+"/json/black/image/upload?type=2",afterComplete:function(){o()>0&&$(".J_Showmeonfileuploaded").hide(),9===o()&&$(".upload-btn").hide()},afterDelete:function(){o()<=9&&$(".upload-btn").show(),1===o()&&$(".J_Showmeonfileuploaded").show()}});var a=e.find(".J_DP"),r=new Date;a.find(".J_DPTxt").val(r.getFullYear()+"年"+(r.getMonth()+1)+"月"),a.find(".J_DPVal").val([r.getFullYear(),r.getMonth()+1,r.getDate()].join("-")),a.timepicker({noDays:!0,onSelect:function(e){return a.find(".J_DPTxt").val(e[0]+"年"+e[1]+"月"),a.find(".J_DPVal").val(e.join("-")),!0}}),$("#J_SelectDis").on("click",function(){return $GH.SS.init($(this),{mustUuid:!0}),!1}),e.find(".J_Save").on("click",function(){var e=n.valid;return e?e=$GH.validate({"#patient":{required:"请选择就诊人"},"#patientName":{required:"请输入就诊患者姓名"},"#patientCertNo":{required:"请输入就诊患者身份证",idcard:"身份证格式有错"}}):$GH.alert(n.msg),e&&""==$("#diseaseId").val()&&""==$.trim($("#disStuff").val())&&($GH.alert("确诊疾病或者病情资料不能为空"),e=!1),e&&$GH.formSubmitV2($("#J_ApplyForm"),$(this)),!1})}),$GH.module("#J_HospitalAppraise",function(){var e={init:function(){$Common.pullUpScroll.init({initScrollCfg:{top:70},scrollSelector:".J_ExperienceScroll",listSelector:".J_ExpList",loadingData:function(e,t){var i=this,n=$(".J_ExpList");$.ajax({type:"get",dataType:"json",cache:!1,data:{page:e},url:n.data("action"),success:function(e){e.map&&t&&(i.totalCount=e.map.commentExpertQuery.totalRecord,t(e.map.commentExpertVOList))},error:function(e,t){return"abort"===t?void $GH.alert("请求过于频繁，请求已中止"):void $GH.alert("操作失败，请稍后再试！")}})},buildHtml:function(e){return $Common.buildVoteItem(e)}})}};e.init()})}),$(function(){$GH.module("#J_GuideAuth",function(){new Swiper("#J_Swiper",{pagination:".pagination",visibilityFullFit:!0,calculateHeight:!0})})}),function(){$GH.module("#J_EteamIntro",function(){$("#J_Swiper").height($(window).height()-$("#gh").height()),new Swiper("#J_Swiper",{mode:"vertical",onSlideChangeEnd:function(e){e.activeIndex==e.slides.length-1&&(e.destroy(),$("#J_Swiper").css("height","auto"),$("#J_Swiper .swiper-wrapper").attr("style",""),$("#J_Swiper .s1,#J_Swiper .s2,#J_Swiper .s3").remove(),$("#J_Swiper .s4").css("height","auto"),$("#J_Nav").remove())}}),$("#J_Contact").on("click",function(){var e=$(this);return $GH.confirm("您确认要组建/加入专家团队吗？",[{name:"取消",style:"btn",fn:function(e){e()}},{name:"确定",style:"btn",fn:function(t){t(),$.ajax({url:e.attr("href"),success:function(e){$GH.alert(e.message)},error:function(){$GH.alert("服务异常，稍后重试")}})}}]),!1})}),$GH.module("#J_EteamHome",function(){$("#J_Toggle").on("click",function(){return $(this).parent().toggleClass("expand"),!1}),$("#J_Join").on("click",function(){return $.ajax({url:$(this).attr("href"),success:function(e){$GH.alert(e.message)},error:function(){$GH.alert("服务异常，稍后重试")}}),!1}),$(".J_Apply").on("click",function(){var e=$(this).data("href");$GH.confirm("对症预约要求："+$("#J_EteamHome").data("demand")+"<br />"+$("#J_EteamHome").data("name")+"将受理你的加号申请，团队将根据您的病情分配团队内的医生进行初诊。是否接受分配？",[{name:"取消",style:"btn",fn:function(e){e()}},{name:"确定",style:"btn",fn:function(t){t(),window.location.href=e}}])})}),$GH.module("#J_EteamHome",function(){function e(){$GH.request({url:i.load.data("action"),data:{pageNo:1,groupId:o},beforeSend:function(){$GH.loading.show()},fulfilled:function(e){for(var t,i,o=e.data&&e.data.list||[],a=(e.data&&e.data.pageSize||10,0);t=o[a];a++)i=t.content||"",n.stack.push({name:t.nickName||"",disease:t.diseaseName||"",summary:i.length>40?i.slice(0,38)+"...":i,detail:i.length>40?i:""});n.total=e.data.totalCount||0},always:function(){t()}})}function t(){if($GH.loading.hide(),n.stack.length>0){n.show||(n.show=!0,i.wrap.show());for(var e,t=0;(e=n.stack[t])&&a>t;t++)li=document.createElement("li"),li.innerHTML='<p class="row-a"><span class="user">'+e.name+'</span><span class="disease">疾病：'+e.disease+'</span></p><p class="row-b"><span class="summary">'+e.summary+'</span><span class="detail">'+e.detail+'</span><span class="arrow"></span></p>',i.list.append(li);n.stack.length<=a?i.more.hide():i.more.text("查看全部"+n.total+"封感谢信"),n.stack=[]}}var i={wrap:$("#eteam-thanks-list"),list:$("#eteam-thanks-list ul"),load:$("#eteam-thanks-load"),more:$("#eteam-thanks-more")},n={stack:[],total:0},o=i.load.data("groupid"),a=3;i.list.on("click","li",function(){var e=$(this),t=e.find(".detail");t.length>0&&""!==$.trim(t.text())&&($GH.autoHeight(e.find(".row-b")[0]),e.toggleClass("active"))}),e()}),$GH.module(".gp-eteam-thanks",function(){function e(){var e=n.list[0].getBoundingClientRect();e.bottom-document.documentElement.clientHeight<50&&o.login&&t()}function t(){return o.last?!1:void $GH.request({url:n.load.data("action"),data:{pageNo:o.page,groupId:a},beforeSend:function(){$GH.loading.show()},fulfilled:function(e){o.page++;var t=e.data&&e.data.list||[],i=e.data&&e.data.pageSize||10;t.length<i&&(o.last=!0),o.stack=[];for(var n,a,r=0;n=t[r];r++)a=n.content||"",o.stack.push({name:n.nickName||"",disease:n.diseaseName||"",summary:a.length>40?a.slice(0,38)+"...":a,detail:a.length>40?a:""})},always:function(){i()}})}function i(){if($GH.loading.hide(),o.show||(0===o.stack.length&&n.wrap.html("<p style='text-align: center;padding-top: .5em;'>没有数据哦~</p>"),o.show=!0,n.wrap.show()),o.stack.length>0){for(var e,t=0;e=o.stack[t];t++)li=document.createElement("li"),li.innerHTML='<p class="row-a"><span class="user">'+e.name+'</span><span class="disease">疾病：'+e.disease+'</span></p><p class="row-b"><span class="summary">'+e.summary+'</span><span class="detail">'+e.detail+'</span><span class="arrow"></span></p>',n.list.append(li);o.stack=[]}o.last||o.login||(n.login[0].href="/user/login?target="+encodeURIComponent(location.pathname.slice(1)+location.search),n.login.show())}var n={wrap:$("#eteam-thanks-list"),list:$("#eteam-thanks-list ul"),load:$("#eteam-thanks-load"),login:$("#eteam-thanks-login")},o={show:!1,last:!1,login:$GC.isLogined,page:1,stack:[]},a=n.load.data("groupid");if(n.list.on("click","li",function(){var e=$(this),t=e.find(".detail");t.length>0&&""!==$.trim(t.text())&&($GH.autoHeight(e.find(".row-b")[0]),e.toggleClass("active"))}),n.load.length>0){var r=0,s=-1;$(window).on("scroll",function(){var t=document.body.scrollTop;s>-1&&t>s&&e(),s=t}),n.list.on("touchstart",function(e){r=e.touches[0].clientY}),n.list.on("touchmove",function(t){r-t.touches[0].clientY>15&&e()})}t()}),$GH.module("#J_EteamJoin",function(e){$("#J_ImgCaptcha").on("click",function(){return $GH.refreshCaptcha($(this)),!1}),$("#J_Submit").on("click",function(){var t={"#name":{required:"姓名不能为空"},"#hospital":{required:"医院不能为空"},"#department":{required:"科室不能为空"},"#title":{required:"职称不能为空"},"#mobile":{required:"手机不能为空",mobile:"手机号格式不正确"},"#email":{required:"邮箱不能为空",email:"邮箱地址格式不正确"},"#captcha":{required:"验证码不能为空"}};return $GH.validate(t)&&$GH.formSubmit($("#J_Form"),{error:function(e){$GH.alert(e.message),$GH.refreshCaptcha($("#J_ImgCaptcha"))},success:function(){e.find("li input").val("")}}),!1})}),$GH.module("#J_EteamList",function(e,t){var i={params:{pi:"all",ci:"all",deptId:"all",sort:6,provinceStr:"全国",cityStr:"不限",deptStr:"科室"},urlParams:{},init:function(){var i=this,n=1===e.data("isvolunteer")?!0:!1;n&&(this.params.volunteerDoctor=1,this.params.sort=5);var o=this.urlParams=$.getUrlParams();if(o){for(var a in this.params)o[a]&&(this.params[a]=o[a]);i.initCondition()}t.totalCount=0,t.itemList=[];var r=$GH.iScroll(".wrapper",{top:$(".J_FilterList").height(),bottom:$(".J_FilterBox").height()+1},{probeType:2});t.getExpertList=function(e,n){t.pageNo=e,t.loading=!0,$GH.loading.show(),i.params.pageNo=e,$.ajax({dataType:"json",cache:!1,data:i.params,url:$GC.guahaoServer+"/json/white/expertgroup/searchexpertgroup",type:"get",success:function(e){t.loading=!1,e.data&&e.data.list?(t.itemList=n?e.data.list:t.itemList.concat(e.data.list),t.totalCount=e.data.totalCount):(t.totalCount=0,t.noResult=!0),t.$scan(),r.refresh(),$GH.loading.hide()}})},r.on("scroll",function(){t.itemList.length<t.totalCount&&this.maxScrollY>this.y&&!t.loading&&(t.loading=!0,t.$scan(),t.getExpertList(t.pageNo+1))}),this.initFilter(),t.getExpertList(1)},initCondition:function(){var e=this.params,t=e.sort;if("9"===t||"1"===t){var i=$('.J_ComplexSort li[data-id="'+t+'"]');i&&(i.addClass("selected").siblings().removeClass("selected"),$(".J_ComplexName").html(i.html()))}},initFilter:function(){var e=this;$(".J_Cons span").on("click",function(){$(".J_back").show(),$(this).siblings().removeClass("current"),$(this).addClass("current");var t=$(this).data("id");if(1===t||2===t)e.urlParams&&delete e.urlParams.from,location.href=$(this).data("page")+"&"+$.param(e.params);else if(3===t){var i=$(".J_ConsContainer").css("top");$("#gh").size()||(i=0),$(".J_ConsContainer").css({top:i,height:$(window).height()-$("#gh").height()}).show(),$(".J_ComplexSort").show(),$(".J_ComplexFilter").hide()}}),$(".J_ConsContainer").on("click",function(e){$(e.target).closest(".J_Complex").length||$(e.target).closest(".J_Filter").length||$(this).hide()}),this.initComplexSort()},initComplexSort:function(){var e=this;$(".J_Complex li").on("click",function(){$(this).siblings().removeClass("selected"),$(this).addClass(" selected"),$(".J_ComplexName").html($(this).text()),$(".J_"+e.context+"List").trigger("refreshList"),$(".J_Complex").hide(),$(".J_ConsContainer").hide(),$(".J_Conditions").removeClass("fixed").show().css("top","initial"),e.params.sort=$(this).data("id"),t.getExpertList(1,!0)})}};i.init()}),$GH.module("#J_EteamDept",function(){var e={cacheData:null,init:function(){var e=this;$GH.loading.show(),this.initMainOffice(function(){e.initMainScroll()})},initMainScroll:function(){var e=this,t=$GH.iScroll(".J_MainScroller",{top:$(".J_GoHospital").height()+$(".top-action-bar").height()},{probeType:3,deceleration:2e-4});t.on("scroll",function(){e.adjustCurrent(this.y)}),t.on("scrollEnd",function(){e.adjustCurrent(this.y)}),$GH.loading.hide()},adjustCurrent:function(){var e=$(".J_MainScroller .current");if(e.length){var t=e.offset().top,i=e.height(),n=$(window).height(),o=$("#gh").height();o>=t?$(".J_FixedCurrent").text(e.text()).css({top:o}).show():t>o&&n-i>=t?$(".J_FixedCurrent").hide():$(".J_FixedCurrent").text(e.text()).css({top:"auto",bottom:0}).show()}},initMainOffice:function(e){var t=this,i=$.getUrlParams();this.loadOffice(function(n){if(!n||0===n.length)return void("function"==typeof e&&($GH.alert("抱歉，没有数据！"),e()));for(var o=[],a=0;a<n.length;a++){var r=n[a];o.push('<li data-id="'+r.id+'">'+r.name+"</li>")}$(".J_MainScroller").find("ul").append(o.join("")),t.cacheData=n,$('.J_MainScroller li[data-id="'+i.deptId+'"]').addClass("current"),"function"==typeof e&&e()}),$(".J_MainScroller").on("touchstart","li",function(){$(".J_MainScroller li.current").removeClass("current"),$(this).addClass("current")}),$(".J_MainScroller").on("click","li",function(){var e=$(this).data("id"),t=$(this).text();return setTimeout(function(){var i="_="+(new Date).getTime(),n=$.getUrlParams();switch($("#J_HiddenFrom").val()){case"eteam":n.deptId=e,n.deptStr=t,i="/eteam/list?"+$.param(n)+"&"+i;break;default:i=""}i&&(location.href=i)},100),!1})},loadOffice:function(e){$.ajax({type:"get",dataType:"json",cache:!1,url:$(".J_MainScroller").data("action"),success:function(t){e(t&&t.data)},error:function(e,t){return"abort"===t?void $GH.alert("请求过于频繁，请求已中止"):void $GH.alert("操作失败，请稍后再试！")}})}};e.init()})}(),$GH.module("#J_Myzx",function(e,t){$("body").css({backgroundColor:"#fff"}),t.source=e.find(".meta > .left"),t.source.text().length>10&&t.source.text(t.source.text().replace(/[\S\s]+附属/,"")),t.showMore=function(){$("#sh-title").hide(),$("#sh-detail").hide(),$("#sh-content").show()},alight.directives.al.autoSize=function(e,t){var i=function(){var i=$(e).width(),n=$(e).height(),o=$(e).parent().width();"img"===t&&i>=o&&($(e).css({marginRight:0}),$(e).width(o).height(n*(o/i))),"img"===t&&o>i&&$(e).css({marginRight:"10px","float":"left"}),"video"===t&&$(e).width(o).height(n*(o/i))};window.onresize=i,i()}}),$GH.module("#J_Articles",function(e,t){$("body").css("background","#FFFFFF"),$Common.searchWithFilter({url:e.attr("data-action"),noFilter:!0,scrollerBot:0,successFn:function(e,t,i){return e.hasError?void $GH.alert(e.message):void(e.data&&e.data.list&&(t.itemList=t.itemList.concat(e.data.list),i.pageCount=e.data.totalPage))}},t)}),$GH.module("#J_FxYsdtPage",function(){var e=$("#J_YsdtTmpl").html();$Common.pullUpScroll.init({scrollSelector:".J_YsdtScroller",pageSize:6,listSelector:".J_YsdtList",loadingData:function(e,t){var i=this,n=$(".J_YsdtList");$.ajax({type:"get",dataType:"json",cache:!1,data:{pageNo:e},url:n.data("action"),success:function(e){e.data.recordCount?i.totalCount=e.data.recordCount:$(".J_Empty").show(),t&&t(e.data.items)},error:function(e,t){return"abort"===t?void $GH.alert("请求过于频繁，请求已中止"):void $GH.alert("操作失败，请稍后再试！")}})},buildHtml:function(t){return $GH.alTmpl(e,t)},afterRendered:function(){$(".g-image-upload-box").off("click",".preview"),$(".g-image-upload-box").on("click",".preview",function(){$GH.ImageUploader($(this).parent(),{onlySlider:this})})}})}),$(function(){$GH.module("#J_helper",function(){$(".login .title").click(function(){$(this).children("ul").hasClass("hide")?($(".login .title").children("ul").addClass("hide"),$(".login .title").children("div").css("background","url("+$GC.staticServer+"/h5/img/helper/closed.png) no-repeat 93% 10px white"),$(this).children("ul").removeClass("hide"),$(this).children("div").css("background","url("+$GC.staticServer+"/h5/img/helper/open.png) no-repeat 93% 13px white")):($(this).children("ul").addClass("hide"),$(this).children("div").css("background","url("+$GC.staticServer+"/h5/img/helper/closed.png) no-repeat 93% 10px white")),$(".login .title").children("div").css("background-size","15px")})}),$GH.module("#J_QF_Add",function(e,t){t.submit=function(){var t=$GH.validate({"#v_content":{required:"请详细描述您的问题",check:function(e){return e.length<10||e.length>500?"问题描述长度范围：10到500字":!0}}});t&&e.find("form")[0].submit()},t.imageShow=function(e){$GH.ImageUploader($(e.target).parent(),{onlySlider:e.target})};var i=function(){return e.find("img.preview").length};$GH.ImageUploader($(".g-image-upload-box"),{inputName:"imagePath",limitNum:5,uploaderUrl:$GC.guahaoServer+"/json/black/image/upload?type=5",afterComplete:function(){i()>0&&$(".J_Showmeonfileuploaded").hide(),5===i()&&$(".upload-btn").hide()},afterDelete:function(){i()<=5&&$(".upload-btn").show(),1===i()&&$(".J_Showmeonfileuploaded").show()}})}),$GH.module("#J_QF_Append",function(e,t){t.submit=function(){var t=$GH.validate({"#v_content":{required:"请详细描述您的问题",check:function(e){return e.length<10||e.length>500?"问题描述长度范围：10到500字":!0}}});t&&e.find("form")[0].submit()},t.imageShow=function(e){$GH.ImageUploader($(e.target).parent(),{onlySlider:e.target})};var i=function(){return e.find("img.preview").length};$GH.ImageUploader($(".g-image-upload-box"),{inputName:"imagePath",uploaderUrl:$GC.guahaoServer+"/json/black/image/upload?type=5",afterComplete:function(){i()>0&&$(".J_Showmeonfileuploaded").hide(),5===i()&&$(".upload-btn").hide()},afterDelete:function(){i()<=5&&$(".upload-btn").show(),1===i()&&$(".J_Showmeonfileuploaded").show()}})}),$GH.module("#J_QuestionFeedback",function(e,t){var i={init:function(){t.imageShow=function(e){$GH.ImageUploader($(e.target).parent(),{onlySlider:e.target})},$(".J_message").each(function(){$(this).html($(this).text())}),$(".J_message img").each(function(){$(this).attr("al-src",$(this).attr("src")),$(this).attr("al-click","imageShow($event, $image_index)"),$(this).addClass("preview")}),$(".star").click(function(){function e(e){$.ajax({url:"/json/white/helper/comment",type:"get",dataType:"json",cache:!1,data:{encodeId:$(".msg-inner").data("value"),satisfied:e},success:function(e){e.hasError?$GH.alert(e.message):($(".question").hide(),window.location.reload())}})}new $GH.ActionSheet("",[{name:"非常满意",styleClass:"option",fn:function(){e(2),this.close()}},{name:"一般",styleClass:"option",fn:function(){e(0),this.close()}},{name:"不满意",styleClass:"option",fn:function(){e(1),this.close()}},{name:"取消",styleClass:"cancel",fn:function(){this.close()}}]).open()})}};i.init()}),$GH.module("#J_HotQuestionHome",function(){var e={officeId:0,init:function(){$(document).on("click",".J_HQList li",function(){location.href=$(this).parent().parent().data("page")+$(this).data("id")});var e=parseInt(document.documentElement.clientHeight/50+1),t=60;location.href.indexOf("://doctor.")>=0&&(t+=50),$Common.pullUpScroll.init({pageSize:e,initScrollCfg:{top:108,bottom:t},scrollSelector:".J_HotQuestionScroller",listSelector:".J_HQList",loadingData:function(i,n){var o=this,a=$(".J_HQList");$.ajax({type:"get",dataType:"json",cache:!1,data:{pageSize:e,pageNo:i},url:a.data("action"),success:function(i){var a=i.map.localPageModel.list;a&&a.length>0?(o.totalCount=i.map.localPageModel.totalCount,$(".J_TotalCount").html(i.map.localPageModel.totalCount),o.totalCount>e&&$(".J_HotQuestionScroller").css("bottom",t-50+"px"),n(a)):($(".J_TotalCount").html(0),$(".J_EmptyTips").show(),$(".J_HotQuestionScroller").hide(),n([]))},error:function(e,t){return"abort"===t?void $GH.alert("请求过于频繁，请求已中止"):void $GH.alert("操作失败，请稍后再试！")}})},buildHtml:function(e){var t=[];return t.push('<li class="item" data-id="'+e.id+'">'+e.title+"</li>"),t.join("")}})}};e.init()}),$GH.module("#J_ContentDetail",function(){var e={init:function(){$(".J_vote").click(function(){var e=$(this);return $(".J_Ifvoted").data("value")?!1:e.data("voted")?!1:(e.data("voted",!0),void $.ajax({type:"get",dataType:"json",cache:!1,url:$GC.guahaoServer+"/json/white/helper/remark",data:{contentId:$(".J_contentId").val(),remarkTag:$(this).children("a").data("value")},success:function(t){if(t.hasError)$GH.alert(t.message);else{var i=e.find(".J_Num").text();e.find(".J_Num").text(parseInt(i)+1),$(".J_Ifvoted").data("value","true"),$(".J_vote").each(function(){$(this).addClass("voted").removeClass("J_vote")})}},error:function(e,t){return"abort"===t?void $GH.alert("请求过于频繁，请求已中止"):void $GH.alert("操作失败，请稍后再试！")}}))})}};e.init()}),$GH.module("#J_CategoryHome",function(){var e={officeId:0,init:function(){$(document).on("click",".J_CategoryList dd",function(){location.href=$(".J_CategoryList").first().data("page")+$(this).data("id")}),$(document).on("click",".J_itemsBar",function(){$(this).toggleClass("open").next().toggle(),$Common.pullUpScroll.scroll.refresh()});var e=parseInt(document.documentElement.clientHeight/50+1),t=60;location.href.indexOf("://doctor.")>=0&&(t+=50),$Common.pullUpScroll.init({pageSize:e,initScrollCfg:{top:108,bottom:t},scrollSelector:".J_CategoryScroller",listSelector:".J_CategoryList",loadingData:function(i,n){var o=this,a=$(".J_CategoryList");$.ajax({type:"get",dataType:"json",cache:!1,data:{pageSize:e,pageNo:i},url:a.data("action"),success:function(i){var a=i.map.localPageModel.list;a&&a.length>0?(o.totalCount=i.map.localPageModel.totalCount,$(".J_TotalCount").html(i.map.localPageModel.totalCount),o.totalCount>e&&$(".J_CategoryScroller").css("bottom",t-50+"px"),n(a)):($(".J_TotalCount").html(0),$(".J_EmptyTips").show(),$(".J_CategoryScroller").hide(),n([]))},error:function(e,t){return"abort"===t?void $GH.alert("请求过于频繁，请求已中止"):void $GH.alert("操作失败，请稍后再试！")}})},buildHtml:function(e){var t=[];t.push('<li data-id="'+e.id+'">'),t.push('<div class="itemsbar J_itemsBar">'+e.name+"</div>"),t.push('<dl class=" subitems">');for(var i=[],n=0,o=e.childList.length;o>n;n++){var a=e.childList[n];i.push('<dd class="item" data-id="'+a.id+'">'+a.name+"</dd>")}return t.push(i.join("")),t.push("</dl>"),t.push("</li>"),t.join("")}})}};e.init()}),$GH.module("#J_SearchContentHome",function(){var e={officeId:0,init:function(){$(document).on("click",".J_SearchContentList li",function(){location.href=$(this).parent().parent().data("page")+$(this).data("id")}),$Common.pullUpScroll.init({pageSize:10,initScrollCfg:{top:90},scrollSelector:".J_SearchContentScroller",listSelector:".J_SearchContentList",loadingData:function(e,t){var i=this,n=$(".J_SearchContentList");$.ajax({type:"get",dataType:"json",cache:!1,data:{pageSize:10,pageNo:e},url:n.data("action"),success:function(e){var n=e.map.localPageModel.list;n&&n.length>0?(i.totalCount=e.map.localPageModel.totalCount,$(".J_TotalCount").html(e.map.localPageModel.totalCount),t(n)):($(".J_TotalCount").html(0),$(".J_EmptyTips").show(),$(".J_SearchContentScroller").hide(),t([]))},error:function(e,t){return"abort"===t?void $GH.alert("请求过于频繁，请求已中止"):void $GH.alert("操作失败，请稍后再试！")}})},buildHtml:function(e){var t=[];return t.push('<li data-id="'+e.id+'">'+e.title+"</li>"),t.join("")}})}};e.init()}),$GH.module("#J_FeedbackListHome",function(){var e={officeId:0,init:function(){$(document).on("click",".J_FeedbackListList li",function(){location.href=$(this).parent().parent().data("page")+$(this).data("id")});var e=!0;$Common.pullUpScroll.init({pageSize:7,initScrollCfg:{top:-1},scrollSelector:".J_FeedbackListScroller",listSelector:".J_FeedbackListList",loadingData:function(t,i){var n=this,o=$(".J_FeedbackListList");$.ajax({type:"get",dataType:"json",cache:!1,data:{pageSize:7,pageNo:t},url:o.data("action"),success:function(t){var o=t.map.localPageModel.list;o&&6==o.length&&e&&$(".J_FeedbackListScroller").css("margin-bottom","60px"),o&&o.length>0?(e=!1,n.totalCount=t.map.localPageModel.totalCount,$(".J_TotalCount").html(t.map.localPageModel.totalCount),i(o)):($(".J_TotalCount").html(0),$(".J_EmptyTips").show(),$(".J_FeedbackListScroller").hide(),i([]))},error:function(e,t){return"abort"===t?void $GH.alert("请求过于频繁，请求已中止"):void $GH.alert("操作失败，请稍后再试！")}})},buildHtml:function(e){var t=function(e,t){var i=new Date(e),n=function(e){return(10>e?"0":"")+e};return t.replace(/yyyy|MM|dd|HH|mm|ss/g,function(e){switch(e){case"yyyy":return n(i.getFullYear());case"MM":return n(i.getMonth()+1);case"mm":return n(i.getMinutes());case"dd":return n(i.getDate());case"HH":return n(i.getHours());case"ss":return n(i.getSeconds())}})},i=[];return i.push('<li class="msg-contain" data-id="'+e.encodeId+'"><div class="msg-show">'+e.content+'</div><div class="msg-date">'+t(e.gmtCreated,"yyyy-MM-dd HH:mm:ss")+"</div>"),i.push(1001==e.fedStatus?'<div class="reply reply-wait"><div>待回复</div>':1002==e.fedStatus?'<div class="reply reply-ready"><div>已回复</div>':1003==e.fedStatus?'<div class="reply reply-solve"><div>已解决</div>':'<div class="reply reply-ready"><div>跟进中</div>'),e.patientUnreadReply>0&&i.push('<img src="'+$GC.staticServer+'/h5/img/helper/red-dot.png" alt=""></div>'),i.push("</li>"),i.join("")}})}};e.init()}),$GH.module("#J_CategoryDetailHome",function(){var e={officeId:0,init:function(){$(document).on("click",".J_CategoryDetailList li",function(){location.href=$(this).parent().parent().data("page")+$(this).data("id")});var e=!0,t=parseInt(document.documentElement.clientHeight/50+1);$Common.pullUpScroll.init({pageSize:t,initScrollCfg:{top:-1,bottom:-50},scrollSelector:".J_CategoryDetailScroller",listSelector:".J_CategoryDetailList",loadingData:function(i,n){var o=this,a=$(".J_CategoryDetailList");$.ajax({type:"get",dataType:"json",cache:!1,data:{pageNo:i,pageSize:t,categoryId:$("#categoryId").val()},url:a.data("action"),success:function(t){var i=t.map.localPageModel.list;i&&i.length>0?(e=!0,o.totalCount=t.map.localPageModel.totalCount,$(".J_TotalCount").html(t.map.localPageModel.totalCount),n(i)):(e=!1,$(".J_TotalCount").html(0),$(".J_EmptyTips").show(),n([]))},error:function(e,t){return"abort"===t?void $GH.alert("请求过于频繁，请求已中止"):void $GH.alert("操作失败，请稍后再试！")}})},buildHtml:function(e){var t=[];return t.push('<li class="item" data-id="'+e.id+'">'+e.title+"</li>"),t.join("")}})}};e.init()})}),$GH.module("#J_Homepage",function(){setTimeout(function(){var e=$(window).height()-$("#gh").height()-$("#gf").height()-$("#J_SearchEmbed").height()-$("#J_Modules").height()-10;e>$("#J_Banner").height()&&$("#J_Banner").css("height",e),$("#J_Banner").css("visibility","visible"),$("#J_Modules").css("visibility","visible").addClass("kf-zoomIn kf-animated")},10);var e=window.YulorePage;e&&e.enableOrderButton($GC.guahaoServer+"/my/order/list")}),$GH.module("#J_HomepageV1",function(){new Swiper("#J_Swiper",{pagination:".pagination",visibilityFullFit:!0,calculateHeight:!0,autoplay:5e3,autoplayDisableOnInteraction:!1,loop:!0}),$(".swiper-slide.banner").show();var e=$GH.cookie.get("bottom_showed");1!=e&&$(".bottom-show").show(),$(".bottom-show").click(function(){$GH.cookie.set("bottom_showed",1,3),$(this).hide()}),$(".bottom-show div").click(function(){return $GH.cookie.set("bottom_showed",1,3),$(".bottom-show").hide(),!1});var t=window.YulorePage;t&&t.enableOrderButton($GC.guahaoServer+"/my/order/list")}),$GH.module("#J_EArticle_List",function(e,t){t.expertId=e.data("eid"),t.loading=!0,t.articleList=[],t.pageNo=1,t.pageCount=1,$GH.loading.show(),t.page=function(){$.ajax({url:$GC.guahaoServer+"/json/white/expert/article/"+t.expertId,dataType:"json",data:{pageNo:t.pageNo},error:function(){$GH.loading.hide(),t.loading=!1},success:function(i){return $GH.loading.hide(),t.loading=!1,i.hasError?(t.$scan(),void $GH.alert(i.message)):(t.pageCount=i.data.totalPage,t.articleList=t.articleList.concat(i.data.expertArticleList),t.$scan(),void(e.height()<window.screen.availHeight&&t.pageCount>t.pageNo&&(t.loading=!0,t.pageNo++,t.$scan(),t.page())))
}})},t.page(),window.onscroll=function(){this.scrollY+this.screen.availHeight+20>=document.body.scrollHeight&&t.pageCount>t.pageNo&&(t.loading=!0,t.pageNo++,t.$scan(),t.page())}}),$GH.module("#J_Article_List",function(e,t){alight.filters.snapshot=function(){return function(e){return e.replace(/<\/?[^>]*>/g,"").substring(0,30)+" .."}},alight.filters.htmlentitiesDecode=function(){return function(e){var t=document.createElement("textarea");return t.innerHTML=e,t.value}},alight.filters.ts2date=function(){return function(e){return new Date(e)}},t.hospitalId=e.data("hid"),t.typeId=e.data("tid"),t.loading=!0,t.articleList=[],t.pageNo=1,t.pageCount=1,t.defaultImg=$GC.staticServer+"/h5/img/hos-article.png",$GH.loading.show(),t.detail=function(e){location.href=$GC.guahaoServer+"/hospital/article/detail/"+e+"?type="+t.typeId},"0"===t.typeId&&(document.title="医院文章",$("#gh > h1").text("医院文章"),t.defaultImg=$GC.staticServer+"/h5/img/hos-article-jkjt.png"),t.page=function(){$.ajax({url:$GC.guahaoServer+"/json/white/hospital/article/"+t.hospitalId,dataType:"json",data:{pageNo:t.pageNo,type:t.typeId},error:function(){$GH.loading.hide(),t.loading=!1},success:function(i){var n=[];return $GH.loading.hide(),t.loading=!1,i.hasError?(t.$scan(),void $GH.alert(i.message)):i.data&&i.data.hospitalArticleList?(t.pageCount=i.data.totalPage,$.each(i.data.hospitalArticleList,function(e,i){i.pageNo=t.pageNo,i.picture=i.picture&&""!=i.picture?$GC.imageServer+i.picture:t.defaultImg,n.push(i)}),t.articleList=t.articleList.concat(n),t.$scan(),void(e.height()<window.screen.availHeight&&t.pageCount>t.pageNo&&(t.loading=!0,t.pageNo++,t.$scan(),t.page()))):void t.$scan()}})},t.page(),window.onscroll=function(){this.scrollY+this.screen.availHeight+20>=document.body.scrollHeight&&t.pageCount>t.pageNo&&(t.loading=!0,t.pageNo++,t.$scan(),t.page())}}),$GH.module("#J_ReportSelectCase",function(e,t){t.save=function(e){$.get(e,function(e){$GH.alert(e.message,2e3,function(){location.href=e.returnUrl})},"json")}}),$GH.module("#J_DaohangMap",function(e){var t,i=function(){e.find("lbs-map").css({height:document.body.scrollHeight-45})};alight.filters.oneTel=function(){return function(e){return-1!==e.indexOf(",")?e.split(",")[0]:e}},window.onresize=i,i(),(t=function(){var i,n=e.find(".info-box"),o=e.find(".lbs-map-wrapper"),a=e.find(".J_Panel");n.length>0?(n.hide(),o.css({opacity:1}),i=n.find(".tohere").attr("href"),a.find(".J_BaiduNav").attr("href",i),a.show()):setTimeout(function(){t()},500)})()}),$GH.module("#J_ReportIndex",function(e){function t(){$.ajax({url:"/json/black/res/firsthosp/"+o+"/"+n,cache:!1,success:function(e){e.hasError||(i[o].jzk=e.data.carValue||""),$("#J_CardTypeSel").trigger("change")}})}var i={},n=e.data("hid"),o="";e.find(".J_PatientsDropDown").dropdownSheet($("#J_PatientSel option").length<6?{name:"添加就诊人",fn:function(){return this.close(),location.href=$GC.guahaoServer+"/my/patient/add?backUrl="+location.href,!1}}:null),e.find(".J_PatientsDropDown select").on("change",function(){var e=$(this).find("option:selected");o=$(this).val(),i[o]?$("#J_CardTypeSel").trigger("change"):(i[o]={ybk:e.attr("data-ybk")},t())}).trigger("change"),$("#J_CardTypeSel").on("change",function(){var e=$(this).val();i[o]&&$("#cardNo").val(1==e?i[o].jzk||"":i[o].ybk||"")}),e.find("#J_Submit").on("click",function(){var t=$.trim($("#cardNo").val());return""!=t?$.ajax({url:"/json/white/report/verifycard/"+n+"/"+o,data:{cardNo:t},cache:!1,success:function(t){return t.hasError?void $GH.alert(t.message):void e.find("form").submit()}}):e.find("form").submit(),!1})}),$GH.module("#J_ReportDetail",function(e,t){t.imageShow=function(e){$GH.ImageUploader($(e.target).parent(),{onlySlider:e.target})}}),$GH.module("#J_AddCardPage",function(e){function t(e){var e=e||$("#J_PatientSel").val();$.ajax({url:"/json/black/getcardinfo?hospitalId="+n+"&patientId="+e,cache:!1,success:function(t){i[e].init=!0,t.hasError?(i[e].jzk="",$("#J_CardTypeSel").trigger("change")):(i[e].jzk=t.data.card_no?t.data.card_no:"",$("#J_CardTypeSel").trigger("change"))}})}e.find(".J_PatientsDropDown").dropdownSheet($("#J_PatientSel option").length<6?{name:"添加就诊人",fn:function(){return this.close(),location.href=$GC.guahaoServer+"/my/patient/add?backUrl="+location.href,!1}}:null);var i=function(){var e={};return $("#J_PatientSel").find("option").each(function(){var t=$(this);e[t.val()]={init:!1,ybk:t.attr("data-values")?t.attr("data-values"):""}}),e}(),n=$("#hospitalIdIpt").val();t(),$("#J_CardTypeSel").on("change",function(){var e=$(this),t=$("#J_PatientSel").val(),n=$("#cardNoIpt");n.val(1==e.val()?i[t].ybk:i[t].jzk)}),$("#J_PatientSel").on("change",function(){var e=$(this);return i[e.val()].init?$("#J_CardTypeSel").trigger("change"):t(e.val()),!1}),e.find("#J_Submit").on("click",function(){var e=$(this),t=e.closest("form"),i=$GH.validate({"#cardNoIpt":{required:"卡号不能为空"}});return i&&$GH.formSubmit(t),!1})}),$GH.module("#J_HospitalHomepage",function(e,t){var i=e.find(".J_Marker");t.fid=null,t.favorite=function(e,n,o){o&&(t.fid=o,t.$scan()),i.hasClass("on")?new $GH.ActionSheet("取消关注?",[{name:"确定",styleClass:"option",fn:function(){var e=this;$.ajax({url:$GC.guahaoServer+"/json/black/favorite/del/"+t.fid,dataType:"json",success:function(t){t.hasError?$GH.alert(t.message):(i.removeClass("on").removeClass("active"),e.close())}})}},{name:"取消",styleClass:"cancel",fn:function(){this.close()}}]).open():$.get($GC.guahaoServer+"/json/black/favorite/hospital/"+e,{hospname:n},function(e){e.hasError?$GH.alert(e.message):(i.addClass("on"),t.fid=e.data.rid,t.$scan(),$GH.alert("关注成功"))},"json")}}),function(){$GH.module("#J_JiahaoAdd",function(e){var t={init:function(){this.initDatePicker(),this.initUpload(),this.initSubmit(),e.find(".J_AdjustWidth").each(function(){var e=$(this);e.find(".input-box").css("margin-left",e.find(".nowidth").width()+5+"px")}),e.find(".J_PatientsDropDown").dropdownSheet($("#J_PatientSel option").length<6?{name:"添加就诊人",fn:function(){return this.close(),location.href=$GC.guahaoServer+"/my/patient/add?backUrl="+location.href,!1}}:null),$(".J_Check").on("click",function(){return $(this).toggleClass("g-checkbox-checked"),$(this).toggleClass("g-checkbox"),$("#J_Agreement").val($(this).hasClass("g-checkbox-checked")?"1":""),!1})},initUpload:function(){var t=function(){return e.find("img.preview").length};$GH.ImageUploader($(".g-image-upload-box"),{inputName:"imagePath",uploaderUrl:$GC.guahaoServer+"/json/black/image/upload?type=4",afterComplete:function(){t()>0&&$(".J_Showmeonfileuploaded").hide(),9===t()&&$(".upload-btn").hide()},afterDelete:function(){t()<=9&&$(".upload-btn").show(),1===t()&&$(".J_Showmeonfileuploaded").show()}})},initSubmit:function(){$("#J_Submit").on("click",function(){var t={"#J_PatientSel":{required:"就诊人不能为空"},"#J_HiddenDateFrom":{required:"请选择就诊起始日期"},"#J_HiddenDateTo":{required:"请选择就诊结束日期"},"#J_Agreement":{required:"请阅读对症预约申请须知，并勾选"},"#diseseName":{required:"请填写疾病名称，如未确诊请填写未确诊"},"#content":{required:"请详细描述您的病情和所需帮助，以便医生判断是否可以获得加号（20-500字）",check:function(e){return e.length<20?"请详细描述您的病情和所需帮助，以便医生判断是否可以获得加号（20-500字）":!0}}};if($GH.validate(t)){if(0===e.find("img.preview").length)return $GH.alert("请上传图片资料"),!1;$GH.confirm("请尊重和重视专家团队提供的加号服务，加号成功后不可随意取消，如逾期未就诊将取消您在挂号网的挂号资格！继续申请？",[{name:"取消",style:"btn",fn:function(e){e()}},{name:"确定",style:"btn",fn:function(){e.find("form")[0].submit()}}])}return!1})},initDatePicker:function(){var t=this,i=["周日","周一","周二","周三","周四","周五","周六"];e.find(".J_DP").each(function(){var e=$(this),n=e.find(".J_DPTxt"),o=e.find(".J_DPVal"),a=o.val(),r=t.getNextWorkDay().dateString;new Date(a)<new Date(r)&&($(".J_DPTxt").text("日期").addClass("ph"),$(".J_DPVal").val("")),e.timepicker({defaultValue:function(){var e=o.val(),i=t.getNextWorkDay().dateString;return e?e:i},onSelect:function(e){var a=new Date;a.setFullYear(e[0],e[1]-1,e[2]);var r=o.val();return o.val(e.join("-")),t.validateDate()?(n.html(e[1]+"-"+e[2]+" "+i[a.getDay()]).removeClass("ph"),!0):(o.val(r),!1)}})})},getNextWorkDay:function(){var e=new Date;new Date<new Date("2015-10-03")&&(e=new Date("2015-10-03"));var t=e,i=t.getFullYear()+"-"+(t.getMonth()+1)+"-"+t.getDate(),n=new Date(i.replace(/-/g,"/")),o=(n.getDay(),7);n.setTime(n.getTime()+24*o*3600*1e3);var a=e;return a.setTime(a.getTime()+24*(o+6)*3600*1e3),{obj:n.toString(),time:n.getTime(),mmddStart:n.getMonth()+1+"月"+n.getDate()+"日",maxTime:a.getTime(),mmddEnd:a.getMonth()+1+"月"+a.getDate()+"日",dateString:n.getFullYear()+"-"+(n.getMonth()+1)+"-"+n.getDate()}},validateDate:function(){var t=!0,i=e.find(".J_DPValFrom").val(),n=e.find(".J_DPValTo").val(),o=null,a=null,r=this.getNextWorkDay(),s=function(e){(e.getTime()<r.time||e.getTime()>r.maxTime)&&(t=!1,$GH.alert("仅接收"+r.mmddStart+"-"+r.mmddEnd+"之间的加号申请"))};return i&&(o=new Date(i.replace(/-/g,"/")),s(o)),n&&(a=new Date(n.replace(/-/g,"/")),s(a)),o&&a&&o.getTime()>a.getTime()&&(t=!1,$GH.alert("期望就诊时间段不正确")),t}};t.init()}),$GH.module("#J_QuickList",function(e,t){function n(e){var t=e.length;for(i=0;t>i;i++){var n=e[i].state,a=(e[i].applyId,"<i>申请</i>"),r="applying",s=0;1==n||2==n||8==n?(a='<i class="color_green">申请中</i>',r="applying"):6==n?(a='<i class="off">申请取消</i>',r="delete"):5==n||7==n?(a='<i class="color_orange">申请未通过</i>',r="nothrough"):3==n?(a="<i>申请通过</i>",r="expert"):4==n&&(a="<i>申请通过</i>",r="eteam"),1==n&&0==e[i].nowOperateUserId?s=1:(3==n||4==n||5==n||6==n||7==n)&&(s=2),""===e[i].diseaseName&&(e[i].diseaseName="未确诊"),e[i].con=a,e[i].detail=r,e[i].gmtCreated=o(e[i].gmtCreated),e[i].operate=s}}function o(e){var t=new Date(e),i=t.getFullYear().toString().substr(2,2),n=t.getMonth()+1,o=t.getDate(),a=t.toTimeString().substr(0,8),r=i+"-"+n+"-"+o+" "+a;return r}t.loading=!0,t.itemList=[],$GH.loading.show(),$Common.pullUpAngularScroll.init({initScrollCfg:{top:60},scrollSelector:".J_Scroller",pageSize:6,listSelector:".J_ScrollerList",loadingData:function(e,i){var o=this;$.get("/json/black/quick/list",{pageNo:e,pageSize:6},function(e){if(e.hasError)return void $GH.alert(e.message);if(e.map&&e.map.quickReserveDOUserQuery){if(e.map.quickReserveDOUserQuery.dataList){var a=e.map.quickReserveDOUserQuery.dataList;n(a),t.itemList=t.itemList.concat(a)}o.pageCount=e.map.quickReserveDOUserQuery.totalPage}t.loading=!1,$GH.loading.hide(),t.$scan(),i&&i()},"json")}}),t.cancel=function(e){$GH.confirm("确定取消该申请吗？",[{name:"是",style:"btn",fn:function(t){t(),location.href="/my/quick/cancel?applyId="+e}},{name:"否",style:"btn",fn:function(e){e()}}])},t.deleteIt=function(e){$GH.confirm("确定删除该申请吗？",[{name:"是",style:"btn",fn:function(t){t(),location.href="/my/quick/del?applyId="+e}},{name:"否",style:"btn",fn:function(e){e()}}])}}),$GH.module("#J_JiahaoList",function(e,t){t.loading=!0,t.itemList=[],$GH.loading.show(),$Common.pullUpAngularScroll.init({initScrollCfg:{top:60},scrollSelector:".J_Scroller",pageSize:6,listSelector:".J_ScrollerList",loadingData:function(e,i){var n=this;$.get("/json/black/jiahao/list",{pageNo:e,pageSize:6},function(e){return e.hasError?void $GH.alert(e.message):(e.map&&e.map.localPageModel&&(e.map.localPageModel.list&&(t.itemList=t.itemList.concat(e.map.localPageModel.list)),n.pageCount=e.map.localPageModel.pageCount),t.loading=!1,$GH.loading.hide(),t.$scan(),void(i&&i()))},"json")}})}),$GH.module("#J_QucikBooking",function(e){var t={fromAppConsult:!1,init:function(){this.fromAppConsult=!!$(".J_AppConsultId").length,this.initDatePicker(),this.initUpload(),this.initSubmit(),this.fromAppConsult>0&&this.initDoctorBooking(),e.find(".J_AdjustWidth").each(function(){var e=$(this);e.find(".input-box").css("margin-left",e.find(".nowidth").width()+5+"px")}),$(".J_Mask").on("touchstart",function(){var e=$(".J_ConsultInfo").attr("data-login-page");location.href=e}),e.find(".J_PatientsDropDown").dropdownSheet($("#J_PatientSel option").length<6?{name:"添加就诊人",fn:function(){return this.close(),location.href=$GC.guahaoServer+"/my/patient/add?backUrl="+location.href,!1}}:null),$(".J_Check").on("click",function(){return $(this).toggleClass("g-checkbox-checked"),$(this).toggleClass("g-checkbox"),$("#J_Agreement").val($(this).hasClass("g-checkbox-checked")?"1":""),!1}),$("#J_SelectDis").on("click",function(){return $("#sw-wrapper").is(":visible")?!1:($GH.SS.init($(this)),!1)}),$(".J_SelectCity").on("click",function(){return $GH.selectCity.init(function(e){var t=e.provinceStr;"all"!==e.cityId&&(t+=e.cityStr),$(".J_CityNameTxt").val(t),$(".J_CityName").val(e.provinceStr+"_"+e.cityStr),$(".J_CityId").val(e.provinceId+"_"+e.cityId)}),!1})},initDoctorBooking:function(){$BG.ready(function(e){e&&e.registerHandler("saveWykyData",function(e,t){$.ajax({type:"post",dataType:"json",cache:!1,url:$GC.guahaoServer+"/json/quickresve/app/back",data:$("#wykyform").serialize(),success:function(e){e&&!e.hasError&&t()},error:function(){$GH.alert("操作失败，请稍后再试！")}})})})},initUpload:function(){var t=function(){return e.find("img.preview").length};t()>0&&$(".J_Showmeonfileuploaded").hide(),9===t()&&$(".upload-btn").hide();var i=$(".J_AppConsultId").val();$GH.ImageUploader($(".g-image-upload-box"),{inputName:"imagePath",uploaderUrl:$GC.guahaoServer+"/json/black/image/upload?type=7&consultId="+i,afterComplete:function(){t()>0&&$(".J_Showmeonfileuploaded").hide(),9===t()&&$(".upload-btn").hide()},onDelete:function(e){var t=$("input."+e).attr("data-imageNameNotSuf");$.ajax({type:"post",url:$GC.guahaoServer+"/json/quickresve/image/cache/del?imageNameNotSuf="+t+"&consultId="+i,dataType:"json",cache:!1})},afterDelete:function(){t()<=9&&$(".upload-btn").show(),1===t()&&$(".J_Showmeonfileuploaded").show()}})},initSubmit:function(){$("#J_Submit").on("click",function(){var t={".J_CityName":{required:"请先选择希望就诊城市"},"#J_PatientSel":{required:"就诊人不能为空"},"#J_HiddenDateFrom":{required:"请选择就诊起始日期"},"#J_HiddenDateTo":{required:"请选择就诊结束日期"},"#J_Agreement":{required:"请阅读微医快约申请须知，并勾选"},"#content":{required:"请详细描述您的病情和所需帮助，方便医生帮您精准匹配专家团队（10-500字）",check:function(e){return e.length<10?"请详细描述您的病情和所需帮助，方便医生帮您精准匹配专家团队（10-500字）":!0}}};return $GH.validate(t)&&(this.fromAppConsult?e.find("form")[0].submit():$GH.formSubmitV2(e.find("form"),$(this))),!1})},initDatePicker:function(){var t=this,i=["周日","周一","周二","周三","周四","周五","周六"];e.find(".J_DP").each(function(){var e=$(this),n=e.find(".J_DPTxt"),o=e.find(".J_DPVal");e.timepicker({defaultValue:function(){var e=o.val(),i=t.getNextWorkDay().dateString;return e?e:i},onSelect:function(e){var a=new Date;a.setFullYear(e[0],e[1]-1,e[2]);var r=o.val();return o.val(e.join("-")),t.validateDate()?(n.html(e[1]+"-"+e[2]+" "+i[a.getDay()]).removeClass("ph"),!0):(o.val(r),!1)}})})},getNextWorkDay:function(){var e=new Date,t=e.getFullYear()+"-"+(e.getMonth()+1)+"-"+e.getDate(),i=new Date(t.replace(/-/g,"/")),n=1;i.setTime(i.getTime()+24*n*3600*1e3);var o=new Date;return o.setTime(o.getTime()+24*(n+13)*3600*1e3),{obj:i.toString(),time:i.getTime(),mmddStart:i.getMonth()+1+"月"+i.getDate()+"日",maxTime:o.getTime(),mmddEnd:o.getMonth()+1+"月"+o.getDate()+"日",dateString:i.getFullYear()+"-"+(i.getMonth()+1)+"-"+i.getDate()}},validateDate:function(){var t=!0,i=e.find(".J_DPValFrom").val(),n=e.find(".J_DPValTo").val(),o=null,a=null,r=this.getNextWorkDay(),s=function(e){(e.getTime()<r.time||e.getTime()>r.maxTime)&&(t=!1,$GH.alert("仅接收"+r.mmddStart+"-"+r.mmddEnd+"之间的加号申请"))};return i&&(o=new Date(i.replace(/-/g,"/")),s(o)),n&&(a=new Date(n.replace(/-/g,"/")),s(a)),o&&a&&o.getTime()>a.getTime()&&(t=!1,$GH.alert("期望就诊时间段不正确")),t}};t.init()}),$GH.module("#J_MyQuick",function(){var e={init:function(){$(".J_jiahao").length>0&&this.eteamJiahao(),$(".J_cancel").length>0&&this.cancelJiahao()},eteamJiahao:function(){$(".J_jiahao").click(function(){var e=$(this).attr("data-url");$GH.confirm("确定申请加号吗？",[{name:"是",style:"btn",fn:function(t){t(),location.href=e}},{name:"否",style:"btn",fn:function(e){e()}}])})},cancelJiahao:function(){$(".J_cancel").click(function(){var e=$(this).attr("data-href");$GH.confirm("确定取消该申请吗？",[{name:"是",style:"btn",fn:function(t){t(),location.href=e}},{name:"否",style:"btn",fn:function(e){e()}}])})}};e.init()})}(),function(){$GH.module("#J_MeetingJoin",function(e){$("#J_ImgCaptcha").on("click",function(){return $GH.refreshCaptcha($(this)),!1}),$("#J_Submit").on("click",function(){var t={"#name":{required:"姓名不能为空"},"#hospital":{required:"单位不能为空"},"#department":{required:"科室不能为空"},"#title":{required:"职称不能为空"},"#mobile":{required:"手机不能为空",mobile:"手机号格式不正确"},"#comments":{required:"擅长病种不能为空"},"#captcha":{required:"验证码不能为空"}};return $GH.validate(t)&&$GH.formSubmit($("#J_Form"),{error:function(e){$GH.alert(e.message),$GH.refreshCaptcha($("#J_ImgCaptcha"))},success:function(){e.find("li input").val("")}}),!1})})}(),$GH.module(".gp-wyky-midautumn",function(e){var t=!!e.data("finished"),i=function(){function e(i){if(i){var n=document.querySelector("[data-router="+i+"]");n&&(t&&document.querySelector("[data-router="+t+"]").setAttribute("data-router-active","false"),n.setAttribute("data-router-active","true"),document.body.scrollTop=0,i in e.listen&&e.listen[i].forEach(function(e){e(n)}),t=i)}}var t=null;return addEventListener("popstate",function(){e(location.hash.slice(1))}),e.listen={},e.on=function(t,i){t in e.listen||(e.listen[t]=[]),"function"==typeof i&&e.listen[t].push(i)},e}();$(window).ready(function(){var e=location.hash.slice(1);t?e="letter":("letter"===e||""===e)&&(e="cover"),i(e)});var n=window.section={};n.cover=function(){var e={wrap:$(".section-cover")},t=new Swiper(".swiper-container",{mode:"vertical",speed:500}),i=setTimeout(function(){t.swipeTo(1)},5e3);e.wrap.on("touchstart",function(){clearTimeout(i)})}(),n.audio=function(){function e(){i(),$(document.body).unbind("touchstart",e)}function t(){n.btn.hasClass("active")&&(n.btn.removeClass("active"),o.pause())}function i(){n.btn.hasClass("active")||(n.btn.addClass("active"),o.play())}var n={btn:$("#audio-player"),audio:$("#audio-player audio")},o=n.audio[0];o&&n.btn.on("click",function(){n.btn.hasClass("active")?t():i()}),$(document.body).on("touchstart",e)}(),n.intro=function(){var e={ruleBtn:$("#intro-rule-btn"),rulePopup:$("#intro-rule-popup"),ruleClose:$("#intro-rule-close")},t=new $GH.Viewer(e.rulePopup);e.ruleBtn.on("click",function(){t.show()}),e.ruleClose.on("click",function(){t.hide()})}(),n.write=function(){var e={content:$("#write-content"),illus:$("#write-illus"),mini:$("#write-illus-mini"),generate:$("#write-generate")},t=[$GC.staticServer+"/h5/img/topic/midautumn/write/illus-1.jpg",$GC.staticServer+"/h5/img/topic/midautumn/write/illus-2.jpg",$GC.staticServer+"/h5/img/topic/midautumn/write/illus-3.jpg",$GC.staticServer+"/h5/img/topic/midautumn/write/illus-4.jpg",$GC.staticServer+"/h5/img/topic/midautumn/write/illus-5.jpg"],i=["佛说，修500年同舟渡，修1000年共枕眠；\n而我们只修了750年，注定了异地苦恋！\n今夜的这轮月，心底疯长的思念；\n究竟何时再相见？","离家多年，中秋从未回家陪伴；\n你们说工作要紧，有空再回。\n可我，还是听到了电话那头的轻声长叹：\n“老头子啊，你孩子又不回来了……”","亲爱的悟空，\n这礼拜下了两次雨，\n第一次下了3天，第二次下了1234天。\n一下雨我就想到你，我想我得了相思病。\n百病缠身，等你来解！","那年中秋夜，你轻摇蒲扇哄我入眠；\n而今中秋夜，却是天上人间，只能遥寄思念。\n我对着明月向你道一声晚安；\n你可，是否听见？","原创的，才是最好的！开启烧脑洞的自定义模式，自己玩！"],n={content:"",tempId:0},o=!1,a=80;return e.mini.on("click","p",function(){var o=$(this);o.hasClass("active")||(n.tempId=o.index(),e.mini.find("> .active").removeClass("active"),e.illus.attr("src",t[n.tempId]),e.content.val(i[n.tempId]||""),o.addClass("active"))}),e.generate.on("click",function(){return""===e.content.val().trim()?($GH.alert("请填写内容"),!1):o?!1:(o=!0,n.content=e.content[0].value.replace(/\n/g,"<br>"),void $GH.request({url:e.generate.data("action"),type:"post",data:{content:n.content,tempId:n.tempId},fulfilled:function(){location.href="#letter"},rejected:function(e,t){t&&e&&9==e.code&&setTimeout(function(){location.href="/user/login?target="+encodeURIComponent(location.pathname+location.search+location.hash).replace("/","")},2e3)},always:function(){o=!1}}))}),e.content.on("input",function(){var e=this.value;e.length>a&&(e=e.slice(0,a),this.value=e)}),e.mini.find("> p").eq(0).trigger("click"),{illus:t,state:n}}(),n.letter=function(){function e(){a.hide(),$GH.request({url:t.mobileSubmit.data("select"),fulfilled:function(e){1==e.code&&r.show()}})}var t={content:$("#letter-content"),illus:$("#letter-illus"),ruleBtn:$("#letter-rule-btn"),rulePopup:$("#letter-rule-popup"),ruleClose:$("#letter-rule-close"),mobilePopup:$("#letter-mobile-popup"),mobileClose:$("#letter-mobile-close"),mobileInput:$("#letter-mobile-input"),mobileSubmit:$("#letter-mobile-submit"),sharePopup:$("#letter-share-popup")},o=new $GH.Viewer(t.rulePopup),a=new $GH.Viewer(t.sharePopup),r=new $GH.Viewer(t.mobilePopup);return t.ruleBtn.on("click",function(){o.show()}),t.ruleClose.on("click",function(){o.hide()}),t.sharePopup.on("click",function(){a.hide()}),t.mobileClose.on("click",function(){$GH.confirm("关闭该窗口，您将失去赢话费的机会，是否放弃？",[{name:"确定",style:"btn",fn:function(e){r.hide(),e()}},{name:"取消",style:"btn",fn:function(e){e()}}])}),t.mobileSubmit.on("click",function(){var e=t.mobileInput[0].value.trim();/^\d{11}$/.test(e)?$GH.request({url:t.mobileSubmit.data("action"),data:{mobile:e},fulfilled:function(){$GH.alert("提交成功",null,function(){r.hide()})}}):$GH.alert("亲~ 您输入的手机号好像不对哦")}),i.on("letter",function(){t.ruleBtn.length>0&&$GH.request({url:t.mobileSubmit.data("select"),fulfilled:function(e){1==e.code&&a.show()}}),$GH.request({url:t.content.data("get"),fulfilled:function(e){t.content.html(e&&e.data&&e.data.content||""),t.illus.attr("src",n.write.illus[e&&e.data&&e.data.templateId||0])}})}),{showMobile:e}}()}),$GH.module("#J_Focus_Msg",function(e,t){var i={getList:$GC.guahaoServer+"/json/black/dpmessage/list",updateStatus:$GC.guahaoServer+"/json/black/dp/update"};t.pageNo=1,t.loading=!0,t.pageCount=1,t.itemList=[],t.$scan(),$GH.loading.show(),t.page=function(){$.get(i.getList,{pageNo:t.pageNo},function(e){return e.hasError?void $GH.alert(e.message):(t.itemList=t.itemList.concat(e.data.list),t.loading=!1,$GH.loading.hide(),t.pageCount=e.data.pageCount,void t.$scan())},"json")},t.clean=function(){$GH.confirm("是否清空所有消息",[{name:"取消",style:"btn",fn:function(e){e()}},{name:"确定",style:"btn",fn:function(e){t.itemList=[],t.$scan(),e()}}])},t.update=function(e,i,n){$.get($GC.guahaoServer+"/json/black/dp/update",{expertId:e.expertId,patientId:e.patientId,applyId:e.id,applyStatus:i},function(e){return e.hasError?void $GH.alert(e.message):(t.itemList[n].applyStatus=i,void t.$scan())})},$(window).on("scroll",function(){t.loading||document.body.scrollHeight==document.body.scrollTop+window.screen.availHeight&&t.pageCount>t.pageNo&&(t.loading=!0,t.pageNo++,t.$scan(),t.page())}),t.page()}),$GH.module("#J_Focus",function(e,t){var i,n={doctorUrl:$GC.guahaoServer+"/json/black/follow/expertlist",hospitalUrl:$GC.guahaoServer+"/json/black/favorite/hospitallist"};$GH.loading.show(),t.pageNo=1,t.loading=!0,t.pageCount=1,t.itemList=[],t.recommendHospitalList=[],t.page=function(e,n){$.get(e,{pageNo:t.pageNo},function(o){if(o.hasError)return void $GH.alert(o.message);t.loading=!1,$GH.loading.hide(),t.pageCount=o.map.pageCount?o.map.pageCount:o.map.totalPage,o.map.followExpertList&&(t.itemList=t.itemList.concat(o.map.followExpertList)),o.map.favoriteHospitalList&&(t.itemList=t.itemList.concat(o.map.favoriteHospitalList));for(var a,r=0;a=t.itemList[r];r++)"1"==a.doctorType?a.photo=$GC.staticServer+"/img/character/doc-special-l.png":"2"==a.doctorType&&(a.photo=$GC.staticServer+"/img/character/doc-common-l.png");o.map.recommendHospitalList&&(t.recommendHospitalList=t.recommendHospitalList.concat(o.map.recommendHospitalList)),t.$scan(),t.itemList.length>0&&(n&&n(),i.on("scroll",function(){t.pageCount>t.pageNo&&this.maxScrollY>=this.y&&!t.loading&&(t.loading=!0,t.pageNo++,t.$scan(),t.page(t.url,function(){i.refresh()}))})),t.pageCount>t.pageNo&&i.scrollerHeight==i.wrapperHeight&&(t.loading=!0,t.pageNo++,t.$scan(),t.page(e,function(){i.refresh()}))},"json")},-1!==location.href.indexOf("expertlist")&&(t.url=n.doctorUrl,t.page(n.doctorUrl,function(){i=$GH.iScroll(".g-doctor-list",{top:45+$(".msg-link").height()},{probeType:2})}),t.expert=function(e){location.href=$GC.guahaoServer+"/expert/"+e}),-1!==location.href.indexOf("hospitallist")&&(t.url=n.hospitalUrl,t.page(n.hospitalUrl,function(){i=$GH.iScroll(".g-hospital-list",{top:45},{probeType:2})}),t.hospital=function(e){location.href=$GC.guahaoServer+"/hospital/"+e})}),$GH.module("#J_Account_Info",function(){$GH.ImageUploader($(".avatar"),{inputName:"imagePath",uploaderUrl:$GC.guahaoServer+"/json/black/image/upload?type=3",uploadBtn:".upload-btn",fileInput:".file-input",beforeComplete:function(){$GH.alert("头像上传中请稍候..")},afterUpload:function(e){return e.hasError?void $GH.alert(e.message):($(".avatar").find("img")[0].src=e.map.imageServerPath+"/"+e.map.path+"?_="+(new Date).getTime(),void $.post($GC.guahaoServer+"/json/black/headpicupload",{imgUrl:e.map.sourcePath},function(e){e.hasError||$GH.alert("头像上传成功！")},"json"))}})}),$GH.module("#J_BackclinicDetail",function(e,t){var i=$GH.getQuery(location.search),n=i.mid,o=i.sid,a=e.data("did"),r=$GH.iScroll(".wrapper",{},{probeType:2});t.loading=!0,t.pageCount=0,t.pageNo=1,t.chatList=[],$GH.loading.show(),$("body").css({backgroundColor:"#fff"}),t.genDate=function(e){return $GH.genDate(e)},t.scanAudioDuration=function(){$("audio").each(function(e,t){t.addEventListener("canplaythrough",function(){var e=t.duration.toFixed(0);parseInt(e,10)&&$(t).next(".duration").text(e+"秒")},!1)})},t.playAudio=function(e){var t=$(e.target);"DIV"!==t[0].tagName&&(t=$(t.parent("div")));var i=t.find("audio"),n=t.find(".play").length;n?(i[0].pause(),t.find(".icon").removeClass("play")):(i[0].play(),t.find(".icon").addClass("play"),i[0].addEventListener("ended",function(){t.find(".icon").removeClass("play"),this.load()},!1))},alight.filters.beauty=function(){var e=new Date;return function(i){var n=new Date(i.split(" "));return n.getFullYear()==e.getFullYear()?t.genDate(n):i}},t.page=function(){$.get($GC.guahaoServer+"/json/black/dconsult/detail",{pageNo:t.pageNo,sid:o,mid:n},function(e){return e.hasError?void $GH.alert(e.message):(t.chatList=e.map.localPageModel.list.concat(t.chatList),t.age=e.map.age,t.sex=e.map.sex,t.loading=!1,$GH.loading.hide(),t.pageCount=e.map.localPageModel.pageCount,t.$scan(),t.refresh(),void t.scanAudioDuration())})},r.on("scroll",function(){t.pageNo<t.pageCount&&this.y>30&&!t.loading&&(t.loading=!0,t.pageNo++,t.$scan(),t.page())}),t.refresh=function(i){var n=e.find(".J_Input_Ctrl"),o=e.find(".wrapper"),a=o.find(".scroll");n.find(".text-input").css({width:document.body.scrollWidth-170+"px"}),n.find(".send-btn").attr("disabled","disabled"),r.refresh(),t.pageNo>1&&!i||r.scrollTo(0,o.height()-a.height(),500)},$GH.ImageUploader($(".J_Input_Ctrl"),{uploadBtn:".upload-btn",fileInput:".file-input",uploaderUrl:$GC.guahaoServer+"/json/black/image/upload?type=2",afterUpload:function(e){s(e.map)}}),t.imageShow=function(e){$GH.ImageUploader($(e.target).parent(),{onlySlider:e.target})};var s=function(i,n){var o=e.find(".text-input");$.post($GC.guahaoServer+"/json/black/dconsult/todoctor",{content:n||"",imagePath:i?i.sourcePath:"",doctorUserId:a,patientId:t.chatList[0].patientId,contentType:i?1:0},function(e){return e.hasError?void $GH.alert(e.message):(t.chatList=t.chatList.concat([{date:t.genDate(new Date),text:n||"",image:i?i.imageServerPath+"/"+i.path:"",userType:0}]),t.textMsg="",t.$scan(),t.refresh(!0),void o.focus())},"json")};t.inputText=function(i){var n=e.find(".send-btn");setTimeout(function(){t.textMsg&&""!==t.textMsg?(n.removeAttr("disabled"),13===i.keyCode&&s(null,t.textMsg)):n.attr("disabled","disabled")},10)},t.send=function(e){s(null,e)},t.page()}),$GH.module("#J_Backclinic",function(e,t){var i=$GH.iScroll(".wrapper",{},{probeType:2});t.loading=!0,t.pageCount=0,t.itemList=[],t.pageNo=1,t.page=function(){$.get($GC.guahaoServer+"/json/black/dconsult/list",{pageNo:t.pageNo},function(e){return e.hasError?void $GH.alert(e.message):void(e.map.localPageModel&&(t.pageCount=e.map.localPageModel.pageCount,t.itemList=t.itemList.concat(e.map.localPageModel.list),t.loading=!1,t.$scan(),i.refresh()))},"json")},i.on("scroll",function(){t.pageCount>t.pageNo&&this.maxScrollY>this.y&&!t.loading&&(t.loading=!0,t.pageNo++,t.$scan(),t.page())}),t.page()}),$GH.module("#J_PatientList",function(e,t){t.loading=!0,t.itemList=[],t.message="",t.tips="",$GH.loading.show(),$.ajax({type:"get",dataType:"json",cache:!1,url:"/json/black/my/patients",success:function(e){return e.hasError?void(t.message=e.message):void(e.data&&(t.itemList=t.itemList.concat(e.data),t.tips="已添加"+e.data.length+"位联系人，",t.tips+=6==e.data.length?"无法继续添加":"还能添加"+(6-e.data.length)+"位联系人"))},error:function(e,i){return"abort"===i?void(t.message="请求过于频繁，请求已中止"):void(t.message="系统服务异常，请稍后重试！")},complete:function(){$GH.loading.hide(),t.loading=!1,t.$scan()}})}),$GH.module("#J_PatientPage",function(e){$(".certType").eq(0).click(function(){$(".id_card").show(),$(".passport").hide(),$(".J_addhuzhao").val("")}),$(".certType").eq(1).click(function(){$(".passport").show(),$(".id_card").hide(),$(".J_addIdCard").val("")}),$(".sex").eq(1).css("opacity","0.5"),$(".sex").eq(0).click(function(){$(this).css("opacity","1"),$(".sex").eq(1).css("opacity","0.5"),$(".sex_choose").val("1")}),$(".sex").eq(1).click(function(){$(this).css("opacity","1"),$(".sex").eq(0).css("opacity","0.5"),$(".sex_choose").val("2")}),$(".J_IsDefault").on("change",function(){var e=$("#IsDefault").val();$("#IsDefault").val("false"==e?"true":"false")}),$(".J_addIdCard").change(function(){var e=$(".J_addIdCard").val(),t=/(^\d{15}$)|(^\d{18}$)|(^\d{17}(\d|X|x)$)/;if(t.test(e)===!1)return!1;parseInt(e.substr(16,1))%2==1?$(".sex").eq(0).click():$(".sex").eq(1).click();var i=new Date,n=i.getMonth()+1,o=i.getDate(),a=i.getFullYear()-e.substring(6,10)-1;(e.substring(10,12)<n||e.substring(10,12)==n&&e.substring(12,14)<=o)&&a++,$("#patient_birthday").val(a)}),e.find(".J_Submit").on("click",function(){if("4"==$("input[name='certType']:checked").val()&&0==$(".J_addhuzhao").val().length)return void $GH.alert("护照不能为空！");var e=$(this),t=e.closest("form"),i=$GH.validate({"#patient_name":{required:"姓名不能为空"},"#patient_cert_no":{required:"身份信息不能为空"},"#patient_sex":{required:"性别不能为空"},"#patient_birthday":{required:"年龄不能为空",check:function(e){return 0==/^([1-9]\d|\d)$/.test(e)?"年龄只能输入数字0~99":!0}},"#patient_mobile":{required:"手机号不能为空",mobile:"手机号格式不正确"},"#old_password":{required:"旧密码不能为空",password:"旧密码格式不正确"},"#new_password":{required:"新密码不能为空",password:"新密码格式不正确"}});return i&&$GH.formSubmit(t),!1}),e.find(".J_Del").on("click",function(){var e=$(this),t=e.closest("form");$GH.confirm("确定删除该就诊人吗？",[{name:"是",style:"btn",fn:function(e){e(),$GH.formSubmit(t)}},{name:"否",style:"btn",fn:function(e){e()}}])}),e.find(".J_AddDelDefault").on("click",function(){var e=$(this);form=e.closest("form"),e.hasClass("g-arrow-f")?(e.removeClass("g-arrow-f"),e.addClass("g-arrow-s"),form.find("#IsDefault").val(!0)):(e.removeClass("g-arrow-s"),e.addClass("g-arrow-f"),form.find("#IsDefault").val(!1))}),e.find(".J_setDefault").on("click",function(){var e=$(this);$.post($GC.guahaoServer+"/json/black/my/updateisdefault/"+e.data("patientid"),function(t){if("500"==t.code)$GH.alert(t.message);else{if(t.hasError)return void $GH.alert(t.message);$GH.alert(t.message),e.off("click"),e.css({cursor:"default"}),e.removeClass("g-arrow-f J_setDefault").addClass("g-arrow-s")}},"json")})}),$GH.module("#J_AccountAuth",function(e){$(".certType").eq(0).click(function(){$(".J_rz_hz").removeClass("black"),$(".J_rz_sfz").addClass("black"),$(".J_idcard").show(),$(".J_huzhao").hide()}),$(".certType").eq(1).click(function(){$(".J_rz_sfz").removeClass("black"),$(".J_rz_hz").addClass("black"),$(".J_huzhao").show(),$(".J_idcard").hide()}),e.find(".J_Submit").on("click",function(){var e,t=$("input[name='certType']:checked").val();if(1==t)$(".certNo").val($(".J_sfz").val()),e="身份证";else if($(".certNo").val($(".J_hz").val()),e="护照",!$(".J_age").val()>0)return void $GH.alert("请将信息填写完整！");var i=$(this),n=i.closest("form"),o=$GH.validate({"#patient_name":{required:"姓名不能为空"},"#patient_cert_no":{required:e+"不能为空！"}});return o&&$GH.formSubmit(n),!1}),e.find(".J_Del").on("click",function(){var e=$(this),t=e.closest("form");
$GH.confirm("确定删除该就诊人吗？",[{name:"是",style:"btn",fn:function(e){e(),$GH.formSubmit(t)}},{name:"否",style:"btn",fn:function(e){e()}}])}),e.find(".J_AddDelDefault").on("click",function(){var e=$(this);form=e.closest("form"),e.hasClass("g-arrow-f")?(e.removeClass("g-arrow-f"),e.addClass("g-arrow-s"),form.find("#IsDefault").val(!0)):(e.removeClass("g-arrow-s"),e.addClass("g-arrow-f"),form.find("#IsDefault").val(!1))}),e.find(".J_setDefault").on("click",function(){var e=$(this);$.post($GC.guahaoServer+"/json/black/my/updateisdefault/"+e.data("patientid"),function(t){if("500"==t.code)$GH.alert(t.message);else{if(t.hasError)return void $GH.alert(t.message);$GH.alert(t.message),e.off("click"),e.css({cursor:"default"}),e.removeClass("g-arrow-f J_setDefault").addClass("g-arrow-s")}},"json")})}),$GH.module("#J_MobileUpdatePage",function(e){e.find(".J_MobileUpdate").on("click",function(){var t=$.trim($("#mobile").val()),i=$GH.validate({"#mobile":{required:"手机号不能为空",mobile:"手机号格式不正确"}});return i&&$GH.mobileCode.updateProfile(t,function(){e.find("#J_Step1").hide(),e.find("#J_Step2").show(),e.find(".J_mobileTxt").text($GH.maskStr(t,3,7))}),!1}),e.find(".J_MobileSubmit").on("click",function(){var e=$(this),t=e.closest("form"),i=$GH.validate({"#code":{required:"验证码不能为空"}});return i&&$GH.formSubmit(t),!1});var t=function(){$(".J_CountDownTip").show(),$(".J_CountDown").countdown(function(){$(".J_CountDownTip").hide(),$(".J_Resend").show()},60,"time")};t(),e.find(".J_Resend").on("click",function(){$GH.mobileCode.updateProfile($("#mobile").val(),function(){$(".J_Resend").hide(),t()})})}),$GH.module("#J_FeedbackPage",function(e){$(".J_ImgCaptcha").on("click",function(){return $GH.refreshCaptcha($(this).find("img")),!1}),e.find(".J_Submit").on("click",function(){var e=$(this),t=e.closest("form"),i=$GH.validate({"#frommail":{required:"邮箱地址不能为空",email:"邮箱地址格式不正确"},"#frommobile":{required:"手机号码不能为空",mobile:"手机号格式不正确"},"#content":{required:"意见内容不能为空"},"#validCode":{required:"验证码不能为空"}});return i&&$GH.formSubmit(t,{error:function(e){$GH.alert(e.message),$GH.refreshCaptcha($(".J_ImgCaptcha").find("img"))}}),!1})}),function(){function e(e){new $GH.ActionSheet("就医经验",[{name:"是，我已就诊",styleClass:"option",fn:function(){var t=$GC.guahaoServer+"/commentexpert/orderconfirm/"+e.attr("data-id");$GPC.isWxCityBox?wxbridge.jump({link:t}):location.href=t,this.close()}},{name:"否，还未就诊",styleClass:"option",fn:function(){var t=$GC.guahaoServer+"/commentexpert/ordernotreated/"+e.attr("data-id");$GPC.isWxCityBox?wxbridge.jump({link:t}):location.href=t,this.close()}},{name:"取消",styleClass:"cancel",fn:function(){this.close()}}]).open()}$GH.module("#J_OrderinfoPage",function(t){t.find(".J_OrderCancel").on("click",function(){var e=$(this);return $.ajax({dataType:"json",cache:!1,url:"/json/white/check/deptspecial/"+e.attr("data-did")+"/"+e.attr("data-pay"),success:function(t){void 0===t.hasError||t.hasError?$GH.alert("系统异常，请稍后重试！"):t.map&&"Y"==t.map.showSpecialInfo?$GH.alert("此为分时号源 ，需到医院现场取消"):$GH.confirm("确定取消订单吗？",[{name:"是",style:"btn",fn:function(t){$.ajax({dataType:"json",cache:!1,url:"/json/black/ordercancel/"+e.attr("data-id")+"/"+e.attr("data-pay"),success:function(e){t(),void 0===e.hasError||e.hasError?e.message&&""!=e.message&&$GH.alert(e.message):window.location.reload(!0)},error:function(e,t){return"abort"===t?void $GH.alert("请求过于频繁，请求已中止"):void $GH.alert("系统异常，请稍后重试！")}})}},{name:"否",style:"btn",fn:function(e){e()}}])},error:function(e,t){return"abort"===t?void $GH.alert("请求过于频繁，请求已中止"):void $GH.alert("系统异常，请稍后重试！")}}),!1}),t.find(".J_Resend").on("click",function(e){var t=$(this);return $GH.mobileMsg.orderResend(t.attr("data-id"),function(){$("<span class='g-gray'>已补发短信</span>").insertBefore(t),t.remove()}),e.stopPropagation(),!1}),t.find(".J_Share").on("click",function(t){return e($(this)),t.stopPropagation(),!1})}),$GH.module("#J_OfflinePage",function(e){e.find(".J_OfflineOrderCancel").on("click",function(){var e=$(this);$GH.confirm("确定取消订单吗？",[{name:"是",style:"btn",fn:function(t){$.ajax({dataType:"json",cache:!1,url:"/json/white/offlinelist/cancelofflineorder/"+e.attr("data-id"),success:function(e){t(),void 0===e.hasError||e.hasError?e.message&&""!=e.message&&$GH.alert(e.message):window.location.reload(!0)},error:function(e,t){return"abort"===t?void $GH.alert("请求过于频繁，请求已中止"):void $GH.alert("系统异常，请稍后重试！")}})}},{name:"否",style:"btn",fn:function(e){e()}}])})}),$GH.module("#J_OrdersPage",function(){$(".J_OrderList").on("click","li",function(t){var i=$(t.target);if(i.hasClass("J_Share"))e(i);else if(i.hasClass("J_Resend")){var n=i;$GH.mobileMsg.orderResend(n.attr("data-id"),function(){$("<label>已补发短信</label>").insertBefore(n),n.remove()})}else location.href=$(this).data("page");return!1});var t=$("#J_OrderTmpl").html();$Common.pullUpScroll.init({initScrollCfg:{top:0},scrollSelector:".J_OrdersScroller",pageSize:6,listSelector:".J_OrderList",loadingData:function(e,t){var i=this,n=$(".J_OrderList");$.ajax({type:"get",dataType:"json",cache:!1,data:{pageNo:e},url:n.data("action"),success:function(e){$(".J_NeedPay,.J_NotTreatment,.J_NotConfirm").find("span").remove(),e.map.needPay&&"0"!=e.map.needPay&&$("<span/>",{text:e.map.needPay}).appendTo($(".J_NeedPay")),e.map.notTreatment&&"0"!=e.map.notTreatment&&$("<span/>",{text:e.map.notTreatment}).appendTo($(".J_NotTreatment")),e.map.notConfirm&&"0"!=e.map.notConfirm&&$("<span/>",{text:e.map.notConfirm}).appendTo($(".J_NotConfirm")),e.map.totalCount?(i.totalCount=e.map.totalCount,t&&t(e.map.orderList)):($(".J_Empty").show(),$GH.loading.hide())},error:function(e,t){return"abort"===t?void $GH.alert("请求过于频繁，请求已中止"):void $GH.alert("操作失败，请稍后再试！")}})},buildHtml:function(e){return $GH.alTmpl(t,e)}})}),$GH.module("#J_BookOrderPage",function(e){var t={init:function(){function t(e){$.ajax({url:"/json/black/res/firsthosp/"+e+"/"+l,cache:!1,success:function(t){if(!t.hasError){var i=t.data.visitType?t.data.visitType:0;s[e].init=!0,s[e].jzk=t.data.carValue?t.data.carValue:"",s[e].visitType=i,$("select#J_VisitType").val(i).trigger("change")}}})}function i(e){var t=(new Date).getTime();return t-e>=3e5?void $GH.alert("短信验证超时，请点击'重发短信'进行验证."):(r=$("#J_Step2").find("#hdecodeIpt").val(),void $.ajax({dataType:"json",cache:!1,url:"/json/white/uplink/check/"+$("#J_PatientSel").val()+"/"+$("#shiftCaseIdIpt").val()+"/"+r,success:function(t){t.hasError?(3==t.code&&$GH.alert(t.message),2==t.code&&setTimeout(function(){i(e)},500)):(t.data&&t.data.hdecode3&&(r+=md5(t.data.hdecode3)),a.find("input[name=hdecode]").val(r),setTimeout(function(){a.submit()},100))},error:function(){$GH.alert("系统异常，请稍后重试")}}))}function n(e,t,n){t.hasClass("off")||$.ajax({dataType:"json",cache:!1,url:e,success:function(e){e.hasError?($GH.alert(e.message),n&&n()):($GH.alert("短信发送成功！"),startTime=(new Date).getTime(),i(startTime),n&&n())},error:function(){$GH.alert("下行短信接口不通畅！请点击重发短信"),n&&n()}})}var o=this,a=e.find("form"),r="";e.find(".J_ShowRules").on("click",function(){return $(".J_RuleList").toggle(),$(this).toggleClass("g-arrow-d").toggleClass("g-arrow-u"),!1}),$("#J_SelectDis").on("click",function(){return $GH.SS.init($(this),{showTreatment:!0}),!1}),e.find(".J_PatientsDropDown").dropdownSheet($("#J_PatientSel option").length<6?{name:"添加就诊人",fn:function(){return this.close(),location.href=$GC.guahaoServer+"/my/patient/add?backUrl="+location.href,!1}}:null);var s=function(){var e={};return $("#J_PatientSel").find("option").each(function(){var t=$(this),i=t.attr("data-values").split("|");e[t.val()]={init:t.is(":selected")?!0:!1,mobile:i[0],ybk:i[1],jzk:i[2],visitType:i[3]}}),e}(),l=$("#hospitalIdIpt").val();e.find(".J_AdjustWidth").each(function(){var e=$(this);e.find(".input-box").css("margin-left",e.find(".nowidth").width()+5+"px")}),$("select#J_VisitType").on("change",function(){var e=$(this).val();return $(".J_CardInfo").hide(),$(".J_CardInfo_"+e).show().find(".J_CardTypeSel").val(1).trigger("change"),!1}).trigger("change"),$("#J_PatientSel").on("change",function(){var e=$(this);return s[e.val()].init?$("select#J_VisitType").val(s[e.val()].visitType).trigger("change"):t(e.val()),!1}).trigger("change"),$(".J_CardTypeSel").on("change",function(){var e=$("#J_PatientSel").val(),t=$(this),i=$(".J_CardInfo_"+$("#J_VisitType").val()).find(".J_CardNo");1==t.val()?i.val(s[e].ybk):"text"==i.attr("type")&&i.val(s[e].jzk)}),$("#J_Submit1").on("click",function(){if(0==$(".patient_type").val()&&4==$("#J_PatientSel").find("option:selected").attr("data-values").split("|")[4])return $GH.alert("本院不支持护照！"),!1;var e=$("#J_VisitType").val(),t={"#agentNameIpt":{required:"陪同人姓名不能为空",chinese:"姓名必须为中文"},"#agentCardNOIpt":{required:"陪同人身份证不能为空"},"#agentTelNumberIpt":{required:"手机号不能为空",mobile:"手机号格式不正确"},"#disease":{required:"疾病不能为空"}},n=".J_ExtraField_"+e;if($(n).each(function(){var e=$(this),i=e.attr("data-label"),o=e.attr("data-tip")?i+"："+e.attr("data-tip"):i+"格式错误",a=e.attr("data-index");t[n+"_"+a]={},e.attr("data-required")&&(t[n+"_"+a].required=i+"不能为空"),e.attr("data-pattern")&&(t[n+"_"+a].regex=function(t){return t&&!new RegExp(e.attr("data-pattern")).test(t)?o:!0})}),!$GH.validate(t))return!1;var a=$(this).closest("form"),r="encodePatientId="+$("#J_PatientSel").val();return $.each(["#J_VisitType","#expertIdIpt","#shiftCaseIdIpt","#signdataIpt","#hospitalIdIpt"],function(){var e=$(this);r+="&"+e.attr("name")+"="+e.val()}),$(".J_CardInfo_"+e).find("input,select").each(function(){var e=$(this);""!=e.attr("name")&&(r+="&"+e.attr("name")+"="+encodeURIComponent(e.val()))}),"Y"===$("#J_ZjptCaptcha").val()?o.zjptCheck(a):$.ajax({dataType:"json",cache:!1,url:"/json/black/res/jumpto?"+r,success:function(e){if(!e.hasError&&e.data){if(e.data.mobile=s[$("#J_PatientSel").val()].mobile,e.data.hdecode=md5(e.data.hdecode||""),$("#J_Step2").empty().append($GH.alTmpl($("#J_Step2Tmpl").html(),e.data)).show(),$("#J_Step2").find(".J_CountDown").countdown(function(){var e=this.parent().empty();e.text("获取验证码").removeClass("off")},60,"time"),1==e.data.focusExpert&&1==e.data.focusExpertVerify){var t=(new Date).getTime();i(t)}$("#J_Step1").hide()}else $GH.alert(e.message||"出错了！"),e.data&&"Y"==e.data.over_max&&(location.href=$GC.guahaoServer+"/my/reservation/failed?m="+encodeURIComponent("该手机号当天接收挂号网下发的短信量已达上限，请次日尝试预约"))},error:function(e,t){return"abort"===t?void $GH.alert("请求过于频繁，请求已中止"):void $GH.alert("系统异常，请稍后重试！")}}),!1}),$("#J_Step2").on("click",".J_SendXx",function(){var e=$(this);return e.hasClass("off")||$GH.mobileCode.book($("#J_PatientSel").val(),$("#shiftCaseIdIpt").val(),$("#J_Step2").find("#hdecodeIpt").val(),function(){e.empty().append('<em class="time J_CountDown">60</em>秒后重新发送').addClass("off"),e.find(".J_CountDown").countdown(function(){var e=this.parent().empty();e.text("获取验证码").removeClass("off")},60,"time")}),!1}),$("#J_Step2").on("click",".J_SendVoice",function(){var e=$(this);return e.hasClass("off")||$GH.mobileCode.book($("#J_PatientSel").val(),$("#shiftCaseIdIpt").val(),$("#J_Step2").find("#hdecodeIpt").val(),function(){e.empty().append('<em class="time J_CountDown">60</em>秒后重新发送').addClass("off"),e.find(".J_CountDown").countdown(function(){var e=this.parent().empty();e.text("获取验证码").removeClass("off")},60,"time")},"voice"),!1}),$("#J_Step2").on("click",".J_SendSx",function(){var e=$(this),t="/json/black/res/mobile/"+$("#J_PatientSel").val()+"/REG_MOBILE_UP/"+$("#shiftCaseIdIpt").val()+"/"+$("#J_Step2").find("#hdecodeIpt").val();return n(t,e,function(){e.empty().append('<em class="time J_CountDown">60</em>秒后重新发送').addClass("off"),e.find(".J_CountDown").countdown(function(){var e=this.parent().empty();e.text("重发短信").removeClass("off")},60,"time")}),!1}),$("#J_Step2").on("click",".J_PaySel a",function(){var e=$(this),t=e.closest(".J_PaySel").find("input");return e.hasClass("on")||(e.closest(".J_PaySel").find("a").removeClass("on"),e.addClass("on"),t.val(e.attr("data-val"))),!1});var c=!1;$("#J_Step2").on("click","#J_Submit2",function(){if(c)return!1;c=!0;var e=$(this),t=$(this).closest("form"),i=$("#J_Step2").find("#hdecodeIpt"),n=$GH.validate({"#codeIpt":{required:"手机验证码不能为空"}});if(n){var o="encodePatientId="+$("#J_PatientSel").val()+"&hdecode="+i.val();$.each(["#codeIpt","#expertIdIpt","#shiftCaseIdIpt"],function(){var e=$(this);e.length&&(o+="&"+e.attr("name")+"="+encodeURIComponent(e.val()))});var a="/json/black/res/checkcode?"+o;"voice"==e.data("type")&&(a="/json/black/res/voicecheckcode?"+o),$.ajax({dataType:"json",cache:!1,url:a,success:function(e){e.hasError?($GH.alert(e.message||"出错了！"),$GH.refreshCaptcha($("#J_Step2").find(".J_ImgCode")),e.map&&e.map.errlimit&&(location.href=$GC.guahaoServer+"/my/reservation/failed?m="+encodeURIComponent("验证码输入错误次数过多，请重新预约!")),c=!1):(e.map&&e.map.hdecode2&&i.val(i.val()+md5(e.map.hdecode2)),t.submit())},error:function(e,t){return"abort"===t?void $GH.alert("请求过于频繁，请求已中止"):($GH.alert("系统异常，请稍后重试！"),$GH.refreshCaptcha($("#J_Step2").find(".J_ImgCode")),void(c=!1))}})}else c=!1;return!1}),e.find(".J_Resend").on("click",function(e){var t=$(this);return $GH.mobileMsg.orderResend(t.attr("data-id"),function(){$("<span class='g-gray'>已补发短信</span>").insertBefore(t),t.remove()}),e.stopPropagation(),!1})},zjptCheck:function(e){$("input[name=csrf_token]").prop("disabled",!0),$.ajax({type:"get",dataType:"json",cache:!1,url:"/my/reservation/hospside/vcimg",data:e.serialize(),success:function(t){t&&!t.hasError?($("#J_HideCodeIpt").val(md5(t.data.hdecode)),$("#J_StepZjpt").find("img").attr("src",t.data.imgValidCodeUrl),$("#J_StepZjpt").on("click","#J_SubmitZjpt",function(){var t=$GH.validate({"#J_ImageCaptcha":{required:"图片验证码不能为空"}});return t&&($("input[name=csrf_token]").prop("disabled",!1),e.submit()),!1}),$("#J_StepZjpt").show(),$("#J_Step1").hide()):$GH.alert(t.message||"验证码获取失败！请稍后再试！")},error:function(){$GH.alert("操作失败，请稍后再试！")}})}};t.init()})}(),$GH.module("#J_ZixunHome",function(e,t){new Swiper("#J_Swiper",{pagination:".pagination",visibilityFullFit:!0,calculateHeight:!0,autoplay:5e3,autoplayDisableOnInteraction:!1,loop:!0}),$(".expert-list .wrapper").css({width:71*$(".expert").length+15+"px"}),t.go=function(e){location.href=e}}),$GH.module("#J_QK_List",function(e,t){var i=$GH.iScroll(".wrapper",{bottom:0},{probeType:2});t.loading=!0,t.pageCount=0,t.itemList=[],t.pageNo=1,$GH.loading.show(),t.page=function(){$.get($GC.guahaoServer+"/json/black/consultorder/list",{pageNo:t.pageNo},function(e){if(e.hasError)return $GH.alert(e.message),void t.$scan();if(!e.map.localPageModel)return void t.$scan();var n=e.map.localPageModel.totalCount;if(0===n)return t.loading=!1,$GH.loading.hide(),t.$scan(),void $(".wrapper").hide();t.pageCount=e.map.localPageModel.pageCount;for(var o=e.map.localPageModel.list,a=o.length-1;a>=0;a--)o[a].content=$GH.smartStr(o[a].content||"",35);t.itemList=t.itemList.concat(o),t.loading=!1,$GH.loading.hide(),t.$scan(),i.refresh(),t.pageCount>t.pageNo&&i.scrollerHeight===i.wrapperHeight&&(t.loading=!0,t.pageNo++,t.$scan(),t.page())},"json")},i.on("scroll",function(){t.pageCount>t.pageNo&&this.maxScrollY>this.y&&!t.loading&&(t.loading=!0,t.pageNo++,t.$scan(),t.page())}),t.page()}),$GH.module("#J_QK_detail",function(e,t){$("body").bind("touchstart",function(){}),t.myself=!!e.data("myself"),t.asknum=e.data("asknum");var i=$GH.iScroll(".wrapper",{bottom:0},{probeType:2});t.loading=!0,t.pageCount=0,t.pageNo=1,t.consultId=e.data("id"),t.chatList=[],t.status={code:-1},t.doctorPhoto="",t.$scan(),$GH.loading.show(),$("body").css({backgroundColor:"#fff"}),t.genDate=function(e){return $GH.genDate(e)},t.scanAudioDuration=function(){$("audio").each(function(e,t){t.addEventListener("canplaythrough",function(){var e=t.duration.toFixed(0);parseInt(e,10)&&$(t).next(".duration").text(e+"秒")},!1)})},t.playAudio=function(e){var t=$(e.target);"DIV"!==t[0].tagName&&(t=$(t.parent("div")));var i=t.find("audio"),n=t.find(".play").length;n?(i[0].pause(),t.find(".icon").removeClass("play")):(i[0].play(),t.find(".icon").addClass("play"),i[0].addEventListener("ended",function(){t.find(".icon").removeClass("play"),this.load()},!1))},alight.filters.beauty=function(){var e=new Date;return function(i){var n=new Date(i.split(" "));return n.getFullYear()==e.getFullYear()?t.genDate(n):i}},t.page=function(){$.get($GC.guahaoServer+"/json/bconsult/"+t.consultId,{pageNo:t.pageNo},function(e){return e.hasError?void $GH.alert(e.message):e.map.list&&0!==e.map.list.length?(t.chatList=4!=e.map.status?e.map.list.concat(t.chatList):t.chatList.concat(e.map.list),t.status.code=e.map.status,e.map.status>0&&4!==e.map.status&&2!==e.map.status&&(t.status.link=$GC.guahaoServer+"/my/consultorder/comment/"+t.chatList[0].consultId),t.doctorPhoto=e.map.doctorPhoto||$GC.staticServer+"/img/character/doc-unknow.png",t.loading=!1,$GH.loading.hide(),t.pageCount=e.map.pageCount,t.$scan(),t.refresh(),void t.scanAudioDuration()):($GH.alert("没有更多信息"),void $GH.loading.hide())},"json")},i.on("scroll",function(){t.pageNo<t.pageCount&&(4!=t.status.code?this.y>30&&!t.loading&&(t.loading=!0,t.pageNo++,t.$scan(),t.page()):this.maxScrollY>this.y&&!t.loading&&(t.loading=!0,t.pageNo++,t.$scan(),t.page()))}),t.refresh=function(n){var o=e.find(".J_Input_Ctrl"),a=e.find(".wrapper"),r=a.find(".scroll"),s=e.find(".wait-status");o.find(".text-input").css({width:document.body.scrollWidth-154+"px"}),o.find(".send-btn").attr("disabled","disabled"),4!=t.status.code?(a.css({bottom:o.height()}),s.css({bottom:o.height()})):s.css({bottom:0}),t.myself||(a.css({bottom:60}),s.css({bottom:60})),i.refresh(),(1==t.pageNo||n||4==t.status.code)&&i.scrollTo(0,a.height()-r.height(),500)},$GH.ImageUploader($(".J_Input_Ctrl"),{uploadBtn:".upload-btn",fileInput:".file-input",uploaderUrl:$GC.guahaoServer+"/json/black/image/upload?type=2",beforeComplete:function(){$GH.loading.show()},afterUpload:function(e){n(e.map)},afterComplete:function(){$GH.loading.hide()}}),t.imageShow=function(e){$GH.ImageUploader($(e.target).parent(),{onlySlider:e.target})};var n=function(i,n){var o=e.find(".text-input");return n=n||o.val(),!i&&n.length>500?void $GH.alert("咨询内容字数长度范围: 小于500字"):void $.post($GC.guahaoServer+"/json/black/bconsult/reply",{consultId:t.chatList[0].consultId,consultContent:n||"",imagePath:i?i.sourcePath:""},function(e){return e.hasError?void $GH.alert(e.message):(t.chatList=t.chatList.concat([{age:-1,consultDate:t.genDate(new Date),consultReplayId:null,consultContent:n||"",imagePath:i?i.imageServerPath+"/"+i.path:"",userType:0}]),t.status.code=0,t.textMsg="",t.asknum--,t.$scan(),void t.refresh(!0))},"json")};$("#J_Msg").on("input",function(t){var i=e.find(".send-btn"),o=$(this).val();$.trim(o)?(i.prop("disabled",!1),13===t.keyCode&&n(null,o)):i.prop("disabled",!0)}),$("#J_Msg").on("keydown",function(e){var i=$(this).val();$.trim(i)&&13===e.keyCode&&n(null,t.textMsg)}),t.send=function(e){n(null,e)},t.page()}),$GH.module("#J_Zixun_Jinri",function(e,t){var i=$GH.iScroll(".wrapper",{top:10},{probeType:2});t.totalCount=0,t.itemList=[],t.getExpertList=function(e,n){t.pageNo=e,t.loading=!0,$GH.loading.show(),$.ajax({dataType:"json",cache:!1,data:{pageNo:e,pi:"all",p:"全国"},url:$GC.guahaoServer+"/json/white/consult/searchexpert",type:"get",success:function(e){$GH.loading.hide(),t.loading=!1,e.data&&e.data.list&&(t.itemList=n?e.data.list:t.itemList.concat(e.data.list)),t.totalCount=e.data.totalCount,t.$scan(),i.refresh()}})},t.getExpertList(1),i.on("scroll",function(){t.itemList.length<t.totalCount&&this.maxScrollY>this.y&&!t.loading&&(t.loading=!0,t.$scan(),t.getExpertList(t.pageNo+1))})}),$GH.module("#J_QK_ExpertList",function(e,t){var i={params:{pi:"all",ci:"all",deptId:"all",sort:6,it:"",pc:"",vc:"",dt:"all",hl:"all",provinceStr:"全国",cityStr:"不限",deptStr:"科室"},urlParams:{},init:function(){var i=this,n=1===e.data("isvolunteer")?!0:!1;n&&(this.params.volunteerDoctor=1,this.params.sort=5);var o=this.urlParams=$.getUrlParams();if(o){for(var a in this.params)o[a]&&(this.params[a]=o[a]);"all"===i.params.deptId&&o.mainDeptId&&(i.params.deptId=o.mainDeptId),i.initCondition()}t.totalCount=0,t.itemList=[];var r=$GH.iScroll(".wrapper",{top:$(".J_FilterList").height(),bottom:$(".J_FilterBox").height()+1},{probeType:2});t.getExpertList=function(e,n){t.pageNo=e,t.loading=!0,$GH.loading.show(),i.params.pageNo=e,$.ajax({dataType:"json",cache:!1,data:i.params,url:$GC.guahaoServer+"/json/white/consult/searchexpert",type:"get",success:function(e){if(t.loading=!1,e.data&&e.data.list){t.itemList=n?e.data.list:t.itemList.concat(e.data.list);for(var i=e.data.list.length-1;i>=0;i--)e.data.list[i].totalConsultCount=$Common.shortCount(e.data.list[i].totalConsultCount),e.data.list[i].commentScore=(""+e.data.list[i].commentScore).split(".");t.totalCount=e.data.totalCount}else t.totalCount=0,t.noResult=!0;t.$scan(),r.refresh(),$GH.loading.hide()}})},r.on("scroll",function(){t.itemList.length<t.totalCount&&this.maxScrollY>this.y&&!t.loading&&(t.loading=!0,t.$scan(),t.getExpertList(t.pageNo+1))}),this.initFilter(),t.getExpertList(1)},initCondition:function(){var e=this.params,t=e.sort;if("8"==t||"1"==t){var i=$('.J_ComplexSort li[data-id="'+t+'"]');i&&(i.addClass("selected").siblings().removeClass("selected"),$(".J_ComplexName").html(i.html()))}var n=0,o="不限";$(".J_ConsultType li").removeClass("selected"),"1"===e.it&&(n=1,o="图文咨询"),"1"===e.pc&&(n=2,o="电话咨询"),"1"===e.vc&&(n=3,o="视频咨询"),$(".J_ConsultType li").eq(n).addClass("selected"),$(".J_ConsultType").prev().find(".status").html(o);var a=e.dt;if("all"!==a){var r=a.split(",");$(".J_DoctorLevel li").first().removeClass("selected");for(var s=0,l=a.length;l>s;s++)$('.J_DoctorLevel li[data-id="'+r[s]+'"]').addClass("selected");$(".J_DoctorLevel").prev().find(".status").html(r.join(" "))}var c=e.hl;if("all"!=c){var d=$('.J_HospitalLevel li[data-id="'+c+'"]');d.addClass("selected").siblings().removeClass("selected"),$(".J_HospitalLevel").prev().find(".status").html(d.html())}},initFilter:function(){var e=this;$(".J_Cons span").on("click",function(){$(".J_back").show(),$(this).siblings().removeClass("current"),$(this).addClass("current");var t=$(this).data("id");if(1===t||2===t)e.urlParams&&delete e.urlParams.from,location.href=$(this).data("page")+"&"+$.param(e.params);else if(3===t){var i=$(".J_ConsContainer").css("top");$("#gh").size()||(i=0),$(".J_ConsContainer").css({top:i,height:$(window).height()-$("#gh").height()}).show(),$(".J_ComplexSort").show(),$(".J_ComplexFilter").hide()}else{var i=$(".J_ConsContainer").css("top");$("#gh").size()||(i=0),$(".J_ConsContainer").css({top:i,height:$(window).height()-$("#gh").height()}).show(),$(".J_ComplexSort").hide(),$(".J_ComplexFilter").show()}}),$(".J_ConsContainer").on("click",function(e){$(e.target).closest(".J_Complex").length||$(e.target).closest(".J_Filter").length||$(this).hide()}),this.initComplexSort(),this.initComplexFilter()},initComplexSort:function(){var e=this;$(".J_Complex li").on("click",function(){$(this).siblings().removeClass("selected"),$(this).addClass(" selected"),$(".J_ComplexName").html($(this).text()),$(".J_"+e.context+"List").trigger("refreshList"),$(".J_Complex").hide(),$(".J_ConsContainer").hide(),$(".J_Conditions").removeClass("fixed").show().css("top","initial"),e.params.sort=$(this).data("id"),t.getExpertList(1,!0)})},initComplexFilter:function(){var e=this;$(".J_Filter .cancel").on("click",function(){$(this).closest(".J_Filter").hide(),$(".J_ConsContainer").hide()}),$(".J_Filter .ok").on("click",function(){$(this).closest(".J_Filter").hide();var i=$(".J_ConsultType .selected").data("id");""===i?(e.params.it="",e.params.pc="",e.params.vc=""):"it"===i?(e.params.it="1",e.params.pc="",e.params.vc=""):"pc"===i?(e.params.it="",e.params.pc="1",e.params.vc=""):(e.params.it="",e.params.pc="",e.params.vc="1");var n=[];$(".J_DoctorLevel .selected").each(function(){n.push($(this).data("id"))}),e.params.dt=n.join(","),e.params.hl=$(".J_HospitalLevel .selected").data("id")||"all",$(".J_ConsContainer").hide(),t.getExpertList(1,!0)}),$(".J_Filter").find(".list li").on("click",function(){var e=$(this).parent().parent().prev().find(".status"),t="";$(this).parent().hasClass("J_DocMul")&&$(this).data("id")?$(this).hasClass("selected")?($(this).removeClass("selected"),0===$(this).parent().find("li.selected").length?($(this).parent().find("li:first").addClass("selected"),$(this).parent().find("li.selected").each(function(){t+="&nbsp;"+$(this).text()}),e.html("不限")):($(this).parent().find("li.selected").each(function(){t+="&nbsp;"+$(this).text()}),e.html(t))):($(this).parent().find("li:first").removeClass("selected"),$(this).addClass("selected"),$(this).parent().find("li.selected").each(function(){t+="&nbsp;"+$(this).text()}),e.html(t)):($(this).siblings().removeClass("selected"),$(this).addClass("selected"),e.html($(this).text()))})}};i.init()}),$GH.module("#J_SelectDpet",function(){var e={init:function(){var e=this;$Common.mulLevelSelect.init({defaultSubItem:"hot",loadSubData:function(e){var t=$(".J_SubScroller"),i=$(this).data("id");$.ajax({type:"get",dataType:"json",cache:!1,url:t.data("action"),data:{deptId:i},success:function(t){if(t){var n=t.data||[];i&&n.splice(0,0,{id:"all",name:"不限"}),e(n)}},error:function(e,t){return"abort"===t?void $GH.alert("请求过于频繁，请求已中止"):void $GH.alert("操作失败，请稍后再试！")}})},buildHtml:function(e){return'<li data-id="'+e.id+'">'+e.name+"</li>"},onSubSelect:function(){var t=$(".J_MainScroller li.current").data("id"),i=$(".J_MainScroller li.current").text(),n=$(this).data("id"),o=$(this).text();"hot"===t&&(t=$(this).data("province"),n=$(this).data("city"),i="all"===t?"全国":$('.J_MainScroller li[data-id="'+t+'"]').text()),e.redirect(t,n,i,o)}})},redirect:function(e,t,i,n){setTimeout(function(){var o="_="+(new Date).getTime(),a=$.getUrlParams();switch($("#J_HiddenFrom").val()){case"consult":a.mainDeptId=e,a.deptId=t,a.mainDeptStr=i,a.deptStr=n,o="/consult/more?"+$.param(a)+"&"+o;break;case"volunteer":a.mainDeptId=e,a.deptId=t,a.mainDeptStr=i,a.deptStr=n,o="/consult/volunteer?"+$.param(a)+"&"+o;break;default:o=""}o&&(location.href=o)},100)}};e.init()}),$GH.module("#J_QK_zixun",function(e,t){if("1"!==$(".J_HiddenConsultLimit").val())return void $GH.alert("您今天咨询该医生的次数已满，明天再提问吧");$("#J_SelectDis").on("click",function(){return $GH.SS.init($(this),{showTreatment:!0}),!1}),e.find(".J_PatientsDropDown").dropdownSheet(),e.find(".J_AdjustWidth").each(function(){var e=$(this);e.find(".input-box").css("margin-left",e.find(".nowidth").width()+5+"px")}),t.selectDept=!1,t.deptName="全科",t.deptId=0,t.toggleSelectDept=function(){t.selectDept=!t.selectDept},t.setDept=function(e,i){t.deptName=i.target.innerText,t.deptId=e,t.toggleSelectDept()},t.submit=function(){var t=$GH.validate({"#sex":{required:"请选择性别"},"#age":{required:"请输入年龄",check:function(e){return 0==/^([1-9]\d|\d)$/.test(e)?"年龄只能输入数字0~99":!0}},"#v_content":{required:"请输入您的病情",check:function(e){return e.length<10||e.length>500?"病情描述长度范围：10到500字":!0}}});t&&e.find("form")[0].submit()};var i=function(){return e.find("img.preview").length};$GH.ImageUploader($(".g-image-upload-box"),{inputName:"imagePath",uploaderUrl:$GC.guahaoServer+"/json/black/image/upload?type=2",afterComplete:function(){i()>0&&$(".J_Showmeonfileuploaded").hide(),9===i()&&$(".upload-btn").hide()},afterDelete:function(){i()<=9&&$(".upload-btn").show(),1===i()&&$(".J_Showmeonfileuploaded").show()}})}),$GH.module("#J_SearchEmbed",function(e){var t={scroll:null,cacheHistory:[],init:function(){var t=this;this.initSearchBar(),this.scroll=$GH.iScroll(".J_ListScroll",{top:$("#J_SearchBox").height()-$("#gh").height(),zIndex:999}),$(".J_ListScroll").on("touchmove",function(){$("#J_Keyword").blur()}),$(document).on("tap",".J_HistoryList li",function(){t.redirect($(this).text())}),$(document).on("tap",".J_SuggestList li",function(){t.redirect($(this).text())}),$(".J_ClearHistory").on("click",function(){return t.clearHistory(),$("#J_Keyword").focus(),!1}),$("#J_SearchBox .J_Input").click(function(){return $("#J_SearchBar").show(),$("#J_SearchBox").hide(),$("#J_Keyword").focus(),e.addClass("opening"),!1}),this.showHistory($.trim($("#J_Keyword").val()),function(){t.loadSuggest()})},initSearchBar:function(){function t(){$("#J_SearchBar").hide(),$("#J_SearchBox").show(),e.removeClass("opening")}var i=this;$("#J_Keyword").focus();var n=$("#J_Keyword").val();n&&n.length&&($("#J_Keyword")[0].selectionStart=$("#J_Keyword")[0].selectionEnd=n.length,$(".J_Clear").show()),$(".J_Clear").on("click",function(){return $("#J_Keyword").val("").focus(),i.showHistory(),!1}),$(".J_Search").on("click",function(){return i.redirect($("#J_Keyword").val()),!1}),$("#J_SearchForm").on("submit",function(){return i.redirect($("#J_Keyword").val()),!1}),$(".J_Cancel").on("click",function(){return t(),!1}),$("#J_Keyword").on("input focus",function(){var e=$.trim($(this).val());e?$(".J_Clear").show():$(".J_Clear").hide(),$(".J_ListScroll").show(),i.showHistory(e,function(){i.loadSuggest()})}),$("#J_Keyword").on("blur",function(){}),$("#J_Keyword").on("keydown",function(e){13===e.which&&i.redirect($(this).val())})},redirect:function(e){if(e=$.trim(e),!e)return void $GH.alert("请输入搜索关键词");var t=$("#J_Keyword").data("goto")+"?q="+encodeURIComponent(e);$("#J_HiddenHospital").length&&(t+="&hospitalId="+$("#J_HiddenHospital").val()),this.isInHistory(e)?location.href=t:this.addHistory(e,function(){location.href=t})},isInHistory:function(e){for(var t=this.cacheHistory,i=0;i<t.length;i++)if(t[i]===e)return!0;return!1},loadSuggest:function(){var e=$("#J_Keyword");if(e.val()){var t=$.trim(e.data("action"));if(t){var i=this;$.ajax({type:"get",dataType:"json",cache:!1,url:t,data:{q:e.val()},success:function(e){if(e){var t=e.suggest;if(t){var n=[];t.hospital&&(n=t.hospital),t.disease&&(n=n.concat(t.disease)),t.doctor&&(n=n.concat(t.doctor)),i.showSuggest(n)}}},error:function(e,t){return"abort"===t?void $GH.alert("请求过于频繁，请求已中止"):void $GH.alert("操作失败，请稍后再试！")}})}}},showSuggest:function(e){if(e&&e.length){$(".J_HistoryList").hide();for(var t=[],i=0;i<e.length;i++)t.push("<li>"+e[i].name+"</li>");$(".J_SuggestList").show().find("ul").empty().append(t.join("")),this.scroll.refresh()}},callbackAdjust:function(e,t){var i=$(".J_HistoryList ul");void 0!==e&&(""===e||this.isInHistory(e)?i.find("li[data-temp]").remove():i.find("li[data-temp]").length?i.find("li[data-temp]").text(e):i.prepend('<li data-temp="1">'+e+"</li>"),$(".J_HistoryList").show()),i.find("li").length-i.find("li[data-temp]").length>0?$(".J_ClearHistory").show():$(".J_ClearHistory").hide(),"function"==typeof t&&t(),this.scroll.refresh()},showHistory:function(e,t){if($(".J_SuggestList").hide(),this.cacheHistory.length)return void this.callbackAdjust(e,t);var i;try{var n=window.localStorage;i=n.getItem("searchHistory"),i=JSON.parse(i)}catch(o){return void this.callbackAdjust(e,t)}if(!i||!i.length)return void this.callbackAdjust(e,t);this.cacheHistory=i;for(var a=[],r=[],s=0;s<i.length;s++)$.inArray(i[s],r)>-1||(a.push("<li>"+i[s]+"</li>"),r.push(i[s]));$(".J_HistoryList").show().find("ul").append(a.join("")),this.scroll.refresh(),this.callbackAdjust(e,t)},addHistory:function(e,t){function i(e){for(var t,i=[],n={},o=0;null!=(t=e[o])&&(n[t]||(i.push(t),n[t]=!0,7!=i.length));o++);return i}if(e){var n=window.localStorage;if(!n)return void t();var o=n.getItem("searchHistory");o=o?JSON.parse(o):[],o=i(o),-1==$.inArray(e,o)&&(7==o.length&&o.pop(),o.unshift(e));try{n.setItem("searchHistory",JSON.stringify(o)),t()}catch(a){t()}}},clearHistory:function(){var e=window.localStorage;e&&(e.removeItem("searchHistory"),$(".J_HistoryList").hide().find("ul").empty())}};t.init()}),$GH.module("#J_SearchIndex",function(){var e={scroll:null,cacheHistory:[],init:function(){var e=this;this.initSearchBar(),this.scroll=$GH.iScroll(".J_ListScroll",{top:$(".J_Input").height()-1,zIndex:6666}),$(".J_ListScroll").on("touchmove",function(){$("#J_Keyword").blur()}),$(document).on("tap",".J_HistoryList li",function(){e.redirect($(this).text())}),$(document).on("tap",".J_SuggestList li",function(){e.redirect($(this).text())}),$(".J_ClearHistory").on("click",function(){return e.clearHistory(),$("#J_Keyword").focus(),!1}),this.showHistory($.trim($("#J_Keyword").val()),function(){e.loadSuggest()
})},initSearchBar:function(){var e=this;$("#J_Keyword").focus();var t=$("#J_Keyword").val();t&&t.length&&($("#J_Keyword")[0].selectionStart=$("#J_Keyword")[0].selectionEnd=t.length,$(".J_Clear").show()),$(".J_Clear").on("click",function(){$("#J_Keyword").val("").focus(),e.showHistory()}),$(".J_Search").on("click",function(){e.redirect($("#J_Keyword").val())}),$("#J_SearchForm").on("submit",function(){return e.redirect($("#J_Keyword").val()),!1}),$(".J_Cancel").on("click",function(){window.history.back(-1)}),$("#J_Keyword").on("input focus",function(){var t=$.trim($(this).val());t?$(".J_Clear").show():$(".J_Clear").hide(),e.showHistory(t,function(){e.loadSuggest()})}),$("#J_Keyword").on("keydown",function(t){13===t.which&&e.redirect($(this).val())})},redirect:function(e){return(e=$.trim(e))?void(this.isInHistory(e)?location.href=$("#J_Keyword").data("goto")+"?q="+encodeURIComponent(e)+"&hospitalId="+$("#J_HiddenHospital").val():this.addHistory(e,function(){location.href=$("#J_Keyword").data("goto")+"?q="+encodeURIComponent(e)+"&hospitalId="+$("#J_HiddenHospital").val()})):void $GH.alert("请输入搜索关键词")},isInHistory:function(e){for(var t=this.cacheHistory,i=0;i<t.length;i++)if(t[i]===e)return!0;return!1},loadSuggest:function(){var e=$("#J_Keyword");if(e.val()){var t=this;$.ajax({type:"get",dataType:"json",cache:!1,url:e.data("action"),data:{q:e.val()},success:function(e){if(e){var i=e.suggest;if(i){var n=[];i.hospital&&(n=i.hospital),i.disease&&(n=n.concat(i.disease)),i.doctor&&(n=n.concat(i.doctor)),t.showSuggest(n)}}},error:function(e,t){return"abort"===t?void $GH.alert("请求过于频繁，请求已中止"):void $GH.alert("操作失败，请稍后再试！")}})}},showSuggest:function(e){if(e&&e.length){$(".J_HistoryList").hide();for(var t=[],i=0;i<e.length;i++)t.push("<li>"+e[i].name+"</li>");$(".J_SuggestList").show().find("ul").empty().append(t.join("")),this.scroll.refresh()}},callbackAdjust:function(e,t){var i=$(".J_HistoryList ul");void 0!==e&&(""===e||this.isInHistory(e)?i.find("li[data-temp]").remove():i.find("li[data-temp]").length?i.find("li[data-temp]").text(e):i.prepend('<li data-temp="1">'+e+"</li>"),$(".J_HistoryList").show()),i.find("li").length-i.find("li[data-temp]").length>0?$(".J_ClearHistory").show():$(".J_ClearHistory").hide(),"function"==typeof t&&t(),this.scroll.refresh()},showHistory:function(e,t){if($(".J_SuggestList").hide(),this.cacheHistory.length)return void this.callbackAdjust(e,t);var i;try{var n=window.localStorage;i=n.getItem("searchHistory"),i=JSON.parse(i)}catch(o){return void this.callbackAdjust(e,t)}if(!i||!i.length)return void this.callbackAdjust(e,t);this.cacheHistory=i;for(var a=[],r=[],s=0;s<i.length;s++)$.inArray(i[s],r)>-1||(a.push("<li>"+i[s]+"</li>"),r.push(i[s]));$(".J_HistoryList").show().find("ul").append(a.join("")),this.scroll.refresh(),this.callbackAdjust(e,t)},addHistory:function(e,t){function i(e){for(var t,i=[],n={},o=0;null!=(t=e[o])&&(n[t]||(i.push(t),n[t]=!0,7!=i.length));o++);return i}if(e){var n=window.localStorage;if(!n)return void $GH.alert("当前环境不支持保存搜索历史","",function(){t()});var o=n.getItem("searchHistory");o=o?JSON.parse(o):[],o=i(o),-1==$.inArray(e,o)&&(7==o.length&&o.pop(),o.unshift(e));try{n.setItem("searchHistory",JSON.stringify(o)),t()}catch(a){t()}}},clearHistory:function(){var e=window.localStorage;return e?(e.removeItem("searchHistory"),void $(".J_HistoryList").hide().find("ul").empty()):void $GH.alert("当前环境不支持保存搜索历史")}};e.init()}),$GH.module("#J_SearchExperts",function(e,t){$("body").css("background","#FFFFFF"),t.serviceList=[{id:"all",name:"全部服务"},{id:"0",name:"预约挂号"},{id:"1",name:"在线咨询"}];for(var i=e.attr("data-service"),n=0;n<t.serviceList.length;n++)if(i===t.serviceList[n].id){t.service=$.extend({},t.serviceList[n]);break}t.service||(t.service=$.extend({},t.serviceList[0])),t.sortList=[{id:"2",name:"综合排序"},{id:"8",name:"接诊量"},{id:"1",name:"患者评价"}],t.sort=$.extend({},t.sortList[0]),t.esList=[{id:"all",name:"不限"},{id:"1",name:"有号"}],t.es=$.extend({},t.esList[0]),t.dtList=[{id:"all",name:"不限"},{id:"1",name:"主任医师"},{id:"3",name:"副主任医师"},{id:"2",name:"主治医师"}],t.dt=$.extend({},t.dtList[0]),t.hlList=[{id:"all",name:"不限"},{id:"33",name:"三级甲等"}],t.hl=$.extend({},t.hlList[0]),t.csList=[{id:"all",name:"不限"},{id:"0",name:"图文咨询"},{id:"1",name:"电话咨询"},{id:"2",name:"视频咨询"}],t.cs=$.extend({},t.csList[0]),$Common.searchWithFilter({url:e.attr("data-action"),types:{all:["service","sort","es","cs","dt","hl"],others:["es","cs","dt","hl"]}},t)}),$GH.module("#J_SearchHops",function(e,t){$("body").css("background","#FFFFFF"),t.sortList=[{id:"2",name:"综合排序"},{id:"7",name:"预约量"}],t.sort=$.extend({},t.sortList[0]),t.hlList=[{id:"all",name:"不限"},{id:"33",name:"三级甲等"}],t.hl=$.extend({},t.hlList[0]),t.wtList=[{id:"all",name:"不限"},{id:"1",name:"非常快"},{id:"2",name:"比较快"},{id:"3",name:"一般"}],t.wt=$.extend({},t.wtList[0]),$Common.searchWithFilter({url:e.attr("data-action"),types:{all:["sort","wt","hl"],others:["wt","hl"]}},t)}),$GH.module("#J_SearchEteams",function(e,t){$("body").css("background","#FFFFFF"),t.sortList=[{id:"2",name:"默认排序"}],t.sort=$.extend({},t.sortList[0]),$Common.searchWithFilter({url:e.attr("data-action"),types:{all:["sort"],others:[]},successFn:function(e,t,i){return e.hasError?void $GH.alert(e.message):void(e.data&&e.data.list&&(t.itemList=t.itemList.concat(e.data.list),i.pageCount=Math.ceil(e.data.totalCount/5)))}},t)}),$GH.module("#J_SearchConsults",function(e,t){$("body").css("background","#FFFFFF"),$Common.searchWithFilter({url:e.attr("data-action"),noFilter:!0,successFn:function(e,t,i){return e.hasError?void $GH.alert(e.message):void(e.data&&e.data.list&&(t.itemList=t.itemList.concat(e.data.list),i.pageCount=e.data.pageCount))}},t)}),$GH.module("#J_SearchMedicines",function(e,t){$("body").css("background","#FFFFFF"),$Common.searchWithFilter({url:e.attr("data-action"),noFilter:!0,scrollerBot:0,successFn:function(e,t,i){return e.hasError?void $GH.alert(e.message):void(e.data&&e.data.list&&(t.itemList=t.itemList.concat(e.data.list),i.pageCount=e.data.pageCount))}},t)}),$GH.module("#J_SearchDoctor",function(){var e={init:function(){var e=this;$("#J_Keyword").on("click",function(){location.href=$(this).data("goto")}),$(".J_Search").on("click",function(){e.search()}),$("#J_SearchForm").on("submit",function(){return e.search(),!1}),$(".J_Clear").on("click",function(){$("#J_Phone").val("").focus()}),$("#J_Phone").on("keydown",function(t){return 13===t.which?(e.search(),!1):void 0}),$("#J_Phone").on("input",function(){var e=$.trim($(this).val());e?$(".J_Clear").show():$(".J_Clear").hide()}),$("#J_Phone").focus()},search:function(){$GH.loading.show();var e=$("#J_Phone"),t=$GH.validate({"#J_Phone":{required:"手机号码不能为空",mobile:"手机号码格式不正确"}});t?$.ajax({type:"get",dataType:"json",cache:!1,url:e.data("action"),data:{mobileNo:e.val()},success:function(t){t&&t.data?location.href=e.data("goto")+t.data.expertUuid:$GH.alert("找不到该手机号对应的医生"),$GH.loading.hide()},error:function(e,t){return"abort"===t?void $GH.alert("请求过于频繁，请求已中止"):($GH.alert("操作失败，请稍后再试！"),void $GH.loading.hide())}}):$("#J_Phone").focus()}};e.init()}),$GH.module("#J_Hosp_Pos",function(e,t){function i(e,i,n){e&&i||(n=n||"无法获取定位，请检查网络和定位设置"),t.msg=n||"",t.latitude=e,t.longitude=i,t.getHospitalList(1)}t.itemList=[],t.loading=!0,$GH.loading.show(),t.pageCount=1,t.msg="";var n=$GH.iScroll(".wrapper",{top:0},{probeType:2});if(t.getHospitalList=function(e){t.pageNo=e,$GH.loading.show(),$.ajax({url:$GC.guahaoServer+"/json/white/fastorder/hospitals",dataType:"json",data:{latitude:t.latitude,longitude:t.longitude,provinceId:"",cityId:"",sort:"distance",distance:10,pageNo:e},error:function(){$GH.loading.hide(),t.loading=!1,t.$scan()},success:function(e){return $GH.loading.hide(),t.loading=!1,e?(t.itemList=t.itemList.concat(e.list),""===t.msg&&0==t.itemList.length&&(t.msg="附近暂无开通在线预约挂号的医院"),t.pageCount=e.pageCount,t.$scan(),void n.refresh()):(t.loading=!1,void t.$scan())}})},n.on("scroll",function(){t.pageNo<t.pageCount&&this.maxScrollY>this.y&&!t.loading&&(t.loading=!0,t.$scan(),t.getHospitalList(t.pageNo+1))}),document.domain.indexOf("dhb")>-1&&"undefined"!=typeof nativeEntry){var o=nativeEntry.init();o.geolocation.geo(function(e){i(e.latitude,e.longitude)})}else navigator.geolocation?navigator.geolocation.getCurrentPosition(function(e){i(e.coords.latitude,e.coords.longitude)},function(){i("","","无法获取定位，请检查网络和定位设置")},{enableHighAccuracy:!0,timeout:5e3,maximumAge:0}):i("","","无法获取定位")}),function(e){"use strict";var t={version:2.6};e.WeixinApi=t,"function"==typeof define&&(define.amd||define.cmd)&&(define.amd?define(function(){return t}):define.cmd&&define(function(e,i,n){n.exports=t}));var i=function(e,i,n){n=n||{};var o=function(e){switch(!0){case/\:cancel$/i.test(e.err_msg):n.cancel&&n.cancel(e);break;case/\:(confirm|ok)$/i.test(e.err_msg):n.confirm&&n.confirm(e);break;case/\:fail$/i.test(e.err_msg):default:n.fail&&n.fail(e)}n.all&&n.all(e)},a=function(t,i){if("menu:general:share"===e.menu)if("timeline"==i.shareTo){var n={appId:t.appId,img_url:t.img_url,link:t.link,desc:t.title,title:t.desc};i.generalShare(n,o)}else i.generalShare(t,o);else WeixinJSBridge.invoke(e.action,t,o)};WeixinJSBridge.on(e.menu,function(e){if(n.async&&n.ready){var o="_wx_loadedCb_";t[o]=n.dataLoaded||new Function,t[o].toString().indexOf(o)>0&&(t[o]=new Function),n.dataLoaded=function(i){t[o](i),a(i,e)},n.ready&&n.ready(e)}else n.ready&&n.ready(e),a(i,e)})};t.shareToTimeline=function(e,t){i({menu:"menu:share:timeline",action:"shareTimeline"},{appid:e.appId?e.appId:"",img_url:e.img_url,link:e.link,desc:e.title,title:e.desc,img_width:"640",img_height:"640"},t)},t.shareToFriend=function(e,t){i({menu:"menu:share:appmessage",action:"sendAppMessage"},{appid:e.appId?e.appId:"",img_url:e.img_url,link:e.link,desc:e.desc,title:e.title,img_width:"640",img_height:"640"},t)},t.shareToWeibo=function(e,t){i({menu:"menu:share:weibo",action:"shareWeibo"},{content:e.desc,url:e.link},t)},t.generalShare=function(e,t){i({menu:"menu:general:share"},e,t)},t.addContact=function(e,t){t=t||{},WeixinJSBridge.invoke("addContact",{webtype:"1",username:e},function(e){var i=!e.err_msg||"add_contact:ok"==e.err_msg||"add_contact:added"==e.err_msg;i?t.success&&t.success(e):t.fail&&t.fail(e)})},t.imagePreview=function(e,t){e&&t&&0!=t.length&&WeixinJSBridge.invoke("imagePreview",{current:e,urls:t})},t.showOptionMenu=function(){WeixinJSBridge.call("showOptionMenu")},t.hideOptionMenu=function(){WeixinJSBridge.call("hideOptionMenu")},t.showToolbar=function(){WeixinJSBridge.call("showToolbar")},t.hideToolbar=function(){WeixinJSBridge.call("hideToolbar")},t.getNetworkType=function(e){e&&"function"==typeof e&&WeixinJSBridge.invoke("getNetworkType",{},function(t){e(t.err_msg)})},t.closeWindow=function(e){e=e||{},WeixinJSBridge.invoke("closeWindow",{},function(t){switch(t.err_msg){case"close_window:ok":e.success&&e.success(t);break;default:e.fail&&e.fail(t)}})},t.ready=function(t){if(t&&"function"==typeof t){var i=this,n=function(){t(i)};"undefined"==typeof e.WeixinJSBridge?document.addEventListener?document.addEventListener("WeixinJSBridgeReady",n,!1):document.attachEvent&&(document.attachEvent("WeixinJSBridgeReady",n),document.attachEvent("onWeixinJSBridgeReady",n)):n()}},t.openInWeixin=function(){return/MicroMessenger/i.test(navigator.userAgent)},t.scanQRCode=function(e){e=e||{},WeixinJSBridge.invoke("scanQRCode",{},function(t){switch(t.err_msg){case"scan_qrcode:ok":e.success&&e.success(t);break;default:e.fail&&e.fail(t)}})},t.getInstallState=function(e,t){t=t||{},WeixinJSBridge.invoke("getInstallState",{packageUrl:e.packageUrl||"",packageName:e.packageName||""},function(e){var i=e.err_msg,n=i.match(/state:yes_?(.*)$/);n?(e.version=n[1]||"",t.success&&t.success(e)):t.fail&&t.fail(e),t.all&&t.all(e)})},t.openLocation=function(e,t){t=t||{},WeixinJSBridge.invoke("openLocation",{latitude:e.latitude,longitude:e.longitude,name:e.name,address:e.address,scale:e.scale||14,infoUrl:e.infoUrl||""},function(e){"open_location:ok"===e.err_msg?t.success&&t.success(e):t.fail&&t.fail(e),t.all&&t.all(e)})},t.sendEmail=function(e,t){t=t||{},WeixinJSBridge.invoke("sendEmail",{title:e.subject,content:e.body},function(e){"send_email:sent"===e.err_msg?t.success&&t.success(e):t.fail&&t.fail(e),t.all&&t.all(e)})},t.enableDebugMode=function(t){e.onerror=function(e,i,n,o){if("function"==typeof t)t({message:e,script:i,line:n,column:o});else{var a=[];a.push("额，代码有错。。。"),a.push("\n错误信息：",e),a.push("\n出错文件：",i),a.push("\n出错位置：",n+"行，"+o+"列"),alert(a.join(""))}}}}(window),function(){{var e=function(){return{isMobile:function(){return"ontouchstart"in document?!0:!1}()}}(),t=function(){var e=function(t){var i=this;i.queue=[],i.urls=[].concat(t),i.total=i.urls.length,i.count=0,i.urls.forEach(function(t){if("string"!=typeof t)return++i.count,!1;var n=document.createElement("img");n.src=t,n.onload=n.onerror=function(){if(++i.count>=i.total){var t=i.queue.shift();if("function"==typeof t){var n=t();n&&n.constructor===e&&(n.queue=i.queue)}}}})};return e.prototype={constructor:e,then:function(e){return this.queue.push(e),this}},e}();!function(){var e=document.createElement("canvas"),t=e.getContext("2d"),i=function(e,t,i){var n=e.length,o=0,a=[];e.forEach(function(e){var r=document.createElement("img");r.src=e,r.onload=function(){o++,o===n&&(a.length?i():t())},r.onerror=function(){o++,a.push(e),o===n&&(a.length?i():t())}})};return function(n){var o={bg:n.bg||"",fg:n.fg||"",left:n.left||0,top:n.top||0,success:n.success||function(){},error:n.error||function(){}};i([o.bg,o.fg],function(){var i=document.createElement("img");i.src=o.bg;var n=i.width,a=i.height;e.width=n,e.height=a,t.drawImage(i,0,0);var r=document.createElement("img");r.src=o.fg,t.drawImage(r,o.left,o.top);var s=e.toDataURL("image/png");o.success(s)},function(e){o.error(e)})}}()}$GH.module(".gp-xywy-apply",function(){$(".see_more").on("click",function(){$(this).hide(),$("#more").show()}),$("#apply").on("click",function(){var e=document.querySelector("#apply-form");document.body.scrollTop<e.offsetTop&&(document.body.scrollTop=e.offsetTop-(document.querySelector("#gh")?45:0)-10);var t=$GH.validate({"#name":{required:"请填写您的姓名"},"#hospital":{required:"请填写您所在的医院"},"#department":{required:"请填写您所在的科室"},"#title":{required:"请填写您的职称"},"#idcard":{required:"请填写您的身份证",idcard:"您的身份证格式不正确"},"#mobile":{required:"请填写手机号",mobile:"您的手机号格式不正确"},"#agreement":{checked:function(){return this[0].checked?!0:"您还未同意保险条款"}}});t&&$GH.request({url:$("#register")[0].action,type:"post",data:$("#register").serialize(),loading:!0,fulfilled:function(e){location.href=e.data.url},rejected:function(e,t){t&&e.data.needRedirect&&$GH.alert(e.message,null,function(){location.href=e.data.url})}})}),$(window).on("scroll",function(){document.body.scrollTop+400>document.body.scrollHeight-document.documentElement.clientHeight?$("#popBox").hide():$("#popBox").show()})}),$GH.module(".gp-xywy-apply-success",function(){if(/MicroMessenger/i.test(navigator.userAgent)){var e=$("#share");if(e.length){var t=$("#share-layout");e.css({display:"block"}),e.on("click",function(){t.show()}),t.on("click",function(){$(this).hide()})}}}),$GH.module(".gp-xywy-amount",function(){var e=$("#allow-give"),t=e.siblings(".g-toggle");e.on("click",function(){return $GH.request(t.hasClass("active")?{url:e.attr("data-inactive"),loading:!0,fulfilled:function(){t.removeClass("active")}}:{url:e.attr("data-active"),loading:!0,fulfilled:function(){t.addClass("active")}}),!1}),$GH.request({url:e.attr("data-isOpen"),loading:!0,fulfilled:function(e){1==e.data?t.removeClass("active").addClass("active"):t.removeClass("active")},rejected:function(){$GH.alert("获取用户状态失败")}})}),$GH.module(".gp-xywy-accept-invite",function(){var e={};e.cover=function(){function i(){var e=document.body.scrollTop,t=n.bg[0].offsetHeight||200,i=20,o=0;e=Math.min(t,e),o=i*(e/t),n.textA.css({"-webkit-transform":"translate3d(0, "+o+"px, 0)"}),n.textB.css({"-webkit-transform":"translate3d(0, "+o+"px, 0)"})}var n={bg:$("#cover-bg"),man:$("#cover-man"),textA:$("#cover-text-a"),textB:$("#cover-text-b")};new t([n.bg[0].src,n.man[0].src,n.textA[0].src,n.textB[0].src]).then(function(){setTimeout(function(){n.textA.addClass("active")},100),setTimeout(function(){n.textB.addClass("active")},300),setTimeout(function(){n.man.addClass("active")},600),setTimeout(function(){e.amount.start()},1e3)}),$(document.body).on("touchmove",function(){window.console&&console.log(1),i()}),$(window).on("scroll",function(){i()})}(),e.amount=function(){function e(){var e=~~t.progressFill.data("progress");e=Math.max(0,Math.min(100,e)),e+="%",t.progressFill.css({width:e})}var t={progressFill:$("#progress-fill")};return{start:e}}(),e.invited=function(){var e={more:$("#invited-more"),list:$("#invited-list")};e.list.find("li").length>3&&(e.more.addClass("active"),e.more.on("click",function(){e.list.addClass("active"),e.more.removeClass("active")}))}()}),$GH.module(".gp-xywy-apply-success, .gp-xywy-invite, .gp-xywy-invite-h5",function(){var t={successIcon:$("#success-icon"),shareBtn:$("#share-btn"),shareGuide:$("#share-guide"),qrBtn:$("#qr-btn"),qrPopup:$("#qr-popup"),qrImg:$("#qr-img")};if(t.shareBtn.length&&!function(){var i=new $GH.Viewer(t.shareGuide);t.shareBtn.on(e.isMobile&&"tap"||"click",function(){i.show()}),t.shareGuide.on(e.isMobile&&"tap"||"click",function(){i.hide()})}(),t.qrBtn.length){var i=new $GH.Viewer(t.qrPopup);t.qrBtn.on(e.isMobile&&"tap"||"click",function(){i.show()}),t.qrPopup.on(e.isMobile&&"tap"||"click",function(){i.hide()})}}),$GH.module(".gp-xywy-apply-success",function(){})}(),$(function(){var e=function(e){var t=function(){$(".J_CountDownTip").show(),$(".J_CountDown").countdown(function(){$(".J_CountDownTip").hide(),$(".J_GetCaptcha").show()},60,"time秒后重发")};$(".J_GetCaptcha").on("click",function(){var i=$("#mobile").val();return i?void $GH.mobileCode.basic(i,e,function(){$(".J_GetCaptcha").hide(),t()}):void $GH.alert("请输入手机号")})};$GH.module("#J_DoctorRegister",function(t){var i={init:function(){this.registerInit(),this.completeInfo()},registerInit:function(){$(".J_Check").on("click",function(){return $(this).toggleClass("g-checkbox-checked"),$(this).toggleClass("g-checkbox"),$("#agreement").val($(this).hasClass("g-checkbox-checked")?"1":""),!1}),e("REG_MOBILE"),$(".J_RegisterFirst").on("click",function(){var e=$(this),t=$GH.validate({"#mobile":{required:"请输入手机号"},"#captcha":{required:"请输入验证码"},"#password":{required:"请输入密码"},"#agreement":{required:"请先同意协议才能注册"}});return t&&$.ajax({type:"post",dataType:"json",data:{mobile:$("#mobile").val(),password:$("#password").val(),code:$("#captcha").val()},cache:!1,url:e.data("action"),success:function(t){void 0===t.hasError||t.hasError?$GH.alert(t.message):location.href=e.data("goto")+"?loginId="+t.data},error:function(e,t){"abort"!==t&&$GH.alert("操作失败，请稍后重试！")}}),!1})},completeInfo:function(){var e=function(){return t.find("img.preview").length};$GH.ImageUploader($(".g-image-upload-box"),{uploadBtn:".upload-btn",fileInput:".file-input",inputName:"certificateImage",uploaderUrl:window.$GC.guahaoServer+"/json/white/doctor/image/upload",afterComplete:function(){e()>0&&$(".J_Showmeonfileuploaded").hide(),2===e()&&$(".upload-btn").hide()},afterDelete:function(){e()<=2&&$(".upload-btn").show(),1===e()&&$(".J_Showmeonfileuploaded").show()}}),$(".J_RegisterSecond").on("click",function(){var e=$(this),t=$GH.validate({"#doctorName":{required:"请输入真实姓名"},"#hospitalName":{required:"请输入所在医院"},"#hospdeptName":{required:"请输入所在科室"},"#telephoneNo":{required:"请输入医院电话"}});if(t){var i=$("#doctorSecondForm").serializeToObj();if($.isArray(i.certificateImage))i.certificateImage=i.certificateImage.join(",");else if(!i.certificateImage||0===i.certificateImage.length)return $GH.alert("请上传执业证书照片"),!1;$.ajax({type:"post",dataType:"json",data:i,cache:!1,url:e.data("action"),success:function(t){void 0===t.hasError||t.hasError?$GH.alert(t.message):location.href=e.data("goto")},error:function(e,t){"abort"!==t&&$GH.alert("操作失败，请稍后重试！")}})}return!1})}};i.init()}),$GH.module("#J_DoctorLogin",function(){var e={init:function(){$(".J_ImgCaptcha").on("click",function(){return $GH.refreshCaptcha($(this).find("img")),!1}),$(".J_Login").on("click",function(){var e=$(this),t=$GH.validate({"#username":{required:"用户名不能为空"},"#password":{required:"请输入密码"},"#captcha":{required:"请输入验证码"}});return t&&$.ajax({type:"post",dataType:"json",data:{loginId:$("#username").val(),password:window.md5($("#password").val()),validCode:$("#captcha").val()},cache:!1,url:e.attr("data-action"),success:function(t){void 0===t.hasError||t.hasError?($GH.alert(t.message),$("#captcha").val("").focus(),$GH.refreshCaptcha($(".J_ImgCaptcha").find("img"))):location.href=e.data("goto")},error:function(e,t){"abort"!==t&&$GH.alert("登录失败，请稍后重试！")}}),!1})}};e.init()}),$GH.module("#J_GetInsurance",function(){var e={init:function(){$(".J_Submit").on("click",function(){var e=$(this),t=$GH.validate({"#cardNo":{required:"身份证号码不能为空"},"#agreement":{required:"请先选择同意投保医者无忧产品"}});return t&&$.ajax({type:"get",dataType:"json",data:{cardNo:$("#cardNo").val()},cache:!1,url:e.attr("data-action"),success:function(t){void 0===t.hasError||t.hasError?$GH.alert(t.message):location.href=e.data("goto")},error:function(e,t){"abort"!==t&&$GH.alert("操作失败，请稍后重试！")}}),!1}),$(".J_Check").on("click",function(){return $(this).toggleClass("g-checkbox-checked"),$(this).toggleClass("g-checkbox"),$("#agreement").val($(this).hasClass("g-checkbox-checked")?"1":""),!1})}};e.init()}),$GH.module("#J_InsuranceShare",function(){location.href.indexOf("flag=1")>-1&&$(".J_MainTips").text("您已经领取过医者无忧险！赶紧分享给小伙伴吧！")}),$GH.module("#J_DoctorAuth",function(e){var t={init:function(){this.initPreview(),this.initUpload(),this.initSubmit()},initPreview:function(){$(".lightbox").on("click",function(){var e=$(this).attr("href");return $(".J_LightBox").show().find(".J_Inner").html("<img src="+e+">"),!1}),$(".J_LightBox").on("click",function(){$(this).hide()})},initUpload:function(){var t=function(){return e.find("img.preview").length};$GH.ImageUploader($(".g-image-upload-box"),{uploadBtn:".upload-btn",fileInput:".file-input",inputName:"certificateImage",uploaderUrl:window.$GC.guahaoServer+"/json/black/doctor/image/upload",afterComplete:function(){t()>0&&$(".J_Showmeonfileuploaded").hide(),2===t()&&$(".upload-btn").hide()},afterDelete:function(){t()<=2&&$(".upload-btn").show(),1===t()&&$(".J_Showmeonfileuploaded").show()}})},initSubmit:function(){$(".J_Submit").on("click",function(){var e=$(this),t=$("#doctorAuthForm").serializeToObj();if($.isArray(t.certificateImage))t.certificateImage=t.certificateImage.join(",");else if(!t.certificateImage||0===t.certificateImage.length)return $GH.alert("请上传医师执业证书或手持工牌照"),!1;return $.ajax({type:"post",dataType:"json",data:t,cache:!1,url:e.data("action"),success:function(t){void 0===t.hasError||t.hasError?$GH.alert(t.message):$GH.alert("认证申请已提交，医生助理将在1-5个工作日完成审核，请您关注","",function(){location.href=e.data("goto")})},error:function(e,t){"abort"!==t&&$GH.alert("操作失败，请稍后重试！")}}),!1})}};t.init()}),$GH.module("#J_SendInsurance",function(){var e={init:function(){this.initThanks();var e=this,t=$(".J_HiddenCount").val();$(".J_SendCount li.current").removeClass("current");var i=$(".J_SendCount li.flag-"+t);i.addClass("current"),this.adjustInfo(t,i.text()),$(".J_Check").on("click",function(){return $(this).toggleClass("g-checkbox-checked"),$(this).toggleClass("g-checkbox"),$("#agreement").val($(this).hasClass("g-checkbox-checked")?"1":""),!1}),$(".J_SendCount li").on("click",function(){$(".J_SendCount li").removeClass("current"),$(this).addClass("current");var t=parseInt($(this).data("count"),10);e.adjustInfo(t,$(this).text())}),$(".J_Submit").on("click",function(){return $("#J_SendForm").submit(),!1})},initThanks:function(){function e(){$GH.request({url:i.load.data("action"),data:{pageNo:1,expertId:o},beforeSend:function(){$GH.loading.show()},fulfilled:function(e){for(var t,i,o=e.data||[],a=40,r=0;t=o[r];r++)i=t.giveDesc||"",n.stack.push({name:t.userName||"",time:t.giveTime||"",summary:i.length>a?i.slice(0,a-2)+"...":i,detail:i.length>a?i:""})},always:function(){t()}})}function t(){if($GH.loading.hide(),n.stack.length>0){n.show||(n.show=!0,i.wrap.show());for(var e,t=0;(e=n.stack[t])&&a>t;t++)li=document.createElement("li"),li.innerHTML='<p class="row-a"><span class="user">'+e.name+'</span><span class="time">'+e.time+'</span></p><p class="row-b"><span class="summary">'+e.summary+'</span><span class="detail">'+e.detail+'</span><span class="arrow"></span></p>',i.list.append(li);n.stack.length<=a&&i.more.hide(),n.stack=[]}}var i={wrap:$("#xywy-thanks-list"),list:$("#xywy-thanks-list ul"),load:$("#xywy-thanks-load"),more:$("#xywy-thanks-more")},n={stack:[]},o=i.load.data("expertid"),a=3;i.list.on("click","li",function(){var e=$(this),t=e.find(".detail");t.length>0&&""!==$.trim(t.text())&&($GH.autoHeight(e.find(".row-b")[0]),e.toggleClass("active"))}),e()},adjustInfo:function(e,t){$(".J_HiddenCount").val(e),$(".J_FlagText").text(t),$(".J_MainCount").text(1*e+"万元"),$(".J_ExtraCount").text(.5*e+"万元"),$("#J_payTotal").text(20*e)}};e.init()}),$GH.module(".gp-xywy-thanks",function(){var e=function(e,t){var i=$(e);i.length>0&&t(e)};e("#xywy-thanks-list",function(){function e(){var e=n.list[0].getBoundingClientRect();e.bottom-document.documentElement.clientHeight<200&&o.login&&t()}function t(){return o.last?!1:void $GH.request({url:n.load.data("action"),data:{pageNo:o.page,expertId:s},beforeSend:function(){$GH.loading.show()},fulfilled:function(e){o.page++;var t=e.data||[];t.length<a&&(o.last=!0);for(var i,n,r=40,s=0;i=t[s];s++)n=i.giveDesc||"",o.stack.push({name:i.userName||"",time:i.giveTime||"",summary:n.length>r?n.slice(0,r-2)+"...":n,detail:n.length>r?n:""})},always:function(){i()}})}function i(){if($GH.loading.hide(),o.show||(0===o.stack.length&&n.wrap.html("<p style='text-align: center;padding-top: .5em;'>没有数据哦~</p>"),o.show=!0,n.wrap.show()),o.stack.length>0){for(var e,t=r;e=o.stack[t];t++)li=document.createElement("li"),li.innerHTML='<p class="row-a"><span class="user">'+e.name+'</span><span class="time">'+e.time+'</span></p><p class="row-b"><span class="summary">'+e.summary+'</span><span class="detail">'+e.detail+'</span><span class="arrow"></span></p>',n.list.append(li);r=t}o.last||o.login||(n.login[0].href="/user/login?target="+encodeURIComponent(location.pathname.slice(1)+location.search),n.login.show())}var n={wrap:$("#xywy-thanks-list"),list:$("#xywy-thanks-list ul"),load:$("#xywy-thanks-load"),login:$("#xywy-thanks-login")},o={show:!1,last:!1,login:$GC.isLogined,page:1,stack:[]},a=10,r=0,s=n.load.data("expertid");if(n.list.on("click","li",function(){var e=$(this),t=e.find(".detail");t.length>0&&""!==$.trim(t.text())&&($GH.autoHeight(e.find(".row-b")[0]),e.toggleClass("active"))}),n.load.length>0){var l=0,c=-1;$(window).on("scroll",function(){var t=document.body.scrollTop;c>-1&&t>c&&e(),c=t}),n.list.on("touchstart",function(e){l=e.touches[0].clientY}),n.list.on("touchmove",function(t){l-t.touches[0].clientY>15&&e()})}t()})})});